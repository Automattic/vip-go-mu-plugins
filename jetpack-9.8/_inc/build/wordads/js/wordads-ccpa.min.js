/* Do not modify this file directly. It is compiled from other files. */
/**
 * Outputs Javascript to handle California IP detection, consent modal, and setting of default cookies.
 */
!function(){var e=function(e){return e&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},t=function(e,t,a,n,o,c){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var s="";if(a)switch(a.constructor){case Number:s=a===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+a;break;case String:s="; expires="+a;break;case Date:s="; expires="+a.toUTCString()}return"rootDomain"!==o&&".rootDomain"!==o||(o=(".rootDomain"===o?".":"")+document.location.hostname.split(".").slice(-2).join(".")),document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+s+(o?"; domain="+o:"")+(n?"; path="+n:"")+(c?"; secure":""),!0};window.__uspapi=function(t,a,n){if("function"==typeof n)if("getUSPData"===t&&1===a)if(navigator.globalPrivacyControl)n({version:1,uspString:"1YYN"},!0);else{var o=e("usprivacy");null!==o?n({version:1,uspString:o},!0):n(null,!1)}else n(null,!1)};var a=function(){var e=ccpaSettings.defaultOptinCookieString,a=".wordpress.com"===location.hostname.slice(-14)?".rootDomain":location.hostname;t("usprivacy",e,31536e3,"/",a)},n=function(e){var a=".wordpress.com"===location.hostname.slice(-14)?".rootDomain":location.hostname;t("ccpa_applies",e,86400,"/",a)},o=function(){var e=document.querySelector("#ccpa-modal");e&&e.parentElement.removeChild(e)},c=function(){var t;o(),t=document.createElement("div"),document.body.insertBefore(t,document.body.firstElementChild),t.outerHTML='<div id="ccpa-loading" class="cleanslate ccpa__loading-wrapper"><div class="ccpa__loading-overlay"><span class="ccpa__loading-message">'+ccpaSettings.strings.pleaseWait+"...</span></div></div>";var a=new XMLHttpRequest;a.open("GET",ccpaSettings.ajaxUrl+"?action=privacy_optout_markup&security="+ccpaSettings.ajaxNonce,!0),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){document.getElementById("ccpa-loading").remove();var t=document.createElement("div");document.body.insertBefore(t,document.body.firstElementChild),t.outerHTML=this.response,document.getElementById("ccpa-opt-out").focus(),document.querySelector("#ccpa-modal .opt-out").addEventListener("click",function(e){var t=new XMLHttpRequest;t.open("POST",ccpaSettings.ajaxUrl,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var t=JSON.parse(this.response);t&&t.success&&(t.data?(e.target.parentNode.classList.add("is-checked"),e.target.parentNode.parentNode.classList.add("is-checked")):(e.target.parentNode.classList.remove("is-checked"),e.target.parentNode.parentNode.classList.remove("is-checked")))}},t.send("action=privacy_optout&optout="+e.target.checked+"&security="+ccpaSettings.ajaxNonce)});var a=e("usprivacy"),n=a&&"Y"===a[2],c=document.querySelector("#ccpa-modal .opt-out");c.checked=n,n&&(c.parentNode.classList.add("is-checked"),c.parentNode.parentNode.classList.add("is-checked"));var s=document.querySelectorAll("#ccpa-modal .components-button");Array.prototype.forEach.call(s,function(e){e.addEventListener("click",function(){o()})})}},a.send()},s=function(){var e=document.querySelectorAll(".ccpa-do-not-sell");return 0!==e.length&&(Array.prototype.forEach.call(e,function(e){e.addEventListener("click",function(e){if(e.preventDefault(),!ccpaSettings.stylesLoaded){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=ccpaSettings.ccpaCssUrl,document.getElementsByTagName("HEAD")[0].appendChild(t),ccpaSettings.stylesLoaded=!0}c()}),e.style.display=""}),!0)};document.addEventListener("DOMContentLoaded",function(){if(null===e("usprivacy")){var t=e("ccpa_applies");if(null===t){var o=new XMLHttpRequest;o.open("GET","https://public-api.wordpress.com/geo/",!0),o.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){var e=JSON.parse(this.response),t=e.region&&"california"===e.region.toLowerCase();n(t),t&&s()&&a()}else n(!0),s()&&a()},o.send()}else"true"===t&&s()&&a();"true"!==ccpaSettings.forceApplies||s()}else s()})}();
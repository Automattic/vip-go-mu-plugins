/* Do not modify this file directly. It is compiled from other files. */
/* global wpcom, jetpackCarouselStrings, DocumentTouch */
!function(){"use strict";var e,t=function(){return{noop:function(){},texturize:function(e){return(e=(e=(e=(e+="").replace(/'/g,"&#8217;").replace(/&#039;/g,"&#8217;").replace(/[\u2019]/g,"&#8217;")).replace(/"/g,"&#8221;").replace(/&#034;/g,"&#8221;").replace(/&quot;/g,"&#8221;").replace(/[\u201D]/g,"&#8221;")).replace(/([\w]+)=&#[\d]+;(.+?)&#[\d]+;/g,'$1="$2"')).trim()},applyReplacements:function(e,t){if(e)return t?e.replace(/{(\d+)}/g,function(e,r){return void 0!==t[r]?t[r]:e}):e},getBackgroundImage:function(e){var t=document.createElement("canvas"),r=t.getContext&&t.getContext("2d");if(e){r.filter="blur(20px) ",r.drawImage(e,0,0);var o=t.toDataURL("image/png");return t=null,o}}}}(),r=function(){function e(e,t){return Element.prototype.matches?e.matches(t):Element.prototype.msMatchesSelector?e.msMatchesSelector(t):void 0}function r(e,t,r,o){if(!e)return o();e.style.removeProperty("display"),e.style.opacity=t,e.style.transition="opacity 0.2s",e.style.pointerEvents="none";var a=function(t){t.target===e&&"opacity"===t.propertyName&&(e.style.removeProperty("transition"),e.style.removeProperty("opacity"),e.style.removeProperty("pointer-events"),e.removeEventListener("transitionend",a),e.removeEventListener("transitioncancel",a),o())};requestAnimationFrame(function(){requestAnimationFrame(function(){e.addEventListener("transitionend",a),e.addEventListener("transitioncancel",a),e.style.opacity=r})})}return{closest:function(t,r){if(t.closest)return t.closest(r);var o=t;do{if(e(o,r))return o;o=o.parentElement||o.parentNode}while(null!==o&&1===o.nodeType);return null},matches:e,hide:function(e){e&&(e.style.display="none")},show:function(e){e&&(e.style.display="block")},fadeIn:function(e,o){r(e,"0","1",o=o||t.noop)},fadeOut:function(e,o){o=o||t.noop,r(e,"1","0",function(){e&&(e.style.display="none"),o()})},scrollToElement:function(e){e&&"function"==typeof e.scrollIntoView&&("scrollBehavior"in document.documentElement.style?e.scrollIntoView({behavior:"smooth"}):e.scrollIntoView())},getJSONAttribute:function(e,t){if(e&&e.hasAttribute(t))try{return JSON.parse(e.getAttribute(t))}catch(e){return}},convertToPlainText:function(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML},emitEvent:function(e,t,r){var o;try{o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r||null})}catch(e){(o=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,r||null)}e.dispatchEvent(o)}}}();function o(){var o,a,i,n,l,s="",c=!1,u="div.gallery, div.tiled-gallery, ul.wp-block-gallery, ul.blocks-gallery-grid, figure.blocks-gallery-grid, div.wp-block-jetpack-tiled-gallery, a.single-image-gallery",d=".gallery-item, .tiled-gallery-item, .blocks-gallery-item,  .tiled-gallery__item, .wp-block-image",m={},p="undefined"!=typeof wpcom&&wpcom.carousel&&wpcom.carousel.stat?wpcom.carousel.stat:t.noop,g="undefined"!=typeof wpcom&&wpcom.carousel&&wpcom.carousel.pageview?wpcom.carousel.pageview:t.noop;function f(t){if(!c)switch(t.which){case 38:t.preventDefault(),m.overlay.scrollTop-=100;break;case 40:t.preventDefault(),m.overlay.scrollTop+=100;break;case 39:t.preventDefault(),e.slideNext();break;case 37:case 8:t.preventDefault(),e.slidePrev();break;case 27:t.preventDefault(),b()}}function h(){c=!0}function v(){c=!1}function y(){m.overlay||(m.overlay=document.querySelector(".jp-carousel-overlay"),m.container=m.overlay.querySelector(".jp-carousel-wrap"),m.gallery=m.container.querySelector(".jp-carousel"),m.info=m.overlay.querySelector(".jp-carousel-info"),m.caption=m.info.querySelector(".jp-carousel-caption"),m.commentField=m.overlay.querySelector("#jp-carousel-comment-form-comment-field"),m.emailField=m.overlay.querySelector("#jp-carousel-comment-form-email-field"),m.authorField=m.overlay.querySelector("#jp-carousel-comment-form-author-field"),m.urlField=m.overlay.querySelector("#jp-carousel-comment-form-url-field"),function(){if(a=110,window.innerWidth<=760){a=Math.round(window.innerWidth/760*110);var e="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;a<40&&e&&(a=0)}}(),[m.commentField,m.emailField,m.authorField,m.urlField].forEach(function(e){e&&(e.addEventListener("focus",h),e.addEventListener("blur",v))}),m.overlay.addEventListener("click",function(e){var t,o,a=e.target,i=!!r.closest(a,".jp-carousel-close-hint"),n=!!window.matchMedia("(max-device-width: 760px)").matches;if(a===m.overlay){if(n)return;b()}else if(i)b();else if(a.classList.contains("jp-carousel-image-download"))p("download_original_click");else if(a.classList.contains("jp-carousel-commentlink"))!function(e){e.preventDefault(),e.stopPropagation(),h(),r.scrollToElement(m.info),r.show(m.overlay.querySelector("#jp-carousel-comment-form-submit-and-info-wrapper")),m.commentField.focus()}(e);else if(a.classList.contains("jp-carousel-comment-login"))t=m.currentSlide,o=t?t.attrs.attachmentId:"0",window.location.href=jetpackCarouselStrings.login_url+"%23jp-carousel-"+o;else if(r.closest(a,"#jp-carousel-comment-form-container"))!function(e){var t=e.target,o=r.getJSONAttribute(m.container,"data-carousel-extra")||{},a=m.currentSlide.attrs.attachmentId,i=document.querySelector("#jp-carousel-comment-form-submit-and-info-wrapper"),n=document.querySelector("#jp-carousel-comment-form-spinner"),l=document.querySelector("#jp-carousel-comment-form-button-submit"),s=document.querySelector("#jp-carousel-comment-form");if(m.commentField&&m.commentField.getAttribute("id")===t.getAttribute("id"))h(),r.show(i);else if(r.matches(t,'input[type="submit"]')){e.preventDefault(),e.stopPropagation(),r.show(n),s.classList.add("jp-carousel-is-disabled");var c={action:"post_attachment_comment",nonce:jetpackCarouselStrings.nonce,blog_id:o.blog_id,id:a,comment:m.commentField.value};if(!c.comment.length)return void w(jetpackCarouselStrings.no_comment_text,!1);if(1!==Number(jetpackCarouselStrings.is_logged_in)&&(c.email=m.emailField.value,c.author=m.authorField.value,c.url=m.urlField.value,1===Number(jetpackCarouselStrings.require_name_email))){if(!c.email.length||!c.email.match("@"))return void w(jetpackCarouselStrings.no_comment_email,!1);if(!c.author.length)return void w(jetpackCarouselStrings.no_comment_author,!1)}var u=new XMLHttpRequest;u.open("POST",jetpackCarouselStrings.ajaxurl,!0),u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),u.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE&&this.status>=200&&this.status<300){var e;try{e=JSON.parse(this.response)}catch(e){return void w(jetpackCarouselStrings.comment_post_error,!1)}"approved"===e.comment_status?w(jetpackCarouselStrings.comment_approved,!0):"unapproved"===e.comment_status?w(jetpackCarouselStrings.comment_unapproved,!0):w(jetpackCarouselStrings.comment_post_error,!1),E(),q(a),l.value=jetpackCarouselStrings.post_comment,r.hide(n),s.classList.remove("jp-carousel-is-disabled")}else w(jetpackCarouselStrings.comment_post_error,!1)};var d=[];for(var p in c)if(p){var g=encodeURIComponent(p)+"="+encodeURIComponent(c[p]);d.push(g.replace(/%20/g,"+"))}var f=d.join("&");u.send(f)}}(e);else if(r.closest(a,".jp-carousel-photo-icons-container")||a.classList.contains("jp-carousel-photo-title"))!function(e){e.preventDefault();var t=e.target,o=m.info.querySelector(".jp-carousel-info-extra"),a=m.info.querySelector(".jp-carousel-image-meta"),i=m.info.querySelector(".jp-carousel-comments-wrapper"),n=m.info.querySelector(".jp-carousel-icon-info"),l=m.info.querySelector(".jp-carousel-icon-comments");(r.closest(t,".jp-carousel-icon-info")||t.classList.contains("jp-carousel-photo-title"))&&(l&&l.classList.remove("jp-carousel-selected"),n.classList.toggle("jp-carousel-selected"),i&&i.classList.remove("jp-carousel-show"),a&&(a.classList.toggle("jp-carousel-show"),a.classList.contains("jp-carousel-show")?(o.classList.add("jp-carousel-show"),r.scrollToElement(o)):o.classList.remove("jp-carousel-show")));r.closest(t,".jp-carousel-icon-comments")&&(n&&n.classList.remove("jp-carousel-selected"),l.classList.toggle("jp-carousel-selected"),a&&a.classList.remove("jp-carousel-show"),i&&(i.classList.toggle("jp-carousel-show"),i.classList.contains("jp-carousel-show")?(o.classList.add("jp-carousel-show"),r.scrollToElement(o)):o.classList.remove("jp-carousel-show")))}(e);else if(!r.closest(a,".jp-carousel-info"))return}),window.addEventListener("keydown",f),m.overlay.addEventListener("jp_carousel.afterOpen",function(){v(),m.slides.length<=5?r.show(m.info.querySelector(".jp-swiper-pagination")):r.show(m.info.querySelector(".jp-carousel-pagination"))}),m.overlay.addEventListener("jp_carousel.beforeClose",function(){h(),document.documentElement.style.removeProperty("height"),r.hide(m.info.querySelector(".jp-swiper-pagination")),r.hide(m.info.querySelector(".jp-carousel-pagination"))}),m.overlay.addEventListener("jp_carousel.afterClose",function(){window.history.pushState?history.pushState("",document.title,window.location.pathname+window.location.search):window.location.href="",s="",m.isOpen=!1}),m.overlay.addEventListener("touchstart",function(e){e.touches.length>1&&e.preventDefault()}))}function w(e,t){var o=m.overlay.querySelector("#jp-carousel-comment-post-results"),a="jp-carousel-comment-post-"+(t?"success":"error");o.innerHTML='<span class="'+a+'">'+e+"</span>",r.hide(m.overlay.querySelector("#jp-carousel-comment-form-spinner")),m.overlay.querySelector("#jp-carousel-comment-form").classList.remove("jp-carousel-is-disabled"),r.show(o)}function j(){var e=document.querySelectorAll("a img[data-attachment-id]");Array.prototype.forEach.call(e,function(e){var t=e.parentElement;if(!t.parentElement.classList.contains("gallery-icon")&&t.hasAttribute("href")){var r=!1;t.getAttribute("href").split("?")[0]===e.getAttribute("data-orig-file").split("?")[0]&&1===Number(jetpackCarouselStrings.single_image_gallery_media_file)&&(r=!0),t.getAttribute("href")===e.getAttribute("data-permalink")&&(r=!0),r&&(t.classList.add("single-image-gallery"),t.setAttribute("data-carousel-extra",JSON.stringify({blog_id:Number(jetpackCarouselStrings.blog_id)})))}})}function S(o){(!o||o<0||o>m.slides.length)&&(o=0),m.currentSlide=m.slides[o];var a,i,n,l,c,u,d=m.currentSlide,p=d.attrs.attachmentId,f=m.info.querySelector(".jp-carousel-info-extra"),h=m.info.querySelector(".jp-carousel-image-meta"),v=m.info.querySelector(".jp-carousel-comments-wrapper"),y=m.info.querySelector(".jp-carousel-icon-info"),w=m.info.querySelector(".jp-carousel-icon-comments");if(f&&f.classList.remove("jp-carousel-show"),h&&h.classList.remove("jp-carousel-show"),y&&y.classList.remove("jp-carousel-selected"),v&&v.classList.remove("jp-carousel-show"),w&&w.classList.remove("jp-carousel-selected"),function(e){var t=e.el,r=e.attrs,o=t.querySelector("img");if(!o.hasAttribute("data-loaded")){var a=!!r.previewImage,i=r.thumbSize;!a||i&&t.offsetWidth>i.width?o.src=r.src:o.src=r.previewImage,o.setAttribute("itemprop","image"),o.setAttribute("data-loaded",1)}}(m.slides[o]),1!==Number(jetpackCarouselStrings.display_background_image)||m.slides[o].backgroundImage||function(t){var r=t.el;e&&e.slides&&(r=e.slides[e.activeIndex]);var o=t.attrs.originalElement;if(o.complete&&0!==o.naturalHeight)return void A(t,r,o);o.onload=function(){A(t,r,o)}}(m.slides[o]),r.hide(m.caption),function(e){var t,o,a,i="",n="";for(t=document.querySelectorAll(".jp-carousel-photo-title"),o=document.querySelector(".jp-carousel-photo-description"),a=0;a<t.length;a++)r.hide(t[a]);if(r.hide(o),i=k(e.title)||"",n=k(e.desc)||"",i||n)for(r.convertToPlainText(i)===r.convertToPlainText(n)&&(n=""),n&&(o.innerHTML=n,r.show(o)),a=0;a<t.length;a++)t[a].innerHTML=i,r.show(t[a])}({title:d.attrs.title,desc:d.attrs.desc}),function(e){if(!e||1!==Number(jetpackCarouselStrings.display_exif))return!1;var t=m.info.querySelector(".jp-carousel-image-meta ul.jp-carousel-image-exif"),r="";for(var o in e){var a=e[o],i=jetpackCarouselStrings.meta_data||[];if(0!==parseFloat(a)&&a.length&&-1!==i.indexOf(o)){switch(o){case"focal_length":a+="mm";break;case"shutter_speed":a=L(a);break;case"aperture":a="f/"+a}r+="<li><h5>"+jetpackCarouselStrings[o]+"</h5>"+a+"</li>"}}t.innerHTML=r,t.style.removeProperty("display")}(m.slides[o].attrs.imageMeta),function(e){if(!e)return!1;var r,o=[e.attrs.origWidth,e.attrs.origHeight],a=document.createElement("a");a.href=e.attrs.src.replace(/\?.+$/,""),r=null!==a.hostname.match(/^i[\d]{1}\.wp\.com$/i)?a.href:e.attrs.origFile.replace(/\?.+$/,"");var i=m.info.querySelector(".jp-carousel-image-download");i.innerHTML=t.applyReplacements(jetpackCarouselStrings.download_original,o),i.setAttribute("href",r),i.style.removeProperty("display")}(d),1===Number(jetpackCarouselStrings.display_comments)&&(i=m.slides[o].attrs.commentsOpened,n=m.container.querySelector(".jp-carousel-comment-form-container"),l=m.container.querySelector(".jp-carousel-commentlink"),c=m.container.querySelector(".jp-carousel-buttons"),u=1===Number(jetpackCarouselStrings.is_logged_in)?l:c,1===parseInt(i,10)?(r.fadeIn(u),r.fadeIn(n)):(r.fadeOut(u),r.fadeOut(n)),q(p),r.hide(m.info.querySelector("#jp-carousel-comment-post-results"))),d.attrs.caption){if(a=r.convertToPlainText(d.attrs.caption),r.convertToPlainText(d.attrs.title)===a){var j=m.info.querySelector(".jp-carousel-photo-title");r.fadeOut(j,function(){j.innerHTML=""})}if(r.convertToPlainText(d.attrs.desc)===a){var S=m.info.querySelector(".jp-carousel-photo-description");r.fadeOut(S,function(){S.innerHTML=""})}m.caption.innerHTML=d.attrs.caption,r.fadeIn(m.caption)}else r.fadeOut(m.caption,function(){m.caption.innerHTML=""});var b=m.info.querySelector(".jp-carousel-pagination");if(b&&m.slides.length>5){var x=o+1;b.innerHTML="<span>"+x+" / "+m.slides.length+"</span>"}jetpackCarouselStrings.stats&&((new Image).src=document.location.protocol+"//pixel.wp.com/g.gif?"+jetpackCarouselStrings.stats+"&post="+encodeURIComponent(p)+"&rand="+Math.random()),g(p),window.location.hash=s="#jp-carousel-"+p}function b(){document.body.style.overflow=i,document.documentElement.style.overflow=n,E(),h(),r.emitEvent(m.overlay,"jp_carousel.beforeClose"),window.scrollTo(window.scrollX||window.pageXOffset||0,l||0),e.destroy(),m.isOpen=!1,m.slides=[],m.currentSlide=void 0,m.gallery.innerHTML="",r.fadeOut(m.overlay,function(){r.emitEvent(m.overlay,"jp_carousel.afterClose")})}function x(e,t,r){var o=r?e.replace(/.*=([\d]+%2C[\d]+).*$/,"$1"):e.replace(/.*-([\d]+x[\d]+)\..+$/,"$1"),a=o!==e?r?o.split("%2C"):o.split("x"):[t,0];return"9999"===a[0]&&(a[0]="0"),"9999"===a[1]&&(a[1]="0"),a}function L(e){return e>=1?Math.round(10*e)/10+"s":"1/"+Math.round(1/e)+"s"}function k(e){return!e.match(" ")&&e.match("_")?"":e}function q(e,t){var a=void 0===t,i=m.info.querySelector(".jp-carousel-icon-comments .jp-carousel-has-comments-indicator");if(i.classList.remove("jp-carousel-show"),clearInterval(o),e){(!t||t<1)&&(t=0);var n=m.info.querySelector(".jp-carousel-comments"),l=m.info.querySelector("#jp-carousel-comments-loading");r.show(l),a&&(r.hide(n),n.innerHTML="");var s=new XMLHttpRequest,c=jetpackCarouselStrings.ajaxurl+"?action=get_attachment_comments&nonce="+jetpackCarouselStrings.nonce+"&id="+e+"&offset="+t;s.open("GET",c),s.setRequestHeader("X-Requested-With","XMLHttpRequest");var u=function(){r.fadeIn(n),r.fadeOut(l)};s.onload=function(){if(m.currentSlide&&m.currentSlide.attrs.attachmentId===e){var c,d=s.status>=200&&s.status<300;try{c=JSON.parse(s.responseText)}catch(e){}if(!d||!c||!Array.isArray(c))return u();a&&(n.innerHTML="");for(var p=0;p<c.length;p++){var g=c[p],f=document.createElement("div");f.classList.add("jp-carousel-comment"),f.setAttribute("id","jp-carousel-comment-"+g.id),f.innerHTML='<div class="comment-gravatar">'+g.gravatar_markup+'</div><div class="comment-content"><div class="comment-author">'+g.author_markup+'</div><div class="comment-date">'+g.date_gmt+"</div>"+g.content+"</div>",n.appendChild(f),clearInterval(o),o=setInterval(function(){m.container.scrollTop+150>window.innerHeight&&(q(e,t+10),clearInterval(o))},300)}c.length>0&&(r.show(n),i.innerText=c.length,i.classList.add("jp-carousel-show")),r.hide(l)}},s.onerror=u,s.send()}}function A(e,r,o){var a=t.getBackgroundImage(o);e.backgroundImage=a,r.style.backgroundImage="url("+a+")",r.style.backgroundSize="cover"}function E(){m.commentField&&(m.commentField.value="")}function _(e,o){m.slides=[];var a={width:window.innerWidth,height:window.innerHeight-64};0!==o&&((new Image).src=e[o].getAttribute("data-gallery-src"));var i=!!r.closest(e[0],".tiled-gallery.type-rectangular");Array.prototype.forEach.call(e,function(e,o){var n=r.closest(e,".gallery-item"),l=n&&n.querySelector(".gallery-caption"),s=r.closest(e,"a"),c=e.getAttribute("data-orig-file")||e.getAttribute("src-orig"),u={originalElement:e,attachmentId:e.getAttribute("data-attachment-id")||e.getAttribute("data-id")||"0",commentsOpened:e.getAttribute("data-comments-opened")||"0",imageMeta:r.getJSONAttribute(e,"data-image-meta")||{},title:e.getAttribute("data-image-title")||"",desc:e.getAttribute("data-image-description")||"",mediumFile:e.getAttribute("data-medium-file")||"",largeFile:e.getAttribute("data-large-file")||"",origFile:c||"",thumbSize:{width:e.naturalWidth,height:e.naturalHeight},caption:l&&l.innerHTML||"",permalink:s&&s.getAttribute("href"),src:c||e.getAttribute("src")||""},d=r.closest(e,".tiled-gallery-item"),p=d&&d.querySelector(".tiled-gallery-caption"),g=p&&p.innerHTML;g&&(u.caption=g);var f=function(e){var t=e.getAttribute("data-orig-size")||"";if(t){var r=t.split(",");return{width:parseInt(r[0],10),height:parseInt(r[1],10)}}return{width:e.getAttribute("data-original-width")||e.getAttribute("width")||void 0,height:e.getAttribute("data-original-height")||e.getAttribute("height")||void 0}}(e);if(u.origWidth=f.width||u.thumbSize.width,u.origHeight=f.height||u.thumbSize.height,"undefined"!=typeof wpcom&&wpcom.carousel&&wpcom.carousel.generateImgSrc?u.src=wpcom.carousel.generateImgSrc(e,a):u.src=function(e){if("object"!=typeof e&&(e={}),void 0===e.origFile)return"";if(void 0===e.origWidth||void 0===e.maxWidth)return e.origFile;if(void 0===e.mediumFile||void 0===e.largeFile)return e.origFile;var t=document.createElement("a");t.href=e.largeFile;var r=/^i[0-2]\.wp\.com$/i.test(t.hostname),o=x(e.mediumFile,e.origWidth,r),a=x(e.largeFile,e.origWidth,r),i=parseInt(a[0],10),n=parseInt(a[1],10),l=parseInt(o[0],10),s=parseInt(o[1],10);if(e.origMaxWidth=e.maxWidth,e.origMaxHeight=e.maxHeight,void 0!==window.devicePixelRatio&&window.devicePixelRatio>1&&(e.maxWidth=e.maxWidth*window.devicePixelRatio,e.maxHeight=e.maxHeight*window.devicePixelRatio),i>=e.maxWidth||n>=e.maxHeight)return e.largeFile;if(l>=e.maxWidth||s>=e.maxHeight)return e.mediumFile;if(r){var c=e.largeFile.lastIndexOf("?"),u=e.largeFile;return-1!==c&&(u=e.largeFile.substring(0,c),(e.origWidth>e.maxWidth||e.origHeight>e.maxHeight)&&((e.origMaxWidth<1e3||e.origMaxWidth<1e3)&&(e.origMaxWidth=2*e.maxWidth,e.origMaxHeight=2*e.maxHeight),u+="?fit="+e.origMaxWidth+"%2C"+e.origMaxHeight)),u}return e.origFile}({origFile:u.src,origWidth:u.origWidth,origHeight:u.origHeight,maxWidth:a.width,maxHeight:a.height,mediumFile:u.mediumFile,largeFile:u.largeFile}),e.setAttribute("data-gallery-src",u.src),"0"!==u.attachmentId){u.title=t.texturize(u.title),u.desc=t.texturize(u.desc),u.caption=t.texturize(u.caption);var h=new Image;h.src=u.src;var v=document.createElement("div");v.classList.add("swiper-slide"),v.setAttribute("itemprop","associatedMedia"),v.setAttribute("itemscope",""),v.setAttribute("itemtype","https://schema.org/ImageObject");var y=document.createElement("div");y.classList.add("swiper-zoom-container"),m.gallery.appendChild(v),v.appendChild(y),y.appendChild(h),v.setAttribute("data-attachment-id",u.attachmentId),v.setAttribute("data-permalink",u.permalink),v.setAttribute("data-orig-file",u.origFile),i&&(u.previewImage=u.src);var w={el:v,attrs:u,index:o};m.slides.push(w)}})}function I(e,t){if(!window.Swiper){var o=document.querySelector("#jp-carousel-loading-overlay");r.show(o);var a=document.createElement("script");return a.id="jetpack-carousel-swiper-js",a.src=window.jetpackSwiperLibraryPath.url,a.async=!0,a.onload=function(){r.hide(o),C(e,t)},a.onerror=function(){r.hide(o)},void document.head.appendChild(a)}C(e,t)}function C(t,o){var a={imgSelector:".gallery-item [data-attachment-id], .tiled-gallery-item [data-attachment-id], img[data-attachment-id], img[data-id]",startIndex:0},s=r.getJSONAttribute(t,"data-carousel-extra");if(s&&(y(),!m.isOpen)){for(var c in m.isOpen=!0,i=getComputedStyle(document.body).overflow,document.body.style.overflow="hidden",n=getComputedStyle(document.documentElement).overflow,document.documentElement.style.overflow="hidden",l=window.scrollY||window.pageYOffset||0,m.container.setAttribute("data-carousel-extra",JSON.stringify(s)),p(["open","view_image"]),o||{})a[c]=o[c];-1===a.startIndex&&(a.startIndex=0),r.emitEvent(m.overlay,"jp_carousel.beforeOpen"),m.gallery.innerHTML="",m.overlay.style.opacity=1,m.overlay.style.display="block",_(t.querySelectorAll(a.imgSelector),a.startIndex),(e=new window.Swiper(".jp-carousel-swiper-container",{centeredSlides:!0,zoom:!0,loop:m.slides.length>1,pagination:{el:".jp-swiper-pagination",clickable:!0},navigation:{nextEl:".jp-swiper-button-next",prevEl:".jp-swiper-button-prev"},initialSlide:a.startIndex,on:{init:function(){S(a.startIndex)}},preventClicks:!1,preventClicksPropagation:!1,threshold:5})).on("slideChange",function(){S(0===e.activeIndex?m.slides.length-1:e.activeIndex===m.slides.length+1?0:e.activeIndex-1)}),r.fadeIn(m.overlay,function(){r.emitEvent(m.overlay,"jp_carousel.afterOpen")})}}document.body.addEventListener("click",function(e){if(window.CSS&&window.CSS.supports&&window.CSS.supports("display","grid")){var t,o=e.target,a=r.closest(o,u);if(a){if(!(t=a)||!t.getAttribute("data-carousel-extra"))return;var i=o.parentElement,n=i.parentElement;if(n&&n.classList.contains("wp-block-image")){var l=i.getAttribute("href");if(l.split("?")[0]!==o.getAttribute("data-orig-file").split("?")[0]&&l!==o.getAttribute("data-permalink"))return}if(i.classList.contains("gallery-caption"))return;if(r.matches(i,"figcaption"))return;document.documentElement.style.height="auto",e.preventDefault(),e.stopPropagation();var s=r.closest(o,d),c=Array.prototype.indexOf.call(a.querySelectorAll(d),s);I(a,{startIndex:c})}}}),1===Number(jetpackCarouselStrings.single_image_gallery)&&(j(),document.body.addEventListener("is.post-load",function(){j()})),window.addEventListener("hashchange",function(){var t=/jp-carousel-(\d+)/;if(window.location.hash&&t.test(window.location.hash)){if(window.location.hash!==s||!m.isOpen)if(window.location.hash&&m.gallery&&!m.isOpen&&history.back)history.back();else{s=window.location.hash;for(var r,o,a=window.location.hash.match(t),i=parseInt(a[1],10),n=document.querySelectorAll(u),l=0;l<n.length;l++){for(var c,d=n[l],p=d.querySelectorAll("img"),g=0;g<p.length;g++)if(parseInt(p[g].getAttribute("data-attachment-id"),10)===i||parseInt(p[g].getAttribute("data-id"),10)===i){c=g;break}if(void 0!==c){r=d,o=c,m.isOpen?(S(o),e.slideTo(o+1)):I(r,{startIndex:o});break}}}}else m.isOpen&&b()}),window.location.hash&&r.emitEvent(window,"hashchange")}"loading"!==document.readyState?o():document.addEventListener("DOMContentLoaded",o)}();
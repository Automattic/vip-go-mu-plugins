!function(){var e={78900:function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,t.apply(this,arguments)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},89105:function(e,t){var n;
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var l=typeof n;if("string"===l||"number"===l)e.push(n);else if(Array.isArray(n)){if(n.length){var i=s.apply(null,n);i&&e.push(i)}}else if("object"===l)if(n.toString===Object.prototype.toString)for(var u in n)r.call(n,u)&&n[u]&&e.push(u);else e.push(n.toString())}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(n=function(){return s}.apply(t,[]))||(e.exports=n)}()},2601:function(e){"use strict";function t(e,n){var r;if(Array.isArray(n))for(r=0;r<n.length;r++)t(e,n[r]);else for(r in n)e[r]=(e[r]||[]).concat(n[r])}e.exports=function(e){var n,r={};return t(r,e),(n=function(e){return function(t){return function(n){var s,l,i=r[n.type],u=t(n);if(i)for(s=0;s<i.length;s++)(l=i[s](n,e))&&e.dispatch(l);return u}}}).effects=r,n}},894:function(e,t,n){"use strict";var r=n(63027),s=n(87997);const l=(0,n(14541).Z)((0,r.createElement)(s.G,null,(0,r.createElement)(s.Path,{d:"M17 5a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2h9z"}),(0,r.createElement)(s.Path,{d:"M13 4H5a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2z"}),(0,r.createElement)(s.Path,{d:"M7 16h8a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"})));t.Z=l},15450:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(63027),s=n(87997);function l({currentMedia:e}){const t=e&&"image"===e.type?e.url:null;return(0,r.createElement)("div",{className:"wp-story-background"},(0,r.createElement)("div",{className:"wp-story-background-image",style:{backgroundImage:t?`url("${t}")`:"none"}}),(0,r.createElement)("div",{className:"wp-story-background-blur"}),(0,r.createElement)(s.SVG,{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"0",height:"0"},(0,r.createElement)("filter",{id:"gaussian-blur-18"},(0,r.createElement)("feGaussianBlur",{stdDeviation:"18"}))))}},32061:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(63027),s=n(89105),l=n.n(s),i=n(33163),u=n(87997);const __=i.__;function a({isEllipsis:e,disabled:t,index:n,isSelected:s,progress:a,onClick:c}){const o=t||e;let d=null;return e||(d=s?(0,i.sprintf)(__("Slide %d, currently selected","jetpack"),n+1):(0,i.sprintf)(__("Go to slide %d","jetpack"),n+1)),(0,r.createElement)(u.Button,{role:o?"presentation":"tab",key:n,className:l()("wp-story-pagination-bullet",{"wp-story-pagination-ellipsis":e}),"aria-label":d,"aria-disabled":o||s,onClick:o||s?void 0:c,disabled:o},(0,r.createElement)("div",{className:"wp-story-pagination-bullet-bar"},(0,r.createElement)("div",{className:"wp-story-pagination-bullet-bar-progress",style:{width:`${a}%`}})))}},4206:function(e,t,n){"use strict";n.d(t,{b:function(){return a},r:function(){return c}});var r=n(78900),s=n.n(r),l=n(63027),i=n(89105),u=n.n(i);const a=({className:e,size:t,label:n,isPressed:r,...i})=>(0,l.createElement)("button",s()({type:"button","aria-label":n,"aria-pressed":r,className:u()("jetpack-mdc-icon-button","circle-icon","outlined","bordered",e),style:{width:`${t}px`,height:`${t}px`}},i)),c=({className:e,size:t=24,label:n,isPressed:r,...i})=>(0,l.createElement)("button",s()({type:"button","aria-label":n,"aria-pressed":r,className:u()("jetpack-mdc-icon-button",e),style:{width:`${t}px`,height:`${t}px`}},i))},73390:function(e,t,n){"use strict";var r=n(63027);t.Z=()=>(0,r.createElement)("div",{className:"wp-story-loading-spinner"},(0,r.createElement)("div",{className:"wp-story-loading-spinner__outer"},(0,r.createElement)("div",{className:"wp-story-loading-spinner__inner"})))},2276:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(63027),s=n(33163),l=n(4206),i=n(76925);const __=s.__;function u({playing:e,muted:t,onPlayPressed:n,onMutePressed:s,showMute:u}){return(0,r.createElement)("div",{className:"wp-story-controls"},(0,r.createElement)(l.r,{isPressed:e,label:__(e?"pause":"play","jetpack"),onClick:n},e?(0,r.createElement)(i.fp,null):(0,r.createElement)(i.o1,null)),u&&(0,r.createElement)(l.r,{isPressed:t,label:__(t?"unmute":"mute","jetpack"),onClick:s},t?(0,r.createElement)(i.xb,null):(0,r.createElement)(i.MC,null)))}},12051:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(63027),s=n(33163),l=n(4206),i=n(76925);const __=s.__;function u({fullscreen:e,onExitFullscreen:t,siteIconUrl:n,storyTitle:s}){return e?(0,r.createElement)("div",{className:"wp-story-meta"},(0,r.createElement)("div",{className:"wp-story-icon"},(0,r.createElement)("img",{alt:__("Site icon","jetpack"),src:n,width:"40",height:"40"})),(0,r.createElement)("div",null,(0,r.createElement)("div",{className:"wp-story-title"},s)),(0,r.createElement)(l.r,{className:"wp-story-exit-fullscreen",label:__("Exit Fullscreen","jetpack"),onClick:t},(0,r.createElement)(i.Tw,null))):null}},76925:function(e,t,n){"use strict";n.d(t,{o1:function(){return u},fp:function(){return a},Tw:function(){return c},MC:function(){return o},xb:function(){return d},JM:function(){return p},Vq:function(){return f}});var r=n(63027),s=n(87997),l=n(14541);const i=({children:e,size:t})=>(0,l.Z)(e,t,t),u=({size:e})=>(0,r.createElement)(i,{size:e},(0,r.createElement)(s.Path,{d:"M8 5v14l11-7z"})),a=({size:e})=>(0,r.createElement)(i,{size:e},(0,r.createElement)(s.Path,{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})),c=({size:e})=>(0,r.createElement)(i,{size:e},(0,r.createElement)(s.Path,{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),o=({size:e})=>(0,r.createElement)(i,{size:e},(0,r.createElement)(s.Path,{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"})),d=({size:e})=>(0,r.createElement)(i,{size:e},(0,r.createElement)(s.Path,{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"})),p=({size:e})=>(0,r.createElement)(i,{size:e},(0,r.createElement)(s.Path,{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),f=({size:e})=>(0,r.createElement)(i,{size:e},(0,r.createElement)(s.Path,{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}))},83017:function(e,t,n){"use strict";n.d(t,{gT:function(){return r.Z},ZX:function(){return s.Z},h4:function(){return l.Z},aV:function(){return i.Z},Aq:function(){return u.Z},WB:function(){return a.Z},pU:function(){return c.pU}});var r=n(32061),s=n(2276),l=n(12051),i=n(86770),u=n(15450),a=n(73390),c=n(31887);n(4206)},31887:function(e,t,n){"use strict";n.d(t,{pU:function(){return o}});var r=n(78900),s=n.n(r),l=n(63027),i=n(89105),u=n.n(i);const a=({title:e,alt:t,className:n,id:r,mediaRef:s,mime:i,sizes:a,srcset:c,url:o})=>(0,l.createElement)("img",{ref:s,"data-id":r,"data-mime":i,title:e,alt:t,src:o,className:u()("wp-story-image",`wp-image-${r}`,n),srcSet:c,sizes:a}),c=({title:e,className:t,id:n,mediaRef:r,mime:s,url:i,poster:a})=>(0,l.createElement)("video",{className:u()("wp-story-video","intrinsic-ignore",`wp-video-${n}`,t),ref:r,"data-id":n,title:e,type:s,src:i,poster:a,tabIndex:-1,preload:"auto",playsInline:!0}),o=({targetAspectRatio:e,cropUpTo:t,type:n,width:r,height:i,...u})=>{let o=null;if(r&&i){const n=r/i;if(n>=e){n>e/(1-t)||(o="wp-story-crop-wide")}else{n<e*(1-t)||(o="wp-story-crop-narrow")}}const d="video"===n||(u.mime||"").startsWith("video/");return(0,l.createElement)("figure",null,d?(0,l.createElement)(c,s()({},u,{className:o})):(0,l.createElement)(a,s()({},u,{className:o})))}},86770:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(63027),s=n(31635),l=n.n(s),i=n(33163),u=n(4206),a=n(76925);const __=i.__;function c({ended:e,hasPrevious:t,onNextSlide:n,onPreviousSlide:s,icon:c,slideCount:o,showSlideCount:d}){const p=(0,r.useCallback)((t=>{e||(t.stopPropagation(),s())}),[s,e]),f=(0,r.useCallback)((t=>{e||(t.stopPropagation(),n())}),[n,e]);return(0,r.createElement)("div",{className:"wp-story-overlay"},d&&(0,r.createElement)("div",{className:"wp-story-embed-icon"},c,(0,r.createElement)("span",null,o)),!d&&(0,r.createElement)("div",{className:"wp-story-embed-icon-expand"},(0,r.createElement)(l(),{role:"img"})),t&&(0,r.createElement)("div",{className:"wp-story-prev-slide",onClick:p},(0,r.createElement)(u.b,{size:44,label:__("Previous Slide","jetpack"),className:"outlined-w"},(0,i.isRTL)()?(0,r.createElement)(a.Vq,{size:24}):(0,r.createElement)(a.JM,{size:24}))),(0,r.createElement)("div",{className:"wp-story-next-slide",onClick:f},(0,r.createElement)(u.b,{size:44,label:__("Next Slide","jetpack"),className:"outlined-w"},(0,i.isRTL)()?(0,r.createElement)(a.JM,{size:24}):(0,r.createElement)(a.Vq,{size:24}))))}},9681:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(63027),s=n(89105),l=n.n(s),i=n(85672),u=n(66788),a=n(46487);const c=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent);function o({className:e,fullscreenClassName:t,bodyFullscreenClassName:n,fullscreen:s,shadowDOM:o,onKeyDown:d,onExitFullscreen:p,playerQuerySelector:f,children:m}){const g=(0,r.useRef)(),y=(0,r.useRef)(),[E,h]=(0,r.useState)(null),S=c&&u.am(),w=s&&!S,v=s&&S;return(0,r.useLayoutEffect)((()=>{if(S)s?g.current&&u.uP(g.current,p):u.bG()&&u.JF();else if(s){if(h([document.documentElement.scrollLeft,document.documentElement.scrollTop]),document.body.classList.add(n),document.getElementsByTagName("html")[0].classList.add(n),y.current){const e=y.current.querySelector(f);e&&e.focus()}}else if(document.body.classList.remove(n),document.getElementsByTagName("html")[0].classList.remove(n),E){window.scrollTo(...E);const e=g.current.querySelector(f);e&&e.focus()}}),[s]),(0,r.createElement)(r.Fragment,null,(0,r.createElement)(i.Z,o,(0,r.createElement)("div",{ref:g,className:l()(e,{[t]:v}),onKeyDown:d},!w&&m)),(0,r.createElement)(a.Z,{className:l()(e,{[t]:w}),isOpened:w,onRequestClose:p,shadowDOM:o,onKeyDown:w&&d,focusOnMount:!1,modalRef:y},w&&m))}},7393:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(63027),s=n(65707),l=n(23983),i=(n(17031),n(99869)),u=n(9681);function a({id:e,slides:t,metadata:n,disabled:a,...c}){const o=(0,r.useMemo)((()=>e||Math.random().toString(36)),[e]),{init:d,setEnded:p,setPlaying:f,setFullscreen:m,showSlide:g}=(0,s.useDispatch)("jetpack/story/player"),{playing:y,currentSlideIndex:E,fullscreen:h,isReady:S,playerSettings:w}=(0,s.useSelect)((e=>{const{getCurrentSlideIndex:t,getSettings:n,isFullscreen:r,isPlayerReady:s,isPlaying:l}=e("jetpack/story/player");return s(o)?{playing:l(o),currentSlideIndex:t(o),isReady:!0,fullscreen:r(o),playerSettings:n(o)}:{isReady:!1}}),[o]);(0,r.useEffect)((()=>{S||d(o,{slideCount:t.length,...c})}),[S,o]);const v=(0,r.useCallback)((e=>{switch(e.keyCode){case l.ENTER:if(h)break;case l.SPACE:f(o,!y);break;case l.LEFT:E>0&&g(o,E-1);break;case l.RIGHT:E<t.length-1?g(o,E+1):p(o)}}),[o,E,h,y]),b=(0,r.useCallback)((()=>{m(o,!1)}),[o]);return S?(0,r.createElement)(u.Z,{shadowDOM:w.shadowDOM,className:"wp-story-app",fullscreenClassName:"wp-story-fullscreen",bodyFullscreenClassName:"wp-story-in-fullscreen",playerQuerySelector:".wp-story-container",fullscreen:h,onExitFullscreen:b,onKeyDown:v},(0,r.createElement)(i.Z,{id:o,slides:t,metadata:n,disabled:a})):null}},66788:function(e,t,n){"use strict";n.d(t,{am:function(){return r},bG:function(){return s},uP:function(){return l},JF:function(){return i}});const r=()=>document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled,s=()=>document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullScreenElement,l=(e,t)=>{if((e.requestFullscreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen).call(e),t){const e=()=>{document.fullscreenElement||(document.removeEventListener("fullscreenchange",e),t())};document.addEventListener("fullscreenchange",e)}},i=()=>(document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen).call(document)},85672:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(63027);const s=window&&window.Element&&window.Element.prototype.hasOwnProperty("attachShadow");function l({enabled:e,delegatesFocus:t=!1,mode:n="open",globalStyleElements:l=[],adoptedStyleSheets:u=null,mountOnElement:a=null,children:c}){const[o,d]=(0,r.useState)(null),p=a||o,[f,m]=(0,r.useState)(null),g="string"==typeof l?[...document.querySelectorAll(l)]:l,y=s&&e&&g.length>0,E=(0,r.useCallback)((e=>{null!==e&&d(e.parentNode)}),[]);if((0,r.useEffect)((()=>{if(!p)return;if(p.shadowRoot)return void m(p.shadowRoot);const e=p.attachShadow({delegatesFocus:t,mode:n});u&&(e.adoptedStyleSheets=u),m(e)}),[p]),y&&!f)return a?null:(0,r.createElement)("span",{ref:E});const h=(0,r.createElement)(r.Fragment,null,y&&(0,r.createElement)(i,{globalStyleElements:g}),c);return y?(0,r.createPortal)(h,f):h}function i({globalStyleElements:e}){return(0,r.createElement)(r.Fragment,null,e.map((({id:e,tagName:t,attributes:n,innerHTML:s},l)=>"LINK"===t?(0,r.createElement)("link",{key:e||l,id:e,rel:n.rel.value,href:n.href.value}):"STYLE"===t?(0,r.createElement)("style",{key:e||l,id:e},s):void 0)))}},9345:function(e,t,n){"use strict";var r=n(63027);t.Z=e=>{const t=(0,r.useRef)(),n=(0,r.useRef)(),s=(0,r.useRef)(e),l=(0,r.useCallback)((e=>{e.touches&&1===e.touches.length&&e.preventDefault()}),[]);return(0,r.useEffect)((()=>{s.current=e}),[e]),{onTouchStart:(0,r.useCallback)((e=>{e.target&&(e.target.addEventListener("touchend",l,{passive:!1}),n.current=e.target),t.current=setTimeout((()=>{s.current&&s.current(!0),t.current=null}),200)}),[]),onTouchEnd:(0,r.useCallback)((e=>{t.current?clearTimeout(t.current):(s.current&&s.current(!1),e.stopPropagation()),n.current&&n.current.removeEventListener("touchend",l)}),[])}}},77758:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(63027);function s(e){const t=(0,r.useRef)(null),n=(0,r.useRef)(!1),s=(0,r.useRef)(e),l=(0,r.useRef)(e);return l.current=e,(0,r.useLayoutEffect)((()=>{e.forEach(((e,r)=>{const l=s.current[r];"function"==typeof e&&e!==l&&!1===n.current&&(l(null),e(t.current))})),s.current=e}),e),(0,r.useLayoutEffect)((()=>{n.current=!1})),(0,r.useCallback)((e=>{t.current=e,n.current=!0;(e?l.current:s.current).forEach((t=>{"function"==typeof t?t(e):t&&t.hasOwnProperty("current")&&(t.current=e)}))}),[])}},58874:function(e,t,n){"use strict";async function r(e){const t=e.tagName.toLowerCase();if("img"===t){if(e.complete)return;await new Promise((t=>{e.addEventListener("load",t,{once:!0})}))}else if("video"===t||"audio"===t){if(e.HAVE_ENOUGH_DATA===e.readyState)return;await new Promise((t=>{e.addEventListener("canplaythrough",t,{once:!0}),e.addEventListener("load",t,{once:!0}),e.HAVE_NOTHING===e.readyState&&e.networkState!==e.NETWORK_LOADING&&e.load()}))}}n.d(t,{Z:function(){return r}})},83393:function(e,t,n){"use strict";n.d(t,{BM:function(){return u},i1:function(){return a}});var r=n(33804);const s=new Set(["alert","status","log","marquee","timer"]);let l=[],i=!1;function u(e){if(i)return;const t=document.body.children;(0,r.forEach)(t,(t=>{t!==e&&function(e){const t=e.getAttribute("role");return!("SCRIPT"===e.tagName||e.hasAttribute("aria-hidden")||e.hasAttribute("aria-live")||s.has(t))}(t)&&(t.setAttribute("aria-hidden","true"),l.push(t))})),i=!0}function a(){i&&((0,r.forEach)(l,(e=>{e.removeAttribute("aria-hidden")})),l=[],i=!1)}},40695:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(63027),s=n(23983),l=n(51417),i=n(77758);function u({overlayClassName:e,children:t,className:n,focusOnMount:u,shouldCloseOnEsc:a=!0,onRequestClose:c,onKeyDown:o,modalRef:d}){const p=(0,l.useFocusOnMount)(u),f=(0,l.useConstrainedTabbing)(),m=(0,l.useFocusReturn)();return(0,r.createElement)("div",{className:e,onKeyDown:function(e){a&&e.keyCode===s.ESCAPE&&(e.stopPropagation(),c&&c(e)),e.target&&"button"===e.target.tagName.toLowerCase()&&e.keyCode===s.SPACE||o&&o(e)}},(0,r.createElement)("div",{className:n,ref:(0,i.Z)([f,m,p,d])},t))}},46487:function(e,t,n){"use strict";var r=n(78900),s=n.n(r),l=n(63027),i=n(51417),u=n(85672),a=n(40695),c=n(83393);let o,d=0;const p=()=>{};class f extends l.Component{constructor(e){super(e),this.prepareDOM()}componentDidMount(){d++,1===d&&this.openFirstModal()}componentWillUnmount(){d--,0===d&&this.closeLastModal(),this.cleanDOM()}prepareDOM(){o||(o=document.createElement("div"),document.body.appendChild(o)),this.node=document.createElement("div"),o.appendChild(this.node),this.node.ontouchstart=p,this.node.ontouchend=p}cleanDOM(){o.removeChild(this.node)}openFirstModal(){c.BM(o)}closeLastModal(){c.i1()}render(){const{children:e,isOpened:t,shadowDOM:n,...r}=this.props;return(0,l.createElement)(u.Z,s()({},n,{mountOnElement:this.node}),t&&(0,l.createElement)(a.Z,r,e))}}f.defaultProps={shouldCloseOnEsc:!0,isOpened:!1,focusOnMount:!0},t.Z=(0,i.withInstanceId)(f)},99869:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(78900),s=n.n(r),l=n(63027),i=n(89105),u=n.n(i),a=n(33804),c=n(77996),o=n(51417),d=n(33163),p=n(65707),f=n(51922),m=n(894),g=n(64130),y=n(83017),E=n(9345);const __=d.__;function h({id:e,slides:t,metadata:n,disabled:r}){const{setFullscreen:i,setEnded:d,setPlaying:h,setMuted:S,showSlide:w}=(0,p.useDispatch)("jetpack/story/player"),{playing:v,muted:b,currentSlideIndex:C,currentSlideEnded:x,ended:k,fullscreen:N,settings:P}=(0,p.useSelect)((t=>{const{getCurrentSlideIndex:n,getSettings:r,hasCurrentSlideEnded:s,hasEnded:l,isFullscreen:i,isMuted:u,isPlaying:a}=t("jetpack/story/player");return{playing:a(e),muted:u(e),currentSlideIndex:n(e),currentSlideEnded:s(e),ended:l(e),fullscreen:i(e),settings:r(e)}}),[e]),T=(0,l.useRef)(),[M,R]=(0,l.useState)(null),[I,{width:_,height:L}]=(0,o.useResizeObserver)(),[O,z]=(0,l.useState)(P.defaultAspectRatio),F=(0,a.some)(t,(e=>(0,c.isBlobURL)(e.url))),D=t=>{w(e,t)},A=(0,l.useCallback)((()=>{r||N||P.playInFullscreen&&!v&&h(e,!0)}),[v,r,N]),{onTouchStart:Z,onTouchEnd:j}=(0,E.Z)((t=>{h(e,!t)}),[]),B=(0,l.useCallback)((()=>{C>0&&D(C-1)}),[C]),U=(0,l.useCallback)((()=>{C<t.length-1?D(C+1):d(e)}),[C,t]),H=(0,l.useCallback)((()=>{i(e,!1)}),[]);let q,G;return(0,l.useEffect)((()=>{r&&v&&h(e,!1)}),[r,v]),(0,l.useEffect)((()=>{v&&x&&U()}),[v,x]),(0,l.useLayoutEffect)((()=>{if(!T.current)return;let e=Math.round(P.defaultAspectRatio*T.current.offsetHeight);N&&(e=Math.abs(1-e/_)<P.cropUpTo?_:e),R(e)}),[_,L,N]),(0,l.useLayoutEffect)((()=>{M&&T.current&&T.current.offsetHeight>0&&z(M/T.current.offsetHeight)}),[M]),q=N?[__("You are currently playing a story.","jetpack"),__(v?"Press space to pause.":"Press space to play.","jetpack"),__("Press escape to exit.","jetpack")].join(" "):__("Play story","jetpack"),G=r?"presentation":N?"dialog":"button",(0,l.createElement)("div",{className:"wp-story-display-contents"},I,(0,l.createElement)("div",{role:G,"aria-label":q,tabIndex:N?-1:0,className:u()("wp-story-container",{"wp-story-with-controls":!r&&!N&&!P.playInFullscreen,"wp-story-fullscreen":N,"wp-story-ended":k,"wp-story-disabled":r,"wp-story-clickable":!r&&!N}),style:{maxWidth:`${M}px`},onClick:A,onTouchStart:Z,onTouchEnd:j},(0,l.createElement)(y.h4,s()({},n,{fullscreen:N,onExitFullscreen:H})),(0,l.createElement)("div",{ref:T,className:"wp-story-wrapper"},t.map(((t,n)=>(0,l.createElement)(f.Z,{playerId:e,key:n,media:t,index:n,playing:!r&&v,uploading:F,settings:P,targetAspectRatio:O})))),(0,l.createElement)(y.aV,{icon:m.Z,slideCount:t.length,showSlideCount:P.showSlideCount,ended:k,hasPrevious:C>0,onPreviousSlide:B,onNextSlide:U}),P.showProgressBar&&(0,l.createElement)(g.ZP,{playerId:e,slides:t,disabled:!N,onSlideSeek:D,maxBullets:N?P.maxBulletsFullscreen:P.maxBullets}),(0,l.createElement)(y.ZX,{playing:v,muted:b,onPlayPressed:()=>h(e,!v),onMutePressed:()=>S(e,!b),showMute:(e=>{const n=e<t.length?t[e]:null;return!!n&&("video"===n.type||(n.mime||"").startsWith("video/"))})(C)})),N&&(0,l.createElement)(y.Aq,{currentMedia:P.blurredBackground&&t.length>C&&t[C]}))}},64130:function(e,t,n){"use strict";var r=n(63027),s=n(33804),l=n(83017),i=n(65707);const u=({key:e,playerId:t,index:n,disabled:s,isSelected:u,onClick:a})=>{const c=(0,i.useSelect)((e=>e("jetpack/story/player").getCurrentSlideProgressPercentage(t)),[]);return(0,r.createElement)(l.gT,{key:e,index:n,progress:c,disabled:s,isSelected:u,onClick:a})};t.ZP=({playerId:e,slides:t,disabled:n,onSlideSeek:a,maxBullets:c})=>{const{currentSlideIndex:o}=(0,i.useSelect)((t=>({currentSlideIndex:t("jetpack/story/player").getCurrentSlideIndex(e)})),[]),d=Math.min(t.length,c),p=Math.floor(d/2);let f,m=0,g=t.length-1;return t.length<=c||o<p?(f=o,g=d-1):o>=t.length-p?(f=o-t.length+d,m=t.length-d):(f=p,m=o-p,g=o+p),(0,r.createElement)("div",{className:"wp-story-pagination wp-story-pagination-bullets",role:"tablist"},m>0&&(0,r.createElement)(l.gT,{key:"bullet-0",index:m-1,progress:100,isEllipsis:!0}),(0,s.range)(1,d+1).map(((t,s)=>{const i=s+m;let c=null;if(i<o)c=100;else{if(!(i>o))return(0,r.createElement)(u,{playerId:e,key:`bullet-${s}`,index:i,disabled:n,isSelected:f===s,onClick:()=>a(i)});c=0}return(0,r.createElement)(l.gT,{key:`bullet-${s}`,index:i,progress:c,disabled:n,isSelected:f===s,onClick:()=>a(i)})})),g<t.length-1&&(0,r.createElement)(l.gT,{key:`bullet-${d+1}`,index:g+1,progress:0,isEllipsis:!0}))}},51922:function(e,t,n){"use strict";var r=n(78900),s=n.n(r),l=n(63027),i=n(58874),u=n(89105),a=n.n(u),c=n(65707),o=n(83017);t.Z=({playerId:e,media:t,index:n,playing:r,uploading:u,settings:d,targetAspectRatio:p})=>{const{currentSlideIndex:f,buffering:m}=(0,c.useSelect)((t=>({currentSlideIndex:t("jetpack/story/player").getCurrentSlideIndex(e),buffering:t("jetpack/story/player").isBuffering(e)})),[]),{slideReady:g}=(0,c.useDispatch)("jetpack/story/player"),y=n===f,E=(0,l.useRef)(null),[h,S]=(0,l.useState)(!1),[w,v]=(0,l.useState)(!0);return(0,l.useEffect)((()=>{if(y&&!w){const t=E.current&&E.current.src&&"video"===E.current.tagName.toLowerCase()?E.current:null;g(e,E.current,t?t.duration:d.imageTime)}}),[y,w]),(0,l.useEffect)((()=>{n<=f+(r?1:0)&&S(!0)}),[r,f]),(0,l.useLayoutEffect)((()=>{E.current&&(0,i.Z)(E.current).then((()=>{v(!1)}))}),[h,u]),(0,l.createElement)(l.Fragment,null,y&&(w||u||m)&&(0,l.createElement)("div",{className:a()("wp-story-slide","is-loading",{transparent:r&&m,"semi-transparent":u||!r&&m})},(0,l.createElement)(o.WB,null)),(0,l.createElement)("div",{role:"figure",className:"wp-story-slide",style:{display:y&&!w?"block":"none"},tabIndex:y?0:-1},h&&(0,l.createElement)(o.pU,s()({},t,{targetAspectRatio:p,cropUpTo:d.cropUpTo,index:n,mediaRef:E}))))}},45124:function(e,t,n){"use strict";function r(e,t){return{type:"SET_MUTED",value:t,playerId:e}}function s(e,t){return{type:"SET_PLAYING",value:t,playerId:e}}function l(e,t){return{type:"SHOW_SLIDE",index:t,playerId:e}}function i(e,t,n){return{type:"SLIDE_READY",mediaElement:t,duration:n,playerId:e}}function u(e,t){return{type:"SET_CURRENT_SLIDE_PROGRESS",value:t,playerId:e}}function a(e){return{type:"RESET_CURRENT_SLIDE_PROGRESS",playerId:e}}function c(e){return{type:"SET_CURRENT_SLIDE_ENDED",playerId:e}}function o(e,t){return{type:"SET_FULLSCREEN",playerId:e,fullscreen:t}}function d(e){return{type:"ENDED",playerId:e}}function p(e,t={}){return{type:"INIT",playerId:e,settings:t}}function f(e,t){return{type:"SET_BUFFERING",value:t,playerId:e}}n.r(t),n.d(t,{setMuted:function(){return r},setPlaying:function(){return s},showSlide:function(){return l},slideReady:function(){return i},setCurrentSlideProgress:function(){return u},resetCurrentSlideProgress:function(){return a},setCurrentSlideEnded:function(){return c},setFullscreen:function(){return o},setEnded:function(){return d},init:function(){return p},setBuffering:function(){return f}})},62447:function(e,t,n){"use strict";n.d(t,{XO:function(){return r},Qz:function(){return s},H2:function(){return l}});const r={currentTime:0,duration:null,timeout:null,lastUpdate:null},s={progress:r,index:0,mediaElement:null,duration:null,ended:!1,ready:!1},l={slideCount:0,currentSlide:s,previousSlide:null,muted:!1,playing:!1,ended:!1,buffering:!1,fullscreen:!1,settings:{imageTime:5,startMuted:!1,playInFullscreen:!0,playOnNextSlide:!0,playOnLoad:!1,exitFullscreenOnEnd:!0,loadInFullscreen:!1,blurredBackground:!0,showSlideCount:!1,showProgressBar:!0,shadowDOM:{enabled:!0,mode:"open",globalStyleElements:'#jetpack-block-story-css, link[href*="jetpack/_inc/blocks/story/view.css"]'},defaultAspectRatio:.5625,cropUpTo:.2,volume:.8,maxBullets:7,maxBulletsFullscreen:14}}},14074:function(e,t,n){"use strict";var r=n(45124),s=n(45746);const l=e=>e&&e.src&&"video"===e.tagName.toLowerCase();function i(e,t){const{getState:n}=t,r=e.playerId,i=(0,s.isMuted)(n(),r),u=(0,s.isPlaying)(n(),r),a=(0,s.getCurrentMediaElement)(n(),r),c=(0,s.getPreviousSlideMediaElement)(n(),r),o=(0,s.getSettings)(n(),r);l(c)&&(c.currentTime=0,c.onwaiting=null,c.onplaying=null,c.pause()),l(a)&&(i!==a.muted&&(a.muted=i,i||(a.volume=o.volume)),u?a.play():a.pause())}function u(e,t){const{getState:n,dispatch:i}=t,a=e.playerId,c=(0,s.isCurrentSlideReady)(n(),a),o=(0,s.isPlaying)(n(),a),d=(0,s.getCurrentSlideProgress)(n(),a);if(clearTimeout(d.timeout),!o||!c)return void(d.lastUpdate&&i((0,r.setCurrentSlideProgress)(a,{...d,lastUpdate:null})));const p=(0,s.getCurrentMediaElement)(n(),a),f=(0,s.getCurrentMediaDuration)(n(),a),m=d.lastUpdate?Date.now()-d.lastUpdate:100,g=l(p)?p.currentTime:d.currentTime+m/1e3;if(g>=f){i((0,r.setCurrentSlideEnded)(a));const e=(0,s.getSlideCount)(n(),a);(0,s.getCurrentSlideIndex)(n(),a)===e-1&&i((0,r.setEnded)(a))}else i((0,r.setCurrentSlideProgress)(a,{timeout:setTimeout((()=>u(e,t)),100),lastUpdate:Date.now(),duration:f,currentTime:g}))}t.Z={SET_PLAYING:[u,i],SLIDE_READY:[function(e,t){const{getState:n,dispatch:i}=t,u=e.playerId,a=(0,s.getCurrentMediaElement)(n(),u);if(!l(a))return;const c=(0,s.getCurrentSlideProgress)(n(),u);0===a.currentTime&&c.currentTime>0&&(a.currentTime=c.currentTime),a.onwaiting=()=>i((0,r.setBuffering)(u,!0)),a.onplaying=()=>i((0,r.setBuffering)(u,!1))},u,i],SET_MUTED:i,SHOW_SLIDE:i}},17031:function(e,t,n){"use strict";var r=n(65707),s=n(45124),l=n(45746),i=n(76155),u=n(26810);const a=(0,r.registerStore)("jetpack/story/player",{actions:s,reducer:u.Z,selectors:l});(0,i.Z)(a)},76155:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(2601),s=n.n(r),l=n(33804),i=n(14074);function u(e){const t=[s()(i.Z)];let n=()=>{throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},r=[];const u={getState:e.getState,dispatch:(...e)=>n(...e)};return r=t.map((e=>e(u))),n=(0,l.flowRight)(...r)(e.dispatch),e.dispatch=n,e}},26810:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(33804),s=n(62447);function l(e=s.H2,t){switch(t.type){case"SHOW_SLIDE":{const n=e.currentSlide===t.index+1;return{...e,currentSlide:{...s.Qz,index:t.index},previousSlide:e.currentSlide,playing:n?e.settings.playOnNextSlide:e.playing}}case"SLIDE_READY":return{...e,buffering:!1,currentSlide:{...e.currentSlide,mediaElement:t.mediaElement,duration:t.duration,ready:!0},previousSlide:null};case"SET_CURRENT_SLIDE_PROGRESS":return{...e,currentSlide:{...e.currentSlide,progress:t.value}};case"SET_CURRENT_SLIDE_ENDED":return{...e,currentSlide:{...e.currentSlide,ended:!0}};case"RESET_CURRENT_SLIDE_PROGRESS":return{...e,currentSlide:{...e.currentSlide,progress:{...s.XO}}};case"SET_MUTED":return{...e,muted:t.value};case"SET_PLAYING":{const n=t.value&&e.ended;return{...e,playing:t.value,buffering:!!t.value&&e.buffering,fullscreen:!e.playing&&t.value?e.settings.playInFullscreen:e.fullscreen,ended:!n&&e.ended,currentSlide:n?{...s.Qz,index:0}:e.currentSlide,previousSlide:n?null:e.previousSlide}}case"SET_BUFFERING":return{...e,buffering:t.value};case"SET_FULLSCREEN":return{...e,fullscreen:t.fullscreen,playing:!(e.fullscreen&&!t.fullscreen&&e.settings.playInFullscreen)&&e.playing};case"INIT":{const n=(0,r.merge)({},e.settings,t.settings);return{...e,settings:n,playing:n.playOnLoad,fullscreen:n.loadInFullscreen}}case"ENDED":return{...e,currentSlide:{...s.Qz,index:e.settings.slideCount-1,progress:{...s.XO,currentTime:100,duration:100}},ended:!0,playing:!1,fullscreen:!e.settings.exitFullscreenOnEnd}}return e}function i(e={},t){return t.playerId?{...e,[t.playerId]:l(e[t.playerId],t)}:e}},45746:function(e,t,n){"use strict";function r(e,t){return!!e[t]}function s(e,t){return e[t].currentSlide.index}function l(e,t){return e[t].currentSlide.progress}function i(e,t){const n=e[t].currentSlide.progress.currentTime,r=e[t].currentSlide.progress.duration,s=Math.round(100*n/r);return s>=100?100:s}function u(e,t){return e[t].playing}function a(e,t){return e[t].muted}function c(e,t){return e[t].buffering}function o(e,t){return e[t].currentSlide.mediaElement}function d(e,t){return e[t].currentSlide.duration}function p(e,t){return e[t].currentSlide.ended}function f(e,t){return e[t].currentSlide.ready}function m(e,t){var n;return null===(n=e[t].previousSlide)||void 0===n?void 0:n.mediaElement}function g(e,t){return e[t].fullscreen}function y(e,t){return e[t].ended}function E(e,t){return e[t].settings}function h(e,t){return e[t].settings.slideCount}n.r(t),n.d(t,{isPlayerReady:function(){return r},getCurrentSlideIndex:function(){return s},getCurrentSlideProgress:function(){return l},getCurrentSlideProgressPercentage:function(){return i},isPlaying:function(){return u},isMuted:function(){return a},isBuffering:function(){return c},getCurrentMediaElement:function(){return o},getCurrentMediaDuration:function(){return d},hasCurrentSlideEnded:function(){return p},isCurrentSlideReady:function(){return f},getPreviousSlideMediaElement:function(){return m},isFullscreen:function(){return g},hasEnded:function(){return y},getSettings:function(){return E},getSlideCount:function(){return h}})},65630:function(e,t,n){"object"==typeof window&&window.Jetpack_Block_Assets_Base_Url&&window.Jetpack_Block_Assets_Base_Url.url&&(n.p=window.Jetpack_Block_Assets_Base_Url.url)},14541:function(e,t,n){"use strict";var r=n(63027),s=n(87997);t.Z=(e,t=24,n=24,l="0 0 24 24")=>(0,r.createElement)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",width:t,height:n,viewBox:l},(0,r.createElement)(s.Path,{fill:"none",d:"M0 0h24v24H0V0z"}),e)},31635:function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.size,n=void 0===t?24:t,s=e.onClick,l=(e.icon,e.className),u=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["size","onClick","icon","className"]),a=["gridicon","gridicons-fullscreen",l,!1,!1,!1].filter(Boolean).join(" ");return i.default.createElement("svg",r({className:a,height:n,width:n,onClick:s},u,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),i.default.createElement("g",null,i.default.createElement("path",{d:"M21 3v6h-2V6.41l-3.29 3.3-1.42-1.42L17.59 5H15V3zM3 3v6h2V6.41l3.29 3.3 1.42-1.42L6.41 5H9V3zm18 18v-6h-2v2.59l-3.29-3.29-1.41 1.41L17.59 19H15v2zM9 21v-2H6.41l3.29-3.29-1.41-1.42L5 17.59V15H3v6z"})))};var s,l=n(63804),i=(s=l)&&s.__esModule?s:{default:s};e.exports=t.default},63804:function(e){"use strict";e.exports=window.React},33804:function(e){"use strict";e.exports=window.lodash},77996:function(e){"use strict";e.exports=window.wp.blob},87997:function(e){"use strict";e.exports=window.wp.components},51417:function(e){"use strict";e.exports=window.wp.compose},65707:function(e){"use strict";e.exports=window.wp.data},47531:function(e){"use strict";e.exports=window.wp.domReady},63027:function(e){"use strict";e.exports=window.wp.element},33163:function(e){"use strict";e.exports=window.wp.i18n},23983:function(e){"use strict";e.exports=window.wp.keycodes}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var l=t[r]={exports:{}};return e[r](l,l.exports,n),l.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e+"../"}(),function(){"use strict";n(65630)}(),function(){"use strict";var e=n(78900),t=n.n(e),r=n(63027),s=n(47531),l=n.n(s),i=n(7393);if("undefined"!=typeof window){const e=Array.from(new URLSearchParams(window.location.search).entries()).filter((e=>e[0].startsWith("wp-story-"))).reduce(((e,t)=>{const n=t[0].replace(/^wp-story-/,"").replace(/-([a-z])/g,(e=>e[1].toUpperCase()));try{e[n]=JSON.parse(t[1])}catch(r){e[n]=JSON.parse(`"${t[1]}"`)}return e}),{});l()((function(){const n=[...document.querySelectorAll(":not(#debug-bar-wp-query) .wp-story")];n.forEach((s=>{if("true"===s.getAttribute("data-block-initialized"))return;let l=null;1===n.length&&(l={...e});const u=s.getAttribute("data-settings");if(u)try{l={...l,...JSON.parse(u)}}catch(a){}!function(e,n){"string"==typeof e&&(e=document.querySelectorAll(e));const s=e.querySelector(".wp-story-wrapper"),l=e.querySelector(".wp-story-meta");let u=[];s&&s.children.length>0&&(u=function(e){return[...e.querySelectorAll("li > figure > :first-child")].map((e=>({alt:e.getAttribute("alt")||e.getAttribute("title"),mime:e.getAttribute("data-mime")||e.getAttribute("type"),url:e.getAttribute("src"),id:e.getAttribute("data-id"),type:"img"===e.tagName.toLowerCase()?"image":"video",srcset:e.getAttribute("srcset"),sizes:e.getAttribute("sizes")})))}(s));let a={};l&&l.children.length>0&&(a=function(e){const t=e.querySelector("div:first-child > img"),n=e.querySelector(".wp-story-title"),r=t&&t.src;return{storyTitle:n&&n.innerText,siteIconUrl:r}}(l));const c=function(e){return e.getAttribute("data-id")}(e);(0,r.render)((0,r.createElement)(i.Z,t()({id:c,slides:u,metadata:a,disabled:!1},n)),e)}(s,l)}))}))}}()}();
(()=>{var e,t;e=jQuery,t={modes:{default:"text/css",less:"text/x-less",sass:"text/x-scss"},init:function(){this.$textarea=e("#safecss"),this.editor=window.CodeMirror.fromTextArea(this.$textarea.get(0),{mode:this.getMode(),lineNumbers:!0,tabSize:2,indentWithTabs:!0,lineWrapping:!0}),this.setEditorHeight()},addListeners:function(){e(window).on("resize",_.bind(_.debounce(this.setEditorHeight,100),this)),this.editor.on("change",_.bind((function(e){this.$textarea.val(e.getValue())}),this)),e("#preprocessor_choices").change(_.bind((function(){this.editor.setOption("mode",this.getMode())}),this))},setEditorHeight:function(){var t=e("html").height()-e(this.editor.getWrapperElement()).offset().top;this.editor.setSize(null,t)},getMode:function(){var t=e("#preprocessor_choices").val();return""!==t&&this.modes[t]||(t="default"),this.modes[t]}},e(document).ready(_.bind(t.init,t))})();
"use strict";(self.webpackChunkwebpack=self.webpackChunkwebpack||[]).push([[161],{27265:function(e,t,s){s.r(t),s.d(t,{initialize:function(){return Ft}}),s(78959);var r=s(35286),a=s(97465),n=s(38526),i=s(43197),o=s.n(i),l=s(45034),c=s.n(l),p=s(98027),h=s.n(p),u=s(84880);class d extends r.wA{constructor(...e){super(...e),o()(this,"handleOverlayOptionsUpdate",(e=>{this.props.updateOverlayOptions(e,(()=>this.props.showResults()))}))}componentDidMount(){(0,u.vJ)(this.handleOverlayOptionsUpdate),(0,u.Em)(this.props.toggleResults)}render(){return null}}class m extends r.wA{constructor(){super(...arguments),o()(this,"handleCompositionStart",(()=>this.setState({isComposing:!0}))),o()(this,"handleCompositionEnd",(()=>this.setState({isComposing:!1}))),o()(this,"handleFilterInputClick",(e=>{e.preventDefault(),e.currentTarget.dataset.filterType&&("taxonomy"===e.currentTarget.dataset.filterType?this.props.setFilter(e.currentTarget.dataset.taxonomy,e.currentTarget.dataset.val):this.props.setFilter(e.currentTarget.dataset.filterType,e.currentTarget.dataset.val)),this.props.setSearchQuery(""),this.props.showResults()})),o()(this,"handleHistoryNavigation",(()=>{this.props.initializeQueryValues({isHistoryNavigation:!0})})),o()(this,"handleInput",c()((e=>{var t,s;null!==(t=e.inputType)&&void 0!==t&&t.includes("format")||""===e.target.value||this.state.isComposing||"submit"!==this.props.overlayOptions.overlayTrigger&&(this.props.setSearchQuery(e.target.value),"immediate"===this.props.overlayOptions.overlayTrigger&&this.props.showResults(),"results"===this.props.overlayOptions.overlayTrigger&&(null===(s=this.props.response)||void 0===s?void 0:s.results)&&this.props.showResults())}),200)),o()(this,"handleKeyup",(e=>{"Enter"===e.key&&(this.props.setSearchQuery(e.target.value),this.props.showResults())})),o()(this,"handleOverlayTriggerClick",(e=>{e.stopImmediatePropagation(),this.props.setSearchQuery(""),this.props.showResults()})),o()(this,"handleSubmit",(e=>{if(e.preventDefault(),this.handleInput.flush(),!this.props.isVisible){var t;const s=null===(t=e.target.querySelector(this.props.themeOptions.searchInputSelector))||void 0===t?void 0:t.value;"string"==typeof s&&this.props.setSearchQuery(s),this.props.showResults()}})),o()(this,"fixBodyScroll",(()=>{var e;this.props.isVisible?(this.preventBodyScroll(),null===(e=window)||void 0===e||e.scrollTo(0,0)):this.props.isVisible||this.restoreBodyScroll()})),this.state={isComposing:!1,bodyScrollTop:0,previousStyle:null,previousBodyStyleAttribute:""},this.props.initializeQueryValues()}componentDidMount(){this.disableUnnecessaryFormAndInputAttributes(),this.addEventListeners()}componentWillUnmount(){this.removeEventListeners(),this.restoreBodyScroll()}componentDidUpdate(e){this.props.isVisible!==e.isVisible&&this.fixBodyScroll()}disableUnnecessaryFormAndInputAttributes(){document.querySelectorAll(this.props.themeOptions.searchInputSelector).forEach((e=>{e.removeAttribute("required"),e.removeAttribute("autocomplete"),e.form.removeAttribute("autocomplete")}))}addEventListeners(){window.addEventListener("popstate",this.handleHistoryNavigation),document.querySelectorAll(this.props.themeOptions.searchInputSelector).forEach((e=>{e.form.addEventListener("submit",this.handleSubmit),e.addEventListener("keyup",this.handleKeyup),e.addEventListener("input",this.handleInput),e.addEventListener("compositionstart",this.handleCompositionStart),e.addEventListener("compositionend",this.handleCompositionEnd)})),document.querySelectorAll(this.props.themeOptions.overlayTriggerSelector).forEach((e=>{e.addEventListener("click",this.handleOverlayTriggerClick,!0)})),document.querySelectorAll(this.props.themeOptions.filterInputSelector).forEach((e=>{e.addEventListener("click",this.handleFilterInputClick)}))}removeEventListeners(){window.removeEventListener("popstate",this.handleHistoryNavigation),document.querySelectorAll(this.props.themeOptions.searchInputSelector).forEach((e=>{e.form.removeEventListener("submit",this.handleSubmit),e.removeEventListener("keyup",this.handleKeyup),e.removeEventListener("input",this.handleInput),e.removeEventListener("compositionstart",this.handleCompositionStart),e.removeEventListener("compositionend",this.handleCompositionEnd)})),document.querySelectorAll(this.props.themeOptions.overlayTriggerSelector).forEach((e=>{e.removeEventListener("click",this.handleOverlayTriggerClick,!0)})),document.querySelectorAll(this.props.themeOptions.filterInputSelector).forEach((e=>{e.removeEventListener("click",this.handleFilterInputClick)}))}preventBodyScroll(){this.setState({bodyScrollTop:parseInt(window.scrollY)||0,previousStyle:{top:document.body.style.top,left:document.body.style.left,right:document.body.style.right,scrollBehavior:document.documentElement.style.scrollBehavior},previousBodyStyleAttribute:document.body.getAttribute("style")},(()=>{var e,t;const s=(null===(e=document.documentElement)||void 0===e?void 0:e.scrollHeight)-(null===(t=document.body)||void 0===t?void 0:t.scrollHeight)||0;document.body.setAttribute("style","position: fixed !important"),document.body.style.top=`-${this.state.bodyScrollTop-s}px`,document.body.style.left=0,document.body.style.right=0}))}restoreBodyScroll(){var e,t,s,r,a,n,i,o;this.state.previousBodyStyleAttribute?document.body.setAttribute("style",this.state.previousBodyStyleAttribute):document.body.removeAttribute("style"),document.body.style.top=null!==(e=null===(t=this.state.previousStyle)||void 0===t?void 0:t.top)&&void 0!==e?e:"",document.body.style.left=null!==(s=null===(r=this.state.previousStyle)||void 0===r?void 0:r.left)&&void 0!==s?s:"",document.body.style.right=null!==(a=null===(n=this.state.previousStyle)||void 0===n?void 0:n.right)&&void 0!==a?a:"",document.documentElement.style.scrollBehavior="revert",this.state.bodyScrollTop>0&&window.scrollTo(0,this.state.bodyScrollTop),document.documentElement.style.scrollBehavior=null!==(i=null===(o=this.state.previousStyle)||void 0===o?void 0:o.scrollBehavior)&&void 0!==i?i:"",this.setState({bodyScrollTop:0,previousStyle:null,previousBodyStyleAttribute:""})}render(){return null}}var g=s(33163),_=s(79379);const y=g.__;var v=e=>{const{children:t,closeOverlay:s,colorTheme:a,hasOverlayWidgets:n,isVisible:i}=e,o=(l=s,e=>{"Escape"!==e.key&&"Esc"!==e.key||(e.preventDefault(),l())});var l;return(0,r.d4)((()=>(window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)})),[o]),r.ZP.createElement("div",{"aria-hidden":!i,"aria-labelledby":"jetpack-instant-search__overlay-title",className:["jetpack-instant-search",_.zg,`jetpack-instant-search__overlay--${a}`,n?"":"jetpack-instant-search__overlay--no-sidebar",i?"":"is-hidden"].join(" "),role:"dialog"},r.ZP.createElement("h1",{id:"jetpack-instant-search__overlay-title",className:"screen-reader-text"},y("Search results","jetpack")),t)};const f=g.__;class E extends r.wA{needsOffset(e,t){return["gridicons-calendar","gridicons-cart","gridicons-folder","gridicons-info","gridicons-posts","gridicons-star-outline","gridicons-star"].indexOf(e)>=0&&t%18==0}getSVGTitle(e){if("title"in this.props)return this.props.title?r.ZP.createElement("title",null,this.props.title):null;switch(e){default:return null;case"gridicons-audio":return r.ZP.createElement("title",null,f("Has audio.","jetpack"));case"gridicons-calendar":return r.ZP.createElement("title",null,f("Is an event.","jetpack"));case"gridicons-cart":return r.ZP.createElement("title",null,f("Is a product.","jetpack"));case"chevron-down":return r.ZP.createElement("title",null,f("Show filters","jetpack"));case"gridicons-comment":return r.ZP.createElement("title",null,f("Matching comment.","jetpack"));case"gridicons-cross":return r.ZP.createElement("title",null,f("Close search results","jetpack"));case"gridicons-filter":return r.ZP.createElement("title",null,f("Toggle search filters.","jetpack"));case"gridicons-folder":return r.ZP.createElement("title",null,f("Category","jetpack"));case"gridicons-image-multiple":return r.ZP.createElement("title",null,f("Has multiple images.","jetpack"));case"gridicons-image":return r.ZP.createElement("title",null,f("Has an image.","jetpack"));case"gridicons-page":return r.ZP.createElement("title",null,f("Page","jetpack"));case"gridicons-post":return r.ZP.createElement("title",null,f("Post","jetpack"));case"gridicons-jetpack-search":case"gridicons-search":return r.ZP.createElement("title",null,f("Search","jetpack"));case"gridicons-tag":return r.ZP.createElement("title",null,f("Tag","jetpack"));case"gridicons-video":return r.ZP.createElement("title",null,f("Has a video.","jetpack"))}}renderIcon(e){switch(e){default:return null;case"gridicons-audio":return r.ZP.createElement("g",null,r.ZP.createElement("path",{d:"M8 4v10.184C7.686 14.072 7.353 14 7 14c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3V7h7v4.184c-.314-.112-.647-.184-1-.184-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3V4H8z"}));case"gridicons-block":return r.ZP.createElement("g",null,r.ZP.createElement("path",{d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM4 12c0-4.418 3.582-8 8-8 1.848 0 3.545.633 4.9 1.686L5.686 16.9C4.633 15.545 4 13.848 4 12zm8 8c-1.848 0-3.546-.633-4.9-1.686L18.314 7.1C19.367 8.455 20 10.152 20 12c0 4.418-3.582 8-8 8z"}));case"gridicons-calendar":return r.ZP.createElement("g",null,r.ZP.createElement("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.105 0-2 .896-2 2v13c0 1.104.895 2 2 2h14c1.104 0 2-.896 2-2V6c0-1.104-.896-2-2-2zm0 15H5V8h14v11z"}));case"gridicons-cart":return r.ZP.createElement("g",null,r.ZP.createElement("path",{d:"M9 20c0 1.1-.9 2-2 2s-1.99-.9-1.99-2S5.9 18 7 18s2 .9 2 2zm8-2c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm.396-5c.937 0 1.75-.65 1.952-1.566L21 5H7V4c0-1.105-.895-2-2-2H3v2h2v11c0 1.105.895 2 2 2h12c0-1.105-.895-2-2-2H7v-2h10.396z"}));case"gridicons-chevron-down":return r.ZP.createElement("g",null,r.ZP.createElement("path",{d:"M20 9l-8 8-8-8 1.414-1.414L12 14.172l6.586-6.586"}));case"gridicons-comment":return r.ZP.createElement("g",null,r.ZP.createElement("path",{d:"M3 6v9c0 1.105.895 2 2 2h9v5l5.325-3.804c1.05-.75 1.675-1.963 1.675-3.254V6c0-1.105-.895-2-2-2H5c-1.105 0-2 .895-2 2z"}));case"gridicons-cross":return r.ZP.createElement("g",null,r.ZP.createElement("path",{d:"M18.36 19.78L12 13.41l-6.36 6.37-1.42-1.42L10.59 12 4.22 5.64l1.42-1.42L12 10.59l6.36-6.36 1.41 1.41L13.41 12l6.36 6.36z"}));case"gridicons-filter":return r.ZP.createElement("g",null,r.ZP.createElement("path",{d:"M10 19h4v-2h-4v2zm-4-6h12v-2H6v2zM3 5v2h18V5H3z"}));case"gridicons-folder":return r.ZP.createElement("g",null,r.ZP.createElement("path",{d:"M18 19H6c-1.1 0-2-.9-2-2V7c0-1.1.9-2 2-2h3c1.1 0 2 .9 2 2h7c1.1 0 2 .9 2 2v8c0 1.1-.9 2-2 2z"}));case"gridicons-image":return r.ZP.createElement("g",null,r.ZP.createElement("path",{d:"M13 9.5c0-.828.672-1.5 1.5-1.5s1.5.672 1.5 1.5-.672 1.5-1.5 1.5-1.5-.672-1.5-1.5zM22 6v12c0 1.105-.895 2-2 2H4c-1.105 0-2-.895-2-2V6c0-1.105.895-2 2-2h16c1.105 0 2 .895 2 2zm-2 0H4v7.444L8 9l5.895 6.55 1.587-1.85c.798-.932 2.24-.932 3.037 0L20 15.426V6z"}));case"gridicons-image-multiple":return r.ZP.createElement("g",null,r.ZP.createElement("path",{d:"M15 7.5c0-.828.672-1.5 1.5-1.5s1.5.672 1.5 1.5S17.328 9 16.5 9 15 8.328 15 7.5zM4 20h14c0 1.105-.895 2-2 2H4c-1.1 0-2-.9-2-2V8c0-1.105.895-2 2-2v14zM22 4v12c0 1.105-.895 2-2 2H8c-1.105 0-2-.895-2-2V4c0-1.105.895-2 2-2h12c1.105 0 2 .895 2 2zM8 4v6.333L11 7l4.855 5.395.656-.73c.796-.886 2.183-.886 2.977 0l.513.57V4H8z"}));case"gridicons-info":return r.ZP.createElement("g",null,r.ZP.createElement("path",{d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}));case"gridicons-jetpack-search":return r.ZP.createElement("g",null,r.ZP.createElement("path",{d:"M0 9.257C0 4.15 4.151 0 9.257 0c5.105 0 9.256 4.151 9.256 9.257a9.218 9.218 0 01-2.251 6.045l.034.033h1.053L24 22.01l-1.986 1.989-6.664-6.662v-1.055l-.033-.033a9.218 9.218 0 01-6.06 2.264C4.15 18.513 0 14.362 0 9.257zm4.169 1.537h4.61V1.82l-4.61 8.973zm5.547-3.092v8.974l4.61-8.974h-4.61z"}));case"gridicons-pages":return r.ZP.createElement("g",null,r.ZP.createElement("path",{d:"M16 8H8V6h8v2zm0 2H8v2h8v-2zm4-6v12l-6 6H6c-1.105 0-2-.895-2-2V4c0-1.105.895-2 2-2h12c1.105 0 2 .895 2 2zm-2 10V4H6v16h6v-4c0-1.105.895-2 2-2h4z"}));case"gridicons-posts":return r.ZP.createElement("g",null,r.ZP.createElement("path",{d:"M16 19H3v-2h13v2zm5-10H3v2h18V9zM3 5v2h11V5H3zm14 0v2h4V5h-4zm-6 8v2h10v-2H11zm-8 0v2h5v-2H3z"}));case"gridicons-search":return r.ZP.createElement("g",null,r.ZP.createElement("path",{d:"M21 19l-5.154-5.154C16.574 12.742 17 11.42 17 10c0-3.866-3.134-7-7-7s-7 3.134-7 7 3.134 7 7 7c1.42 0 2.742-.426 3.846-1.154L19 21l2-2zM5 10c0-2.757 2.243-5 5-5s5 2.243 5 5-2.243 5-5 5-5-2.243-5-5z"}));case"gridicons-star-outline":return r.ZP.createElement("g",null,r.ZP.createElement("path",{d:"M12 6.308l1.176 3.167.347.936.997.042 3.374.14-2.647 2.09-.784.62.27.963.91 3.25-2.813-1.872-.83-.553-.83.552-2.814 1.87.91-3.248.27-.962-.783-.62-2.648-2.092 3.374-.14.996-.04.347-.936L12 6.308M12 2L9.418 8.953 2 9.257l5.822 4.602L5.82 21 12 16.89 18.18 21l-2.002-7.14L22 9.256l-7.418-.305L12 2z"}));case"gridicons-star":return r.ZP.createElement("g",null,r.ZP.createElement("path",{d:"M12 2l2.582 6.953L22 9.257l-5.822 4.602L18.18 21 12 16.89 5.82 21l2.002-7.14L2 9.256l7.418-.304"}));case"gridicons-tag":return r.ZP.createElement("g",null,r.ZP.createElement("path",{d:"M20 2.007h-7.087c-.53 0-1.04.21-1.414.586L2.592 11.5c-.78.78-.78 2.046 0 2.827l7.086 7.086c.78.78 2.046.78 2.827 0l8.906-8.906c.376-.374.587-.883.587-1.413V4.007c0-1.105-.895-2-2-2zM17.007 9c-1.105 0-2-.895-2-2s.895-2 2-2 2 .895 2 2-.895 2-2 2z"}));case"gridicons-video":return r.ZP.createElement("g",null,r.ZP.createElement("path",{d:"M20 4v2h-2V4H6v2H4V4c-1.105 0-2 .895-2 2v12c0 1.105.895 2 2 2v-2h2v2h12v-2h2v2c1.105 0 2-.895 2-2V6c0-1.105-.895-2-2-2zM6 16H4v-3h2v3zm0-5H4V8h2v3zm4 4V9l4.5 3-4.5 3zm10 1h-2v-3h2v3zm0-5h-2V8h2v3z"}))}}render(){const{size:e=24,className:t=""}=this.props,s=this.props.height||e,a=this.props.width||e,n=this.props.style||{height:s,width:a},i="gridicons-"+this.props.icon;let o=["gridicon",i,t];return this.needsOffset(i,e)&&o.push("needs-offset"),o=o.join(" "),r.ZP.createElement("svg",{className:o,focusable:this.props.focusable,height:s,onClick:this.props.onClick,style:n,viewBox:"0 0 24 24",width:a,xmlns:"http://www.w3.org/2000/svg","aria-hidden":this.props["aria-hidden"]},this.getSVGTitle(i),this.renderIcon(i))}}o()(E,"defaultProps",{"aria-hidden":"false",focusable:"true"});var k=E,P=({type:e,children:t})=>"warning"!==e?null:r.ZP.createElement("div",{className:"jetpack-instant-search__notice jetpack-instant-search__notice--warning"},r.ZP.createElement(k,{icon:"info",size:20}),t);const w=g.__;class S extends r.wA{constructor(...e){super(...e),o()(this,"overlayElement",document.getElementsByClassName(_.zg)[0]),o()(this,"checkScroll",c()((()=>{this.props.enableLoadOnScroll&&window.innerHeight+this.overlayElement.scrollTop===this.overlayElement.scrollHeight&&this.props.onLoadNextPage()}),100))}componentDidMount(){this.overlayElement.addEventListener("scroll",this.checkScroll)}componentDidUnmount(){this.overlayElement.removeEventListener("scroll",this.checkScroll)}render(){return r.ZP.createElement("button",{className:"jetpack-instant-search__scroll-button",disabled:this.props.isLoading,onClick:this.props.onLoadNextPage},this.props.isLoading?r.ZP.createElement("span",null,w("Loading…","jetpack")):r.ZP.createElement("span",null,w("Load more","jetpack")))}}var b=S;const Z=g.__;class j extends r.wA{constructor(...e){super(...e),o()(this,"handleKeyPress",(e=>{this.props.value!==e.currentTarget.value&&"Enter"===e.key&&(e.preventDefault(),this.props.onChange(e.currentTarget.dataset.value))})),o()(this,"handleClick",(e=>{this.props.value!==e.currentTarget.value&&(e.preventDefault(),this.props.onChange(e.currentTarget.dataset.value))})),o()(this,"handleSelectChange",(e=>{this.props.value!==e.currentTarget.value&&(e.preventDefault(),this.props.onChange(e.currentTarget.value))}))}render(){const e=function(e=null){return e!==_.LI?_.aP:new Map([..._.aP,..._.rs])}(this.props.resultFormat);return e.size>3?r.ZP.createElement("div",{className:"jetpack-instant-search__search-sort jetpack-instant-search__search-sort-with-select"},r.ZP.createElement("label",{htmlFor:"jetpack-instant-search__search-sort-select"},Z("Sort:","jetpack")),r.ZP.createElement("select",{id:"jetpack-instant-search__search-sort-select",onBlur:this.handleSelectChange,onChange:this.handleSelectChange},[...e.entries()].map((([e,t])=>r.ZP.createElement("option",{value:e,key:e,selected:this.props.value===e?"selected":""},t))))):r.ZP.createElement("div",{className:"jetpack-instant-search__search-sort jetpack-instant-search__search-sort-with-links"},r.ZP.createElement("div",{className:"screen-reader-text"},Z("Sort by: ","jetpack")),[...e.entries()].map((([e,t])=>r.ZP.createElement("a",{className:"jetpack-instant-search__search-sort-option "+(this.props.value===e?"is-selected":""),"data-value":e,key:e,onClick:this.handleClick,onKeyPress:this.handleKeyPress,role:"button",tabIndex:0},t))))}}var C=e=>r.ZP.createElement("div",{className:"jetpack-instant-search__search-form-controls"},e.children,e.enableSort&&r.ZP.createElement(j,{onChange:e.onChangeSort,resultFormat:e.resultFormat,value:e.sort})),T=s(70660),N=s.n(T);const O=g.__;let A=null;var L=e=>{var t;const[s]=(0,r.eJ)((()=>N()("jetpack-instant-search__box-input-"))),a=(0,r.sO)(null);return(0,r.d4)((()=>{var t;e.isVisible?(t=a.current,()=>{A=document.activeElement,t.focus()})():e.shouldRestoreFocus&&A&&A.focus()}),[e.isVisible,e.shouldRestoreFocus]),r.ZP.createElement(r.HY,null,r.ZP.createElement("div",{className:"jetpack-instant-search__box"},r.ZP.createElement("label",{className:"jetpack-instant-search__box-label",htmlFor:s},r.ZP.createElement("span",{className:"screen-reader-text assistive-text"},O("Site Search","jetpack")),r.ZP.createElement("div",{className:"jetpack-instant-search__box-gridicon"},r.ZP.createElement(k,{icon:"search",size:24})),r.ZP.createElement("input",{autoComplete:"off",id:s,className:"search-field jetpack-instant-search__box-input",inputMode:"search",onChange:e.isVisible?e.onChange:null,ref:a,placeholder:O("Search…","jetpack"),type:"search",value:null!==(t=e.searchQuery)&&void 0!==t?t:""}),"string"==typeof e.searchQuery&&e.searchQuery.length>0&&r.ZP.createElement("input",{type:"button",value:O("clear","jetpack"),onClick:e.onClear}),r.ZP.createElement("button",{className:"screen-reader-text assistive-text"},O("Search","jetpack")))))};const F=e=>e.preventDefault();class x extends r.wA{constructor(...e){super(...e),o()(this,"onClear",(()=>this.props.onChangeSearch(""))),o()(this,"onChangeSearch",(e=>this.props.onChangeSearch(e.currentTarget.value)))}render(){return r.ZP.createElement("form",{autocomplete:"off",onSubmit:F,role:"search",className:this.props.className},r.ZP.createElement("div",{className:"jetpack-instant-search__search-form"},r.ZP.createElement(L,{isVisible:this.props.isVisible,onChange:this.onChangeSearch,onClear:this.onClear,shouldRestoreFocus:!0,searchQuery:this.props.searchQuery})))}}var R=x,I=s(78900),z=s.n(I),H=({className:e,onClick:t,url:s})=>{const a=function(e){const t=e.split("/").filter((e=>e.length>0));return t.shift(),t}(s);return a.length<1?null:r.ZP.createElement("div",{className:`jetpack-instant-search__path-breadcrumb ${e||""}`},r.ZP.createElement("a",{className:"jetpack-instant-search__path-breadcrumb-link",href:`//${s}`,onClick:t},a.map(((e,t,s)=>r.ZP.createElement("span",{className:"jetpack-instant-search__path-breadcrumb-piece"},decodeURIComponent(e),t!==s.length-1?" › ":"")))))};function Q(e,t){return Array.isArray(e)||(e=[e]),0!==e.filter((e=>t.includes(e))).length}const V=["youtube","ooyala","anvplayer","wpvideo","bc_video","video","brightcove","tp_video","jwplayer","tempo-video","vimeo"],M=["gallery","ione_media_gallery"],$=["audio","soundcloud"],U={product:"cart",video:"video",gallery:"image-multiple",event:"calendar",events:"calendar"};var D=({postType:e,shortcodeTypes:t,iconSize:s=18})=>{if(Object.keys(U).includes(e))return r.ZP.createElement(k,{icon:U[e],size:s});const a=Q(t,V),n=Q(t,$),i=Q(t,M);if(a)return r.ZP.createElement(k,{icon:"video",size:s});if(n)return r.ZP.createElement(k,{icon:"audio",size:s});switch(e){case"page":return r.ZP.createElement(k,{icon:"pages",size:s});default:if(i)return r.ZP.createElement(k,{icon:"image-multiple",size:s})}return null},W=({comments:e,iconSize:t=18})=>e?r.ZP.createElement("div",{className:"jetpack-instant-search__search-result-comments"},r.ZP.createElement(k,{icon:"comment",size:t}),r.ZP.createElement("span",{className:"jetpack-instant-search__search-result-comments-text",dangerouslySetInnerHTML:{__html:e.join(" ... ")}})):null;class B extends r.wA{getIconSize(){return 18}getTags(){let e=this.props.result.fields["tag.name.default"];return e?(Array.isArray(e)||(e=[e]),e.slice(0,5)):[]}getCategories(){let e=this.props.result.fields["category.name.default"];return e?(Array.isArray(e)||(e=[e]),e.slice(0,5)):[]}renderNoMatchingContent(){const e=this.getTags(),t=this.getCategories(),s=0===e.length&&0===t.length;return r.ZP.createElement("div",{className:"jetpack-instant-search__search-result-minimal-content"},s&&r.ZP.createElement(H,{url:this.props.result.fields["permalink.url.raw"]}),r.ZP.createElement("div",{className:"jetpack-instant-search__search-result-minimal-cats-and-tags"},0!==e.length&&r.ZP.createElement("ul",{className:"jetpack-instant-search__search-result-minimal-tags"},e.map((e=>r.ZP.createElement("li",{className:"jetpack-instant-search__search-result-minimal-tag"},r.ZP.createElement(k,{icon:"tag",size:this.getIconSize()}),r.ZP.createElement("span",{className:"jetpack-instant-search__search-result-minimal-tag-text"},e))))),0!==t.length&&r.ZP.createElement("ul",{className:"jetpack-instant-search__search-result-minimal-cats"},t.map((e=>r.ZP.createElement("li",{className:"jetpack-instant-search__search-result-minimal-cat"},r.ZP.createElement(k,{icon:"folder",size:this.getIconSize()}),r.ZP.createElement("span",{className:"jetpack-instant-search__search-result-minimal-cat-text"},e)))))))}renderMatchingContent(){return r.ZP.createElement("div",{className:"jetpack-instant-search__search-result-minimal-content",dangerouslySetInnerHTML:{__html:this.props.result.highlight.content.join(" ... ")}})}render(){const{result_type:e,fields:t,highlight:s}=this.props.result;if("post"!==e)return null;const a=!s.content||""===s.content[0];return r.ZP.createElement("li",{className:"jetpack-instant-search__search-result jetpack-instant-search__search-result-minimal"},r.ZP.createElement("h3",{className:"jetpack-instant-search__search-result-title jetpack-instant-search__search-result-minimal-title"},r.ZP.createElement(D,{postType:t.post_type,shortcodeTypes:t.shortcode_types}),r.ZP.createElement("a",{className:"jetpack-instant-search__search-result-title-link jetpack-instant-search__search-result-minimal-title-link",href:`//${t["permalink.url.raw"]}`,onClick:this.props.onClick,dangerouslySetInnerHTML:{__html:s.title}})),a?this.renderNoMatchingContent():this.renderMatchingContent(),r.ZP.createElement(W,{comments:s&&s.comments}))}}var q=B,Y=s(40278),K=e=>{const{alt:t,isPhotonEnabled:s,maxHeight:a=600,maxWidth:n=600,src:i,lazyLoad:o=!0,...l}=e,c=(0,r.sO)(),[p,h]=(0,r.eJ)(null),u=function(e,t,s,a=!0){const[n,i]=(0,r.eJ)(null),o=(l=e)?l.split("?",1)[0]:"";var l;const c=null==o?void 0:o.substring(o.lastIndexOf(".")+1).toLowerCase(),p=["gif","jpg","jpeg","png","webp"].includes(c);return(0,r.d4)((()=>{if(a&&p){const r=(0,Y.Z)(o,{resize:`${t},${s}`});i(r||e)}else i(e)}),[e,t,s,a,o,p]),n}(i,n,a,s);return(0,r.d4)((()=>{if(!u)return;let e=null;return o&&"IntersectionObserver"in window?(e=new window.IntersectionObserver(((e,t)=>{for(const s of e)s.isIntersecting&&(h(u),t.unobserve(s.target))})),e.observe(c.current)):h(u),()=>{var t;null===(t=e)||void 0===t||t.disconnect()}}),[o,u]),r.ZP.createElement("img",z()({alt:t,ref:c,src:p},l))},G=s(47078),J=s.n(G);function X(e){const t={searchInputSelector:['input[name="s"]:not(.jetpack-instant-search__box-input)',"#searchform input.search-field:not(.jetpack-instant-search__box-input)",".search-form input.search-field:not(.jetpack-instant-search__box-input)",".searchform input.search-field:not(.jetpack-instant-search__box-input)"].join(", "),filterInputSelector:["a.jetpack-search-filter__link"],overlayTriggerSelector:[".jetpack-instant-search__open-overlay-button","header#site-header .search-toggle[data-toggle-target]"].join(",")};return e.theme_options?{...t,...e.theme_options}:t}const ee=e=>e.split(" ").join("T");class te extends r.wA{constructor(...e){super(...e),o()(this,"filtersList",(0,r.Vf)()),o()(this,"idPrefix",N()("jetpack-instant-search__search-filter-")),o()(this,"toggleFilter",(()=>{this.props.onChange(this.getIdentifier(),[...this.filtersList.current.querySelectorAll('input[type="checkbox"]').values()].filter((e=>e.checked)).map((e=>e.name)))})),o()(this,"toggleStaticFilter",(e=>{this.props.onChange(this.getIdentifier(),e.target.value)})),o()(this,"renderDate",(({key_as_string:e,doc_count:t})=>{const{locale:s="en-US"}=this.props;return r.ZP.createElement("div",null,r.ZP.createElement("input",{checked:this.isChecked(e),id:`${this.idPrefix}-dates-${this.getIdentifier()}-${e}`,name:e,onChange:this.toggleFilter,type:"checkbox",className:"jetpack-instant-search__search-filter-list-input"}),r.ZP.createElement("label",{htmlFor:`${this.idPrefix}-dates-${this.getIdentifier()}-${e}`,className:"jetpack-instant-search__search-filter-list-label"},new Date(ee(e)).toLocaleString(s,function(e){switch(e){case"day":return{year:"numeric",month:"long",day:"numeric"};case"month":return{year:"numeric",month:"long"};case"year":return{year:"numeric"}}return{year:"numeric",month:"long"}}(this.props.configuration.interval))," ","(",t,")"))})),o()(this,"renderPostType",(({key:e,doc_count:t})=>{const s=e in this.props.postTypes?this.props.postTypes[e].singular_name:e;return r.ZP.createElement("div",null,r.ZP.createElement("input",{checked:this.isChecked(e),id:`${this.idPrefix}-post-types-${e}`,name:e,onChange:this.toggleFilter,type:"checkbox",className:"jetpack-instant-search__search-filter-list-input"}),r.ZP.createElement("label",{htmlFor:`${this.idPrefix}-post-types-${e}`,className:"jetpack-instant-search__search-filter-list-label"},J()(s)," (",t,")"))})),o()(this,"renderTaxonomy",(({key:e,doc_count:t})=>{const[s,a]=e&&e.split(/\/(.+)/);return r.ZP.createElement("div",null,r.ZP.createElement("input",{checked:this.isChecked(s),id:`${this.idPrefix}-taxonomies-${s}`,name:s,onChange:this.toggleFilter,type:"checkbox",className:"jetpack-instant-search__search-filter-list-input"}),r.ZP.createElement("label",{htmlFor:`${this.idPrefix}-taxonomies-${s}`,className:"jetpack-instant-search__search-filter-list-label"},J()(a)," (",t,")"))})),o()(this,"renderGroup",(e=>r.ZP.createElement("div",null,r.ZP.createElement("input",{checked:this.isChecked(e.value),id:`${this.idPrefix}-groups-${e.value}`,name:this.props.configuration.filter_id,onChange:this.toggleStaticFilter,value:e.value,type:"radio",className:"jetpack-instant-search__search-filter-list-input"}),r.ZP.createElement("label",{htmlFor:`${this.idPrefix}-groups-${e.value}`,className:"jetpack-instant-search__search-filter-list-label"},e.name))))}getIdentifier(){return"postType"===this.props.type?"post_types":"date"===this.props.type?`${this.props.configuration.interval}_${this.props.configuration.field}`:"taxonomy"===this.props.type?this.props.configuration.taxonomy:"group"===this.props.type?this.props.configuration.filter_id:void 0}isChecked(e){return Boolean(this.props.value&&this.props.value.includes(e))}renderDates(){return[...this.props.aggregation.buckets.filter((e=>!!e&&e.doc_count>0)).map(this.renderDate)].reverse().slice(0,this.props.configuration.count)}renderPostTypes(){return this.props.aggregation.buckets.map(this.renderPostType)}renderTaxonomies(){return this.props.aggregation.buckets.map(this.renderTaxonomy)}renderGroups(){return this.props.configuration.values.map(this.renderGroup)}render(){return r.ZP.createElement("div",null,r.ZP.createElement("h4",{className:"jetpack-instant-search__search-filter-sub-heading"},this.props.configuration.name),r.ZP.createElement("div",{ref:this.filtersList},r.ZP.createElement("div",{className:"jetpack-instant-search__search-filter-list jetpack-instant-search__search-static-filter-list"},"group"===this.props.type&&this.renderGroups()),this.props.aggregation&&"buckets"in this.props.aggregation&&r.ZP.createElement("div",{className:"jetpack-instant-search__search-filter-list"},"date"===this.props.type&&this.renderDates(),"postType"===this.props.type&&this.renderPostTypes(),"taxonomy"===this.props.type&&this.renderTaxonomies())))}}function se(e){const{isMultiSite:t,locale:s="en-US"}=e,{result_type:a,fields:n,highlight:i}=e.result;if("post"!==a)return null;const o=Array.isArray(n["image.url.raw"])?n["image.url.raw"][0]:n["image.url.raw"];return r.ZP.createElement("li",{className:["jetpack-instant-search__search-result","jetpack-instant-search__search-result-expanded",`jetpack-instant-search__search-result-expanded--${n.post_type}`,o?"":"jetpack-instant-search__search-result-expanded--no-image",t?"is-multisite":""].join(" ")},r.ZP.createElement("div",{className:"jetpack-instant-search__search-result-expanded__content-container"},r.ZP.createElement("div",{className:"jetpack-instant-search__search-result-expanded__copy-container"},r.ZP.createElement("h3",{className:"jetpack-instant-search__search-result-title jetpack-instant-search__search-result-expanded__title"},r.ZP.createElement("a",{className:"jetpack-instant-search__search-result-title-link jetpack-instant-search__search-result-expanded__title-link",href:`//${n["permalink.url.raw"]}`,onClick:e.onClick,dangerouslySetInnerHTML:{__html:i.title}})),!t&&r.ZP.createElement(H,{className:"jetpack-instant-search__search-result-expanded__path",onClick:e.onClick,url:`//${n["permalink.url.raw"]}`}),r.ZP.createElement("div",{className:"jetpack-instant-search__search-result-expanded__content",dangerouslySetInnerHTML:{__html:i.content.join(" ... ")}}),i.comments&&r.ZP.createElement(W,{comments:i.comments})),r.ZP.createElement("a",{className:"jetpack-instant-search__search-result-expanded__image-link",href:`//${n["permalink.url.raw"]}`,onClick:e.onClick},r.ZP.createElement("div",{className:"jetpack-instant-search__search-result-expanded__image-container"},o?r.ZP.createElement(K,{alt:n["title.default"],className:"jetpack-instant-search__search-result-expanded__image",isPhotonEnabled:e.isPhotonEnabled,src:`//${o}`}):null))),t&&r.ZP.createElement("ul",{className:"jetpack-instant-search__search-result-expanded__footer"},r.ZP.createElement("li",null,r.ZP.createElement(K,{alt:n.blog_name,className:"jetpack-instant-search__search-result-expanded__footer-blog-image",isPhotonEnabled:!1,height:24,width:24,src:n.blog_icon_url,lazyLoad:!1}),r.ZP.createElement("span",{className:"jetpack-instant-search__search-result-expanded__footer-blog"},n.blog_name)),r.ZP.createElement("li",null,r.ZP.createElement("span",{className:"jetpack-instant-search__search-result-expanded__footer-author"},n.author)),r.ZP.createElement("li",null,r.ZP.createElement("span",{className:"jetpack-instant-search__search-result-expanded__footer-date"},new Date(ee(n.date)).toLocaleDateString(s,{year:"numeric",month:"short",day:"numeric"})))))}const re=g._n;function ae({rating:e=0,count:t=0,permalink:s}){return r.ZP.createElement("div",{className:"jetpack-instant-search__product-rating"},r.ZP.createElement("span",{"aria-hidden":!0,className:"jetpack-instant-search__product-rating-stars"},Array(5).fill(r.ZP.createElement(k,{size:16,icon:"star-outline"})).fill(r.ZP.createElement(k,{size:16,icon:"star"}),0,e))," ",r.ZP.createElement("a",{"aria-hidden":!0,className:"jetpack-instant-search__product-rating-count",href:s+"#reviews"},(0,g.sprintf)(re("%d review","%d reviews",t,"jetpack"),t)),r.ZP.createElement("span",{className:"screen-reader-text"},(0,g.sprintf)(re("Average rating of %d out of 5 from %d review.","Average rating of %d out of 5 from %d reviews.",t,"jetpack"),Number(e).toFixed(2),t)))}class ne extends r.wA{render(){const{formattedPrice:e,formattedSalePrice:t,formattedRegularPrice:s,price:a,salePrice:n}=this.props;return a?r.ZP.createElement("span",{className:"jetpack-instant-search__product-price"},n>0?r.ZP.createElement(r.HY,null,r.ZP.createElement("s",{className:"jetpack-instant-search__product-price-regular",dangerouslySetInnerHTML:{__html:s}}),r.ZP.createElement("span",{dangerouslySetInnerHTML:{__html:t}})):r.ZP.createElement("span",{dangerouslySetInnerHTML:{__html:e}})):null}}var ie=ne;const oe=g.__;class le extends r.wA{render(){var e;const{result_type:t,fields:s,highlight:a}=this.props.result;if("post"!==t)return null;const n=Array.isArray(s["image.url.raw"])?s["image.url.raw"][0]:s["image.url.raw"],i=Array.isArray(a.title)&&a.title[0].length>0?a.title[0]:oe("No title","jetpack"),o="string"==typeof this.props.searchQuery&&""!==this.props.searchQuery.trim(),l=i.includes("<mark>"),c=o&&!l&&Array.isArray(a.content)&&(null===(e=a.content[0])||void 0===e?void 0:e.length)>0;return r.ZP.createElement("li",{className:"jetpack-instant-search__search-result jetpack-instant-search__search-result-product"},r.ZP.createElement("a",{className:"jetpack-instant-search__search-result-product-img-link",href:`//${s["permalink.url.raw"]}`,onClick:this.props.onClick},r.ZP.createElement("div",{className:"jetpack-instant-search__search-result-product-img-container "+(n?"":"jetpack-instant-search__search-result-product-img-container--placeholder")},n?r.ZP.createElement(K,{alt:s["title.default"],className:"jetpack-instant-search__search-result-product-img",isPhotonEnabled:this.props.isPhotonEnabled,src:`//${n}`}):r.ZP.createElement("div",{className:"jetpack-instant-search__search-result-product-img"},r.ZP.createElement(k,{icon:"block",style:{}}),r.ZP.createElement(k,{icon:"image",style:{},title:oe("Does not have an image","jetpack")})))),r.ZP.createElement("h3",{className:"jetpack-instant-search__search-result-title jetpack-instant-search__search-result-product-title"},r.ZP.createElement("a",{className:"jetpack-instant-search__search-result-title-link",href:`//${s["permalink.url.raw"]}`,onClick:this.props.onClick,dangerouslySetInnerHTML:{__html:i}})),r.ZP.createElement(ie,{price:s["wc.price"],salePrice:s["wc.sale_price"],formattedPrice:s["wc.formatted_price"],formattedRegularPrice:s["wc.formatted_regular_price"],formattedSalePrice:s["wc.formatted_sale_price"]}),!!s["meta._wc_average_rating.double"]&&r.ZP.createElement(ae,{count:s["meta._wc_review_count.long"],rating:s["meta._wc_average_rating.double"],permalink:`//${s["permalink.url.raw"]}`}),c&&r.ZP.createElement("div",{className:"jetpack-instant-search__search-result-product-match"},r.ZP.createElement("mark",null,r.ZP.createElement(k,{icon:"search",style:{},title:!1}),r.ZP.createElement("span",null,(0,g.sprintf)(oe("Matches %s","jetpack"),oe("comment"in a?"comments":"content","jetpack"))))))}}var ce=le;let pe=!0;const he={};function ue(e,t,s=!1){(s||pe)&&window._tkq.push(["recordEvent",e,{...he,...t}])}function de(e,t=!1){ue("jetpack_instant_search_traintracks_render",e,t)}class me extends r.wA{constructor(...e){super(...e),o()(this,"onClick",(()=>{this.props.railcar&&function(e,t=!1){ue("jetpack_instant_search_traintracks_interact",e,t)}({...this.getCommonTrainTracksProps(),action:"click"})}))}componentDidMount(){this.props.railcar&&de(this.getCommonTrainTracksProps())}componentDidUpdate(e){this.props.railcar!==e.railcar&&this.props.railcar&&de(this.getCommonTrainTracksProps())}getCommonTrainTracksProps(){return{fetch_algo:this.props.railcar.fetch_algo,fetch_position:this.props.railcar.fetch_position,fetch_query:this.props.railcar.fetch_query,railcar:this.props.railcar.railcar,rec_blog_id:this.props.railcar.rec_blog_id,rec_post_id:this.props.railcar.rec_post_id,session_id:this.props.railcar.session_id,ui_algo:"jetpack-instant-search-ui/v1",ui_position:this.props.index}}render(){if(this.props.resultFormat===_.LI)return r.ZP.createElement(ce,z()({onClick:this.onClick},this.props));if(this.props.resultFormat===_.Pz){const e=this.props.staticFilters&&this.props.staticFilters.group_id&&this.props.staticFilters.group_id!==_.Bk;return r.ZP.createElement(se,z()({onClick:this.onClick},this.props,{isMultiSite:e}))}return r.ZP.createElement(q,z()({onClick:this.onClick},this.props))}}var ge=me;const _e=Object.freeze(["post_types","category","post_format","post_tag","month_post_date","month_post_date_gmt","month_post_modified","month_post_modified_gmt","year_post_date","year_post_date_gmt","year_post_modified","year_post_modified_gmt"]);function ye(e=(()=>{var e;return null===(e=window[_.W1])||void 0===e?void 0:e.widgets})(),t=(()=>{var e;return null===(e=window[_.W1])||void 0===e?void 0:e.widgetsOutsideOverlay})()){const s=new Set(_e);return[...null!=e?e:[],...null!=t?t:[]].map((e=>e.filters)).filter((e=>Array.isArray(e))).reduce(((e,t)=>e.concat(t)),[]).filter((e=>"taxonomy"===e.type)).forEach((e=>s.add(e.taxonomy))),[...s]}function ve(){var e;return null!==(e=window[_.W1])&&void 0!==e&&e.staticFilters?window[_.W1].staticFilters:[]}function fe(){const e=ve(),t=new Set;return e.forEach((e=>t.add(e.filter_id))),[...t]}function Ee(e){return e.filters.map(ke).filter((e=>"string"==typeof e))}function ke(e){return"date_histogram"===e.type?`${e.interval}_${e.field}`:"taxonomy"===e.type?`${e.taxonomy}`:"post_type"===e.type?"post_types":"group"===e.type?e.filter_id:null}function Pe(e){return e.includes("month")?{field:e.split("month_").pop(),type:"date_histogram",interval:"month"}:e.includes("year")?{field:e.split("year_").pop(),type:"date_histogram",interval:"year"}:"post_types"===e?{type:"post_type"}:"group"===e?{type:"group"}:{type:"taxonomy",taxonomy:e}}function we(e){return"date_histogram"===e.type?"date":"taxonomy"===e.type?"taxonomy":"post_type"===e.type?"postType":"group"===e.type?"group":void 0}function Se(e,t=!0){return{type:"SET_SEARCH_QUERY",query:e,propagateToWindow:t}}function be(e,t=!0){return{type:"SET_SORT",sort:e,propagateToWindow:t}}function Ze(e,t,s=!0){return{type:"SET_FILTER",name:e,value:t,propagateToWindow:s}}function je(e,t,s=!0){return{type:"SET_STATIC_FILTER",name:e,value:t,propagateToWindow:s}}function Ce(e=!0){return{type:"CLEAR_FILTERS",propagateToWindow:e}}const Te=g.__;class Ne extends r.wA{constructor(...e){super(...e),o()(this,"onChangeFilter",((e,t)=>{this.props.setFilter(e,t),this.props.onChange&&this.props.onChange()})),o()(this,"onChangeStaticFilter",((e,t)=>{!function(e,t=!1){ue("jetpack_instant_search_static_filter_select",e,t)}({filterName:e,filterValue:t}),this.props.setStaticFilter(e,t),this.props.onChange&&this.props.onChange()})),o()(this,"onClearFilters",(e=>{e.preventDefault(),"click"!==e.type&&("keydown"!==e.type||"Enter"!==e.key&&" "!==e.key)||(this.props.clearFilters(),this.props.onChange&&this.props.onChange())})),o()(this,"renderFilterComponent",(({configuration:e,results:t})=>t&&r.ZP.createElement(te,{aggregation:t,configuration:e,locale:this.props.locale,onChange:this.onChangeFilter,postTypes:this.props.postTypes,type:we(e),value:this.props.filters[ke(e)]}))),o()(this,"renderStaticFilterComponent",(e=>e.hasOwnProperty("visible")&&!e.visible?null:r.ZP.createElement(te,{aggregation:[],configuration:e,locale:this.props.locale,onChange:this.onChangeStaticFilter,postTypes:this.props.postTypes,type:we(e),value:this.props.staticFilters[ke(e)]})))}hasActiveFilters(){return Object.keys(this.props.filters).length>0}render(){var e,t,s,a;if(!this.props.widget)return null;const n=ve(),i=null===(e=this.props.results)||void 0===e?void 0:e.aggregations;return r.ZP.createElement("div",{className:"jetpack-instant-search__search-filters"},this.props.showTitle&&r.ZP.createElement("div",{className:"jetpack-instant-search__search-filters-title"},Te("Filter options","jetpack")),this.props.showClearFiltersButton&&this.hasActiveFilters()&&r.ZP.createElement("a",{class:"jetpack-instant-search__clear-filters-link",href:"#",onClick:this.onClearFilters,onKeyDown:this.onClearFilters,role:"button",tabIndex:"0"},Te("Clear filters","jetpack")),(null===(t=this.props.widget)||void 0===t?void 0:t.filters)&&this.props.widget.filters.length>0&&n.map(this.renderStaticFilterComponent),null===(s=this.props.widget)||void 0===s||null===(a=s.filters)||void 0===a?void 0:a.map((e=>i?{configuration:e,results:i[e.filter_id]}:null)).filter((e=>!!e)).filter((({results:e})=>!!e&&Array.isArray(e.buckets)&&e.buckets.length>0)).map(this.renderFilterComponent))}}o()(Ne,"defaultProps",{showClearFiltersButton:!0,showTitle:!0});var Oe=(0,n.$j)(null,{clearFilters:Ce,setFilter:Ze,setStaticFilter:je})(Ne);class Ae extends r.wA{constructor(...e){super(...e),o()(this,"container",(0,r.Vf)())}componentDidMount(){const e=document.getElementsByClassName("jetpack-instant-search__widget-area")[0];e&&(e.style.removeProperty("display"),this.container.current.appendChild(e))}shouldComponentUpdate(){return!1}render(){return r.ZP.createElement("div",{className:"jetpack-instant-search__widget-area-container",ref:this.container})}}const Le=g.__,Fe="#fff",xe=r.ZP.createElement("svg",{className:"jetpack-instant-search__jetpack-colophon-logo",height:12,width:12,viewBox:"0 0 32 32"},r.ZP.createElement("path",{className:"jetpack-logo__icon-circle",fill:"#069e08",d:"M16,0C7.2,0,0,7.2,0,16s7.2,16,16,16s16-7.2,16-16S24.8,0,16,0z"}),r.ZP.createElement("polygon",{className:"jetpack-logo__icon-triangle",fill:Fe,points:"15,19 7,19 15,3 "}),r.ZP.createElement("polygon",{className:"jetpack-logo__icon-triangle",fill:Fe,points:"17,29 17,13 25,13 "}));var Re=e=>{const t="string"==typeof e.locale?e.locale.split("-",1)[0]:null,s=t&&"en"!==t?"https://"+t+".jetpack.com/search?utm_source=poweredby":"https://jetpack.com/search?utm_source=poweredby";return r.ZP.createElement("div",{className:"jetpack-instant-search__jetpack-colophon"},r.ZP.createElement("a",{href:s,rel:"external noopener noreferrer nofollow",target:"_blank",className:"jetpack-instant-search__jetpack-colophon-link"},xe,r.ZP.createElement("span",{className:"jetpack-instant-search__jetpack-colophon-text"},Le("Search powered by Jetpack","jetpack"))))},Ie=e=>r.ZP.createElement("div",{className:"jetpack-instant-search__sidebar"},r.ZP.createElement(Oe,{filters:e.filters,staticFilters:e.staticFilters,loading:e.isLoading,locale:e.locale,postTypes:e.postTypes,results:e.response,showClearFiltersButton:!0,widget:e.widgetOutsideOverlay}),r.ZP.createElement(Ae,null),e.widgets.map((t=>(0,r.jz)(r.ZP.createElement("div",{id:`${t.widget_id}-portaled-wrapper`,className:"jetpack-instant-search__portaled-wrapper"},r.ZP.createElement(Oe,{filters:e.filters,staticFilters:e.staticFilters,loading:e.isLoading,locale:e.locale,postTypes:e.postTypes,results:e.response,showClearFiltersButton:!1,showTitle:!1,widget:t})),document.getElementById(`${t.widget_id}-wrapper`)))),e.showPoweredBy&&r.ZP.createElement(Re,{locale:e.locale}));const ze=g.__,He=g._n,Qe=ze,Ve=He;class Me extends r.wA{constructor(...e){super(...e),o()(this,"state",{shouldShowMobileSecondary:!1}),o()(this,"toggleMobileSecondary",(e=>{"click"!==e.type&&("keydown"!==e.type||"Enter"!==e.key&&" "!==e.key)||(" "===e.key&&e.preventDefault(),this.setState((e=>({shouldShowMobileSecondary:!e.shouldShowMobileSecondary}))))})),o()(this,"closeOverlay",(e=>{e.preventDefault(),this.props.closeOverlay()})),o()(this,"onKeyPressHandler",(e=>{"Enter"===e.key&&(e.preventDefault(),this.props.closeOverlay())}))}hasFilterOptions(){var e,t;let s=[...this.props.widgets];return(null===(e=this.props.widgetOutsideOverlay)||void 0===e||null===(t=e.filters)||void 0===t?void 0:t.length)>0&&(s=[this.props.widgetOutsideOverlay,...s]),s.length>0}getSearchTitle(){const{total:e=0,corrected_query:t=!1}=this.props.response,s=""!==this.props.searchQuery,r=!1!==t,a=(new Intl.NumberFormat).format(e),n=this.props.staticFilters&&this.props.staticFilters.group_id&&this.props.staticFilters.group_id!==_.Bk;if(this.props.isLoading)return Qe(s?"Searching…":"Loading popular results…","jetpack");if(0===e||this.props.hasError)return Qe("No results found","jetpack");if(s&&r)return(0,g.sprintf)(Ve('Found %s result for "%s"','Found %s results for "%s"',e,"jetpack"),a,t);if(n){var i;const t=ve().filter((e=>"group_id"===e.filter_id)),s=1===t.length&&t[0].values?t[0].values.filter((e=>e.value!==_.Bk)):{},r=null!==(i=s[0])&&void 0!==i&&i.name?s[0].name:Qe("All P2","jetpack");return(0,g.sprintf)(Ve("Found %1$s result in %2$s","Found %1$s results in %2$s",e,"jetpack"),a,r)}return s?(0,g.sprintf)(Ve("Found %s result","Found %s results",e,"jetpack"),a,this.props.searchQuery):Qe("Showing popular results","jetpack")}renderPrimarySection(){const{highlightColor:e,searchQuery:t}=this.props,{results:s=[],total:a=0,corrected_query:n=!1}=this.props.response,i=function(e){const t=function(e){let t;return"#"===e[0]&&(t=e.substring(1)),3===t.length&&(t=t.split("").map((e=>`${e}${e}`)).join("")),t}(e);return(299*parseInt(t.substr(0,2),16)+587*parseInt(t.substr(2,2),16)+114*parseInt(t.substr(4,2),16))/1e3>=128?"black":"white"}(e),o=!1!==n,l=a>0;return r.ZP.createElement(r.HY,null,r.ZP.createElement("style",{dangerouslySetInnerHTML:{__html:`\n\t\t\t\t\t\t\t.jetpack-instant-search *::selection,\n\t\t\t\t\t\t\t.jetpack-instant-search .jetpack-instant-search__search-results .jetpack-instant-search__search-results-primary .jetpack-instant-search__search-result mark {\n\t\t\t\t\t\t\t\tcolor: ${i};\n\t\t\t\t\t\t\t\tbackground-color: ${e};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`}}),r.ZP.createElement("div",{className:"jetpack-instant-search__search-results-title"},this.getSearchTitle()),l&&o&&r.ZP.createElement("p",{className:"jetpack-instant-search__search-results-unused-query"},(0,g.sprintf)(Qe('No results for "%s"',"jetpack"),t)),this.props.hasError&&r.ZP.createElement(P,{type:"warning"},Qe("It looks like you're offline. Please reconnect for results.","jetpack")),l&&!this.props.hasError&&this.props.response._isOffline&&r.ZP.createElement(P,{type:"warning"},Qe("It looks like you're offline. Please reconnect to load the latest results.","jetpack")),l&&!this.props.hasError&&r.ZP.createElement("ol",{className:`jetpack-instant-search__search-results-list is-format-${this.props.resultFormat}`},s.map(((e,t)=>r.ZP.createElement(ge,{index:t,staticFilters:this.props.staticFilters,isPhotonEnabled:this.props.isPhotonEnabled,locale:this.props.locale,railcar:this.props.isVisible?e.railcar:null,result:e,resultFormat:this.props.resultFormat,searchQuery:this.props.searchQuery})))),l&&this.props.hasNextPage&&r.ZP.createElement("div",{className:"jetpack-instant-search__search-results-pagination"},r.ZP.createElement(b,{enableLoadOnScroll:this.props.enableLoadOnScroll,isLoading:this.props.isLoading,onLoadNextPage:this.props.onLoadNextPage})))}renderSecondarySection(){return r.ZP.createElement(Ie,{filters:this.props.filters,staticFilters:this.props.staticFilters,isLoading:this.props.isLoading,locale:this.props.locale,postTypes:this.props.postTypes,response:this.props.response,showPoweredBy:this.props.showPoweredBy,widgets:this.props.widgets,widgetOutsideOverlay:this.props.widgetOutsideOverlay})}render(){return r.ZP.createElement("div",{"aria-hidden":!0===this.props.isLoading,"aria-live":"polite",className:"jetpack-instant-search__search-results"},r.ZP.createElement("div",{className:"jetpack-instant-search__search-results-controls"},r.ZP.createElement(R,{className:"jetpack-instant-search__search-results-search-form",isVisible:this.props.isVisible,onChangeSearch:this.props.onChangeSearch,searchQuery:this.props.searchQuery}),r.ZP.createElement("button",{className:"jetpack-instant-search__overlay-close",onClick:this.closeOverlay,onKeyPress:this.onKeyPressHandler,tabIndex:"0","aria-label":Qe("Close search results","jetpack")},r.ZP.createElement(k,{icon:"cross",size:"24","aria-hidden":"true",focusable:"false"}))),r.ZP.createElement(C,{enableSort:this.props.enableSort,onChangeSort:this.props.onChangeSort,resultFormat:this.props.resultFormat,sort:this.props.sort},(this.hasFilterOptions()||this.props.hasNonSearchWidgets)&&r.ZP.createElement("div",{role:"button",onClick:this.toggleMobileSecondary,onKeyDown:this.toggleMobileSecondary,tabIndex:"0",className:"jetpack-instant-search__search-results-filter-button"},Qe("Filters","jetpack"),r.ZP.createElement(k,{icon:"chevron-down",size:16,alt:Qe("Show search filters","jetpack"),"aria-hidden":"true"}),r.ZP.createElement("span",{className:"screen-reader-text assistive-text"},this.state.shouldShowMobileSecondary?Qe("Hide filters","jetpack"):Qe("Show filters","jetpack")))),r.ZP.createElement("div",{className:"jetpack-instant-search__search-results-content"},r.ZP.createElement("div",{className:"jetpack-instant-search__search-results-primary"},this.renderPrimarySection()),r.ZP.createElement("div",{className:["jetpack-instant-search__search-results-secondary",(this.state.shouldShowMobileSecondary?"jetpack-instant-search__search-results-secondary--show-as-modal":"")+" "].join(" ")},this.renderSecondarySection())))}}var $e=Me,Ue=s(44090);function De(e,t,s){if(!e)return"";const r=decodeURIComponent(e);return(!t||"false"!==r)&&(!(!t||"true"!==r)||(s&&0*+r==0?+r:r))}function We(e=window.location.search){return function(e,t,s){let r,a;const n={},i=e.split("&");for(t=void 0===t||t,s=void 0===s||s;r=i.shift();)r=r.split("="),a=r.shift(),void 0!==n[a]?n[a]=[].concat(n[a],De(r.shift(),t,s)):n[a]=De(r.shift(),t,s);return n}(e.substring(1),!1,!1)}function Be(e){!function(e){if(history.pushState){const t=new window.URL(window.location.href);window[_.W1]&&"homeUrl"in window[_.W1]&&(t.href=window[_.W1].homeUrl),t.search=e,window.history.pushState(null,null,t.toString())}}((0,Ue.c)(e))}function qe(e){return e.response}function Ye(e){return e.hasError}function Ke(e){var t;return!Ye(e)&&(null===(t=qe(e))||void 0===t?void 0:t.page_handle)}function Ge(e){return e.isLoading}function Je(e){return e.searchQuery}function Xe(e,t){return"string"!=typeof t&&(t=_.PP),"string"==typeof e.sort?e.sort:t}function et(e){return e.filters}function tt(e){return e.staticFilters}function st(e){return null!==Je(e)||function(e){return Object.keys(e.filters).length>0}(e)||function(e){return Object.keys(e.staticFilters).length>0}(e)||null!==e.sort}function rt(e){if(!e.serverOptions.widgets||!e.filters)return{};const t=function(e=(()=>{var e;return null===(e=window[_.W1])||void 0===e?void 0:e.widgets})()){const t=function(e=(()=>{var e;return null===(e=window[_.W1])||void 0===e?void 0:e.widgets})()){var t;return null!==(t=null==e?void 0:e.map(Ee).reduce(((e,t)=>e.concat(t)),[]))&&void 0!==t?t:[]}(e);return ye().filter((e=>!t.includes(e)))}(e.serverOptions.widgets);return{filters:Object.keys(e.filters).filter((e=>t.includes(e))).map(Pe)}}function at(e){return e.isHistoryNavigation}class nt extends r.wA{constructor(){super(...arguments),o()(this,"getResultFormat",(()=>{const e=function(){const e=We();return _.bk.includes(e.result_format)?e.result_format:null}();return this.props.staticFilters&&this.props.staticFilters.group_id&&this.props.staticFilters.group_id!==_.Bk?_.Pz:e||this.state.overlayOptions.resultFormat})),o()(this,"initializeStaticFilters",(()=>{const e=ve();e.length>0&&0===Object.keys(this.props.staticFilters).length&&e.forEach((e=>this.props.setStaticFilter(e.filter_id,e.selected,!0)))})),o()(this,"hideResults",(e=>{this.props.shouldIntegrateWithDom&&function(e,t,s=!1){if(history.pushState&&history.replaceState){const r=new URL(e),a=We(r.search),n=[...ye(),...fe(),"s","sort"],i=Object.keys(a).some((e=>n.includes(e)));if(i&&n.forEach((e=>delete a[e])),r.search=(0,Ue.c)(a),s?window.history.replaceState(null,null,r.toString()):window.history.pushState(null,null,r.toString()),i)return void window.location.reload();t()}}(this.props.initialHref,(()=>{this.setState({isVisible:!1}),this.props.clearQueryValues()}),e)})),o()(this,"toggleResults",(e=>{this.props.shouldIntegrateWithDom&&this.state.isVisible!==e&&(e&&this.initializeStaticFilters(),this.setState({isVisible:e}))})),o()(this,"showResults",this.toggleResults.bind(this,!0)),o()(this,"onChangeQueryString",(e=>{this.getResults(),this.props.hasActiveQuery&&!this.state.isVisible&&this.showResults(),!this.props.hasActiveQuery&&e&&this.hideResults(e),null!==this.props.searchQuery&&document.querySelectorAll(this.props.themeOptions.searchInputSelector).forEach((e=>{e.value=this.props.searchQuery}))})),o()(this,"loadNextPage",(()=>{this.props.hasNextPage&&this.getResults({pageHandle:this.props.response.page_handle})})),o()(this,"getResults",(({pageHandle:e}={})=>{this.props.makeSearchRequest({aggregations:e?{}:this.props.aggregations,excludedPostTypes:this.state.overlayOptions.excludedPostTypes,filter:this.props.filters,staticFilters:this.props.staticFilters,pageHandle:e,query:this.props.searchQuery,resultFormat:this.getResultFormat(),siteId:this.props.options.siteId,sort:this.props.sort,postsPerPage:this.props.options.postsPerPage,adminQueryFilter:this.props.options.adminQueryFilter,isInCustomizer:this.props.isInCustomizer})})),o()(this,"updateOverlayOptions",((e,t)=>{this.setState((t=>({overlayOptionsCustomizerOverride:{...t.overlayOptionsCustomizerOverride,...e}})),t)})),this.state={isVisible:!!this.props.initialIsVisible,overlayOptionsCustomizerOverride:{}},this.getResults=c()(this.getResults,200),this.props.enableAnalytics?this.initializeAnalytics():pe=!1,this.props.shouldIntegrateWithDom?this.props.initializeQueryValues():this.props.disableQueryStringIntegration()}static getDerivedStateFromProps(e,t){return{overlayOptions:{...e.overlayOptions,...t.overlayOptionsCustomizerOverride}}}componentDidMount(){this.getResults(),this.props.hasActiveQuery&&this.showResults()}componentDidUpdate(e,t){e.searchQuery===this.props.searchQuery&&e.sort===this.props.sort&&h()(e.filters)===h()(this.props.filters)&&h()(e.staticFilters)===h()(this.props.staticFilters)||this.onChangeQueryString(this.props.isHistoryNavigation),t.overlayOptions.defaultSort!==this.state.overlayOptions.defaultSort&&this.props.setSort(this.state.overlayOptions.defaultSort),h()(t.overlayOptions.excludedPostTypes)!==h()(this.state.overlayOptions.excludedPostTypes)&&this.getResults()}initializeAnalytics(){!function(e=!1){(e||pe)&&(window._tkq=window._tkq||[])}(),function(e=!1){(e||pe)&&window._tkq.push(["clearIdentity"])}(),function(e,t=!1){(t||pe)&&(he.blog_id=e)}(this.props.options.siteId)}render(){const e=this.getResultFormat(),t=this.props.shouldCreatePortal?r.jz:e=>e;return r.ZP.createElement(r.HY,null,this.props.isInCustomizer&&r.ZP.createElement(d,{showResults:this.showResults,toggleResults:this.toggleResults,updateOverlayOptions:this.updateOverlayOptions}),this.props.shouldIntegrateWithDom&&r.ZP.createElement(m,{initializeQueryValues:this.props.initializeQueryValues,isVisible:this.state.isVisible,overlayOptions:this.state.overlayOptions,setFilter:this.props.setFilter,setSearchQuery:this.props.setSearchQuery,showResults:this.showResults,themeOptions:this.props.themeOptions}),t(r.ZP.createElement(v,{closeColor:this.state.overlayOptions.closeColor,closeOverlay:this.hideResults,colorTheme:this.state.overlayOptions.colorTheme,hasOverlayWidgets:this.props.hasOverlayWidgets,isVisible:this.state.isVisible},r.ZP.createElement($e,{closeOverlay:this.hideResults,enableLoadOnScroll:this.state.overlayOptions.enableInfScroll,enableSort:this.state.overlayOptions.enableSort,filters:this.props.filters,staticFilters:this.props.staticFilters,hasError:this.props.hasError,hasNextPage:this.props.hasNextPage,highlightColor:this.state.overlayOptions.highlightColor,isLoading:this.props.isLoading,isPhotonEnabled:this.props.options.isPhotonEnabled,isPrivateSite:this.props.options.isPrivateSite,isVisible:this.state.isVisible,locale:this.props.options.locale,onChangeSearch:this.props.setSearchQuery,onChangeSort:this.props.setSort,onLoadNextPage:this.loadNextPage,overlayTrigger:this.state.overlayOptions.overlayTrigger,postTypes:this.props.options.postTypes,response:this.props.response,resultFormat:e,searchQuery:this.props.searchQuery,showPoweredBy:this.state.overlayOptions.showPoweredBy,sort:this.props.sort,widgets:this.props.options.widgets,widgetOutsideOverlay:this.props.widgetOutsideOverlay,hasNonSearchWidgets:this.props.options.hasNonSearchWidgets})),document.body))}}o()(nt,"defaultProps",{overlayOptions:{},widgets:[]});var it=(0,n.$j)(((e,t)=>({filters:et(e),staticFilters:tt(e),hasActiveQuery:st(e),hasError:Ye(e),isHistoryNavigation:at(e),hasNextPage:Ke(e),isLoading:Ge(e),response:qe(e),searchQuery:Je(e),sort:Xe(e,t.overlayOptions.defaultSort),widgetOutsideOverlay:rt(e)})),{clearQueryValues:function(){return{type:"CLEAR_QUERY_VALUES"}},disableQueryStringIntegration:function(){return{type:"DISABLE_QUERY_STRING_INTEGRATION"}},initializeQueryValues:function({isHistoryNavigation:e=!1}={}){return{type:"INITIALIZE_QUERY_VALUES",isHistoryNavigation:e}},makeSearchRequest:function(e){return{type:"MAKE_SEARCH_REQUEST",options:e}},setStaticFilter:je,setFilter:Ze,setSearchQuery:Se,setSort:be})(nt),ot=s(88118),lt=s(5857);let ct;const pt=(0,lt.Z)(30,5*_.AG),ht=(0,lt.Z)(30,30*_.AG);function ut(e=[]){const t={};return e.forEach((({filters:e})=>e.forEach((e=>{t[e.filter_id]=function(e){switch(e.type){case"date_histogram":return{date_histogram:{field:"post_date_gmt"===e.field?"date_gmt":"date",interval:e.interval}};case"taxonomy":{let t=`taxonomy.${e.taxonomy}.slug_slash_name`;return"post_tag"===e.taxonomy?t="tag.slug_slash_name":"category"===e.taxonomy&&(t="category.slug_slash_name"),{terms:{field:t,size:e.count}}}case"post_type":return{terms:{field:e.type,size:e.count}}}}(e)})))),t}St();const dt=/(\d{4})-(\d{2})-(\d{2})/;function mt(e,t,s){let r,a;"year"===s&&([,r,,]=t.match(dt)),"month"===s&&([,r,a]=t.match(dt));let n="",i="";if(a){const e=+a+1,t=e<10?`0${e}`:`${e}`;n=`${r}-${a}-01`,i=e<=12?`${r}-${t}-01`:+r+1+"-01-01"}else r&&(n=`${r}-01-01`,i=+r+1+"-01-01");return{range:{[e]:{gte:n,lt:i}}}}const gt=new Map([["post_types",e=>({term:{post_type:e}})],["category",e=>({term:{"category.slug":e}})],["post_tag",e=>({term:{"tag.slug":e}})],["month_post_date",e=>mt("date",e,"month")],["month_post_date_gmt",e=>mt("date_gmt",e,"month")],["month_post_modified",e=>mt("date",e,"month")],["month_post_modified_gmt",e=>mt("date_gmt",e,"month")],["year_post_date",e=>mt("date",e,"year")],["year_post_date_gmt",e=>mt("date_gmt",e,"year")],["year_post_modified",e=>mt("date",e,"year")],["year_post_modified_gmt",e=>mt("date_gmt",e,"year")]]);function _t(e){const t={};return Object.keys(e).forEach((s=>{const r=e[s];"group_id"===s&&r!==_.Bk&&(t[s]=r)})),t}function yt(e,t,s){const r={bool:{must:[]}};return ye().filter((t=>{return s=e[t],Array.isArray(s)&&s.length>0;var s})).forEach((t=>{e[t].forEach((e=>{gt.has(t)?r.bool.must.push(gt.get(t)(e)):r.bool.must.push({term:{[`taxonomy.${t}.slug`]:e}})}))})),t&&r.bool.must.push(t),(null==s?void 0:s.length)>0&&r.bool.must.push({bool:{must_not:s.map((e=>gt.get("post_types")(e)))}}),r}const vt=new Map([["oldest","date_asc"],["newest","date_desc"],["relevance","score_default"]]);function ft(e){return["price_asc","price_desc","rating_desc"].includes(e)?e:vt.get(e,"score_default")}function Et({aggregations:e,excludedPostTypes:t,filter:s,staticFilters:r,pageHandle:a,query:n,resultFormat:i,sort:o,postsPerPage:l=10,adminQueryFilter:c,isInCustomizer:p=!1}){null===n&&(n="");let h=["date","permalink.url.raw","tag.name.default","category.name.default","post_type","has.image","shortcode_types","image.url.raw"];(i===_.LI||p)&&(h=h.concat(["meta._wc_average_rating.double","meta._wc_review_count.long","wc.formatted_price","wc.formatted_regular_price","wc.formatted_sale_price","wc.price","wc.sale_price"])),r&&r.group_id&&r.group_id!==_.Bk&&(h=h.concat(["author","blog_name","blog_icon_url"]));let u={aggregations:e,fields:h,highlight_fields:["title","content","comments"],filter:yt(s,c,t),query:encodeURIComponent(n),sort:ft(o),page_handle:a,size:l};return r&&Object.keys(r).length>0&&(u={...u,..._t(r)}),(0,Ue.c)((0,ot.x)(u))}function kt(e,t){return new Promise((function(s,r){e({path:t,apiVersion:"1.3"},(function(e,t,a){e&&r(e),s(t,a)}))}))}function Pt(e){return function(t){const s=pt.get(e)||ht.get(e);if("AbortError"===t.name)return s?{_isCached:!0,_isError:!1,_isOffline:!1,...s}:null;if(s)return{_isCached:!0,_isError:!0,_isOffline:!1,...s};throw t}}function wt(e,t){return function(s){const r={...s,requestId:t};return pt.set(e,r),ht.set(e,r),r}}function St(){ct&&ct.abort(),ct=new AbortController}var bt=s(74978),Zt=s(2601),jt=s.n(Zt);let Ct=0,Tt=!0;var Nt={CLEAR_FILTERS:function(e){if(!1===e.propagateToWindow||!Tt)return;const t=We();ye().forEach((e=>delete t[e])),fe().forEach((e=>delete t[e])),Be(t)},DISABLE_QUERY_STRING_INTEGRATION:function(){Tt=!1},INITIALIZE_QUERY_VALUES:function(e,t){const s=We();let r;"s"in s?t.dispatch(Se(s.s,!1)):t.dispatch(Se(null,!1)),_.kQ.includes(s.sort)?r=s.sort:"date"===s.orderby?r="string"==typeof s.order&&s.order.toUpperCase()===_.oy?"oldest":"newest":"relevance"===s.orderby&&(r="relevance"),"string"==typeof r&&t.dispatch(be(r,!1)),t.dispatch(Ce(!1)),ye().filter((e=>e in s)).forEach((e=>t.dispatch(Ze(e,s[e],!1)))),fe().filter((e=>e in s)).forEach((e=>t.dispatch(je(e,s[e],!1))))},MAKE_SEARCH_REQUEST:function(e,t){Ct++,function(e,t){const r=h()(Array.from(arguments));if(!navigator.onLine&&ht.get(r))return Promise.resolve(ht.get(r)).then((e=>({_isCached:!0,_isError:!1,_isOffline:!0,...e})));if(pt.get(r))return Promise.resolve(pt.get(r)).then((e=>({_isCached:!0,_isError:!1,_isOffline:!1,...e})));const a=Et(e),n=Pt(r),i=wt(r,t),o=`/sites/${e.siteId}/search?${a}`,{apiNonce:l,apiRoot:c,isPrivateSite:p,isWpcom:u}=window[_.W1];if(p&&u)return s.e(52).then(s.bind(s,87052)).then((({default:e})=>kt(e,o).catch(n).then(i)));const d=`https://public-api.wordpress.com/rest/v1.3${o}`,m=`${c}wpcom/v2/search?${a}`,g=p?m:d;return St(),fetch(g,{headers:p?{"X-WP-Nonce":l}:{},credentials:p?"include":"same-origin",signal:ct.signal}).then((e=>200!==e.status?Promise.reject(`Unexpected response from API with status code ${e.status}.`):e)).then((e=>e.json())).then(i).catch(n)}(e.options,Ct).then((s=>{null!==s&&t.dispatch(function({options:e,response:t}){return{type:"RECORD_SUCCESSFUL_SEARCH_REQUEST",options:e,response:t}}({options:e.options,response:s}))})).catch((e=>{console.error("Jetpack Search encountered an error:",e),t.dispatch(function(e){return{type:"RECORD_FAILED_SEARCH_REQUEST",error:e}}(e))}))},SET_FILTER:function(e){if(!1===e.propagateToWindow||!Tt)return;if(!ye().includes(e.name))return;const t=We();t[e.name]=e.value,Be(t)},SET_STATIC_FILTER:function(e){if(!1===e.propagateToWindow)return;if(!fe().includes(e.name))return;const t=We();t[e.name]=e.value,Be(t)},SET_SEARCH_QUERY:function(e){if(!1===e.propagateToWindow||!Tt)return;const t=We();null!==e.query?t.s=e.query:delete t.s,Be(t)},SET_SORT:function(e){if(!1===e.propagateToWindow||!Tt)return;if(!_.kQ.includes(e.sort))return;const t=We();t.sort=e.sort,delete t.order,delete t.orderby,Be(t)}},Ot=(0,bt.UY)({filters:function(e={},t){switch(t.type){case"CLEAR_FILTERS":case"CLEAR_QUERY_VALUES":return{};case"SET_FILTER":if(!ye().includes(t.name)||!Array.isArray(t.value)&&"string"!=typeof t.value)return e;if(0===t.value.length){const s={...e};return delete s[t.name],s}return{...e,[t.name]:"string"==typeof t.value?[t.value]:t.value}}return e},staticFilters:function(e={},t){switch(t.type){case"CLEAR_QUERY_VALUES":return{};case"SET_STATIC_FILTER":return fe().includes(t.name)?{...e,[t.name]:t.value}:e}return e},hasError:function(e=!1,t){switch(t.type){case"MAKE_SEARCH_REQUEST":case"RECORD_SUCCESSFUL_SEARCH_REQUEST":return!1;case"RECORD_FAILED_SEARCH_REQUEST":return!0}return e},isLoading:function(e=!1,t){switch(t.type){case"MAKE_SEARCH_REQUEST":return!0;case"RECORD_SUCCESSFUL_SEARCH_REQUEST":case"RECORD_FAILED_SEARCH_REQUEST":return!1}return e},isHistoryNavigation:function(e=!1,t){switch(t.type){case"INITIALIZE_QUERY_VALUES":return t.isHistoryNavigation;case"SET_SEARCH_QUERY":case"SET_SORT":case"CLEAR_FILTERS":case"SET_FILTER":return!t.propagateToWindow&&e}return e},response:function(e={},t){switch(t.type){case"RECORD_SUCCESSFUL_SEARCH_REQUEST":{if("requestId"in e&&"requestId"in t.response&&e.requestId>t.response.requestId)return e;const s={...t.response};return t.options.pageHandle&&(s.aggregations={..."aggregations"in e&&!Array.isArray(e)?e.aggregations:{},...Array.isArray(s.aggregations)?{}:s.aggregations},s.results=[..."results"in e?e.results:[],...s.results]),Array.isArray(s.results)&&s.results.length>s.total&&(s.total=s.results.length),s}}return e},searchQuery:function(e=null,t){switch(t.type){case"SET_SEARCH_QUERY":return t.query;case"CLEAR_QUERY_VALUES":return null}return e},serverOptions:function(e=(()=>{var e;return null!==(e=window[_.W1])&&void 0!==e?e:{}})()){return e},sort:function(e=null,t){switch(t.type){case"SET_SORT":return _.kQ.includes(t.sort)?t.sort:e;case"CLEAR_QUERY_VALUES":return null}return e}});const At=[jt()(Nt)];var Lt=(0,bt.MT)(Ot,{},(0,bt.md)(...At));function Ft(){window[_.W1]&&"siteId"in window[_.W1]&&(0,a.sY)(r.ZP.createElement(n.zt,{store:Lt},r.ZP.createElement(it,{aggregations:ut([...window[_.W1].widgets,...window[_.W1].widgetsOutsideOverlay]),enableAnalytics:!0,hasOverlayWidgets:!!window[_.W1].hasOverlayWidgets,initialHref:window.location.href,initialIsVisible:window[_.W1].showResults,isInCustomizer:(0,u.bS)(),overlayOptions:window[_.W1].overlayOptions,options:window[_.W1],shouldCreatePortal:!0,shouldIntegrateWithDom:!0,themeOptions:X(window[_.W1])})),document.body)}},84832:function(e,t){const s=()=>{};t.Z=()=>s}}]);
/* Do not modify this file directly. It is compiled from other files. */
/* global ajaxurl */
jQuery(function(a){if("undefined"!=typeof jetpack_empty_spam_button_parameters){var t=a("<div/>").addClass("jetpack-empty-spam-container"),e=a("<a />").addClass("button-secondary").addClass("jetpack-empty-spam").attr("href","#").attr("data-progress-label",jetpack_empty_spam_button_parameters.progress_label).attr("data-success-url",jetpack_empty_spam_button_parameters.success_url).attr("data-failure-url",jetpack_empty_spam_button_parameters.failure_url).attr("data-spam-feedbacks-count",jetpack_empty_spam_button_parameters.spam_count).attr("data-nonce",jetpack_empty_spam_button_parameters.nonce).text(jetpack_empty_spam_button_parameters.label);t.append(e);var s=a("<span />").addClass("jetpack-empty-spam-spinner");t.append(s),a(".tablenav.top .actions, .tablenav.bottom .actions").not(".bulkactions").append(t)}a(document).on("click","#jetpack-check-feedback-spam:not(.button-disabled)",function(t){t.preventDefault(),a("#jetpack-check-feedback-spam:not(.button-disabled)").addClass("button-disabled"),a(".jetpack-check-feedback-spam-spinner").addClass("spinner").show(),function t(e,s){a.post(ajaxurl,{action:"grunion_recheck_queue",offset:e,limit:s},function(a){a.processed<s?window.location.reload():t(e+s,s)})}(0,100)});var p=0,n=0;a(document).on("click",".jetpack-empty-spam",function(t){t.preventDefault(),a(this).hasClass("button-disabled")||(a(".jetpack-empty-spam").addClass("button-disabled").addClass("emptying"),a(".jetpack-empty-spam-spinner").addClass("spinner").addClass("is-active"),a(".jetpack-empty-spam").text(a(".jetpack-empty-spam").data("progress-label").replace("%1$s","0")),p=parseInt(a(this).data("spam-feedbacks-count"),10),function t(){var e=a(".jetpack-empty-spam");var s=e.data("nonce");var c=Math.round(n/p*1e3)/10;e.text(e.data("progress-label").replace("%1$s",c));a.post(ajaxurl,{action:"jetpack_delete_spam_feedbacks",nonce:s}).fail(function(a){window.location.href=e.data("failure-url")}).done(function(a){n+=a.data.counts.deleted,a.data.counts.deleted<a.data.counts.limit?window.location.href=e.data("success-url"):t()})}())})});
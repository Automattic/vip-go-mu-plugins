/*! livepress -v1.3
 * http://livepress.com/
 * Copyright (c) 2015 LivePress, Inc.
 */
function DHelpers(){function a(a){var b=this;b.enable=function(){b.counterContainer=jQuery(a).siblings(".count-update"),b.count=0,b.enabled=!0,b.counterContainer.show()},b.reset=function(){"undefined"!=typeof b.counterContainer&&(b.count=0,b.counterContainer.text("0"))},b.disable=function(){"undefined"!=typeof b.counterContainer&&(b.enabled=!1,b.count=0,b.counterContainer.text("0").hide())},b.increment=function(a){"undefined"!=typeof b.counterContainer&&(b.count+=a||1,b.counterContainer.text(b.count))},b.isEnabled=function(){return b.enabled}}var b=this,c=document.getElementById("lp-pane-errors"),d=jQuery(c);b.saveEEState=function(a){var b=LivepressConfig.post_id;Livepress.storage.set("post-"+b+"-eeenabled",a)},b.getEEState=function(){if("edit"===jQuery.getUrlVar("action")){var a=LivepressConfig.post_id;if(!a)return!1;if("true"===Livepress.storage.get("post-"+a+"-eeenabled"))return!0}return!1},b.hideAndMark=function(a){return a.hide().addClass("spinner-hidden"),a},b.disableAndDisplaySpinner=function(a){var b=jQuery("<div class='lp-spinner'></div>");if(a.is("input")){a.attr("disabled",!0);var c=this.hideAndMark(a.siblings(".button"));b.css("float",c.css("float"))}a.after(b)},b.enableAndHideSpinner=function(a){a.attr("disabled",!1),a.siblings(".button").show(),a.siblings(".lp-spinner").remove()},b.setSwitcherState=function(a){jQuery(document.getElementById("live-switcher")).removeClass("connected"===a?"disconnected":"connected").addClass(a),jQuery(window).trigger(a+".livepress")},b.handleErrors=function(a){console.log(a),d.html(""),d.hide(),jQuery.each(a,function(a,b){var c=document.createElement("p");c.className="lp-pane-error "+a,c.innerHtml=b,d.append(c)}),d.show()},b.clearErrors=function(a){null!==c&&jQuery(c.querySelectorAll(a)).remove()},b.hideErrors=function(){d.hide()},b.createLiveCounter=function(b){return new a(b)},b.setupLivePressTabs=function(){jQuery("#livepress_status_meta_box").hasClass("live")?(jQuery(".livepress-update-form").not(":visible")&&jQuery("#content-livepress").trigger("click"),"true"!==jQuery("a#blogging-tools-link").attr("aria-expanded")&&jQuery("a#blogging-tools-link").trigger("click")):(jQuery(".livepress-update-form").is(":visible")&&jQuery("a.switch-tmce").trigger("click"),"true"===jQuery("a#blogging-tools-link").attr("aria-expanded")&&jQuery("a#blogging-tools-link").trigger("click"))}}var Livepress=Livepress||{};Livepress.ensureExists=function(a){return void 0===a&&(a={}),a};var console=console||{log:function(){}};Livepress.getUpdatePermalink=function(a){var b,c=/livepress-update-([0-9]+)/,d=c.exec(a)[1],e="",f=jQuery(location).attr("protocol")+"//"+jQuery(location).attr("host")+jQuery(location).attr("pathname"),g=jQuery(location).attr("search");return f+=null!==(b=g.match(/\?p=[0-9]+/))?b+"&":"?",e+="lpup=",f+e+d+"#"+a},Livepress.updateShortlinksCache=window.LivepressConfig.shortlink||{},Livepress.getUpdateShortlink=function(a){var b=/livepress-update-([0-9]+)/,c=b.exec(a)[1];return c in Livepress.updateShortlinksCache?Livepress.updateShortlinksCache[c]:jQuery.ajax({url:window.LivepressConfig.ajax_url,xhrFields:{withCredentials:!0},type:"post",async:!1,dataType:"json",data:{action:"lp_update_shortlink",post_id:window.LivepressConfig.post_id,_ajax_nonce:LivepressConfig.lp_update_shortlink_nonce,update_id:c}}).promise()},String.prototype.parseGMT=function(a){var b,c,d=this,e=a||"h:i:s a";return b=Date.parse(d.replace(/-/gi,"/"),"Y/m/d H:i:s"),c=new Date(b),"Invalid Date"===c.toString()?this.toString():c=c.format(e)},String.prototype.replaceAll=function(a,b){var c=this;return c=c.split(a).join(b)},"undefined"==typeof window.twttr&&(window.twttr=function(a,b,c){var d,e,f=a.getElementsByTagName(b)[0];if(!a.getElementById(c))return e=a.createElement(b),e.id=c,e.src="https://platform.twitter.com/widgets.js",f.parentNode.insertBefore(e,f),window.twttr||(d={_e:[],ready:function(a){d._e.push(a)}})}(document,"script","twitter-wjs")),window.location.hash&&twttr.ready(function(a){a.events.bind("loaded",function(a){jQuery.scrollTo(jQuery(window.location.hash))})}),jQuery.fn.getBg=function(){var a,b,c,d=jQuery(this);return a=d.css("background-color"),"transparent"!==a&&"rgba(0, 0, 0, 0)"!==a&&void 0!==a?a:(b=this.parents().filter(function(){return c=d.css("background-color"),"transparent"!==c&&"rgba(0, 0, 0, 0)"!==c}).eq(0).css("background-color"),void(b?d.css("background-color",b):d.css("background-color","#ffffff")))},jQuery.extend({getUrlVars:function(a){for(var b,c=[],d=a.href||window.location.href,e=d.slice(d.indexOf("?")+1).split("&"),f=0;f<e.length;f++)b=e[f].split("="),c.push(b[0]),c[b[0]]=b[1];return c},getUrlVar:function(a,b){return jQuery.getUrlVars(b||!1)[a]}}),jQuery.fn.outerHTML=function(a){return a?this.before(a).remove():jQuery("<div>").append(this.eq(0).clone()).html()},jQuery.fn.autolink=function(){return this.each(function(){var a=new RegExp('((http|https|ftp)://[\\w?=&./-;#~%-]+(?![\\w\\s?&./;#~%"=-]*>))',"g");jQuery(this).html(jQuery(this).html().replace(a,'<a href="$1">$1</a> '))})},"undefined"==typeof document.activeElement&&jQuery(document).focusin(function(a){document.activeElement=a.target}).focusout(function(){document.activeElement=null}),jQuery.extend(jQuery.expr[":"],{focus:function(a){return a===document.activeElement}}),Date.prototype.format=function(a){var b,c,d="",e=Date.replaceChars;for(b=0;b<a.length;b++)c=a.charAt(b),d+=e[c]?e[c].call(this):c;return d},Date.replaceChars={shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d:function(){return(this.getDate()<10?"0":"")+this.getDate()},D:function(){return Date.replaceChars.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.replaceChars.longDays[this.getDay()]},N:function(){return this.getDay()+1},S:function(){return this.getDate()%10===1&&11!==this.getDate()?"st":this.getDate()%10===2&&12!==this.getDate()?"nd":this.getDate()%10===3&&13!==this.getDate()?"rd":"th"},w:function(){return this.getDay()},z:function(){return"Not Yet Supported"},W:function(){return"Not Yet Supported"},F:function(){return Date.replaceChars.longMonths[this.getMonth()]},m:function(){return(this.getMonth()<9?"0":"")+(this.getMonth()+1)},M:function(){return Date.replaceChars.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){return"Not Yet Supported"},L:function(){return this.getFullYear()%4===0&&this.getFullYear()%100!==0||this.getFullYear()%400===0?"1":"0"},o:function(){return"Not Supported"},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return"Not Yet Supported"},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){return((this.getHours()%12||12)<10?"0":"")+(this.getHours()%12||12)},H:function(){return(this.getHours()<10?"0":"")+this.getHours()},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes()},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds()},e:function(){return"Not Yet Supported"},I:function(){return"Not Supported"},O:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+"00"},P:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+":"+(Math.abs(this.getTimezoneOffset()%60)<10?"0":"")+Math.abs(this.getTimezoneOffset()%60)},T:function(){var a,b;return b=this.getMonth(),this.setMonth(0),a=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1"),this.setMonth(b),a},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return this.format("Y-m-d")+"T"+this.format("H:i:sP")},r:function(){return this.toString()},U:function(){return this.getTime()/1e3}},function(a){var b=function(a){return"object"==typeof a?a:{top:a,left:a}},c=a.scrollTo=function(b,c,d){a(window).scrollTo(b,c,d)};c.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1},c.window=function(b){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){var b=this,c=!b.nodeName||-1!==a.inArray(b.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!c)return b;var d=(b.contentWindow||b).document||b.ownerDocument||b;return a.browser.safari||"BackCompat"===d.compatMode?d.body:d.documentElement})},a.fn.scrollTo=function(d,e,f){return"object"==typeof e&&(f=e,e=0),"function"==typeof f&&(f={onAfter:f}),"max"===d&&(d=9e9),f=a.extend({},c.defaults,f),e=e||f.speed||f.duration,f.queue=f.queue&&f.axis.length>1,f.queue&&(e/=2),f.offset=b(f.offset),f.over=b(f.over),this._scrollable().each(function(){var g,h=this,i=a(h),j=d,k={},l=i.is("html,body"),m=function(a){i.animate(k,e,f.easing,a&&function(){a.call(this,d,f)})};"number"!=typeof j&&"string"!=typeof j||!/^([\-+]=)?\d+(\.\d+)?(px|%)?$/.test(j)?(("number"==typeof j||"string"==typeof j)&&(j=a(j,this)),(j.is||j.style)&&(g=(j=a(j)).offset())):j=b(j),a.each(f.axis.split(""),function(a,b){var d="x"===b?"Left":"Top",e=d.toLowerCase(),n="scroll"+d,o=h[n],p=c.max(h,b);if(g)k[n]=g[e]+(l?0:o-i.offset()[e]),f.margin&&(k[n]-=parseInt(j.css("margin"+d),10)||0,k[n]-=parseInt(j.css("border"+d+"Width"),10)||0),k[n]+=f.offset[e]||0,f.over[e]&&(k[n]+=j["x"===b?"width":"height"]()*f.over[e]);else{var q=j[e];k[n]=q.slice&&"%"===q.slice(-1)?parseFloat(q)/100*p:q}/^\d+$/.test(k[n])&&(k[n]=k[n]<=0?0:Math.min(k[n],p)),!a&&f.queue&&(o!==k[n]&&m(f.onAfterFirst),delete k[n])}),m(f.onAfter)}).end()},c.max=function(b,c){var d="x"===c?"Width":"Height",e="scroll"+d;if(!a(b).is("html,body"))return b[e]-a(b)[d.toLowerCase()]();var f="client"+d,g=b.ownerDocument.documentElement,h=b.ownerDocument.body;return Math.max(g[e],h[e])-Math.min(g[f],h[f])}}(jQuery),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(){if(!a.contains(document.documentElement,this))return a(this).timeago("dispose"),this;var b=c(this),g=f.settings;return isNaN(b.datetime)||(0==g.cutoff||Math.abs(e(b.datetime))<g.cutoff)&&a(this).text(d(b.datetime)),this}function c(b){if(b=a(b),!b.data("timeago")){b.data("timeago",{datetime:f.datetime(b)});var c=a.trim(b.text());f.settings.localeTitle?b.attr("title",b.data("timeago").datetime.toLocaleString()):!(c.length>0)||f.isTime(b)&&b.attr("title")||b.attr("title",c)}return b.data("timeago")}function d(a){return f.inWords(e(a))}function e(a){return(new Date).getTime()-a.getTime()}a.timeago=function(b){return d(b instanceof Date?b:"string"==typeof b?a.timeago.parse(b):"number"==typeof b?new Date(b):a.timeago.datetime(b))};var f=a.timeago;a.extend(a.timeago,{settings:{refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:"any moment now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(b){function c(c,e){var f=a.isFunction(c)?c(e,b):c,g=d.numbers&&d.numbers[e]||e;return f.replace(/%d/i,g)}if(!this.settings.allowPast&&!this.settings.allowFuture)throw"timeago allowPast and allowFuture settings can not both be set to false.";var d=this.settings.strings,e=d.prefixAgo,f=d.suffixAgo;if(this.settings.allowFuture&&0>b&&(e=d.prefixFromNow,f=d.suffixFromNow),!this.settings.allowPast&&b>=0)return this.settings.strings.inPast;var g=Math.abs(b)/1e3,h=g/60,i=h/60,j=i/24,k=j/365,l=45>g&&c(d.seconds,Math.round(g))||90>g&&c(d.minute,1)||45>h&&c(d.minutes,Math.round(h))||90>h&&c(d.hour,1)||24>i&&c(d.hours,Math.round(i))||42>i&&c(d.day,1)||30>j&&c(d.days,Math.round(j))||45>j&&c(d.month,1)||365>j&&c(d.months,Math.round(j/30))||1.5>k&&c(d.year,1)||c(d.years,Math.round(k)),m=d.wordSeparator||"";return void 0===d.wordSeparator&&(m=" "),a.trim([e,l,f].join(m))},parse:function(b){var c=a.trim(b);return c=c.replace(/\.\d+/,""),c=c.replace(/-/,"/").replace(/-/,"/"),c=c.replace(/T/," ").replace(/Z/," UTC"),c=c.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),c=c.replace(/([\+\-]\d\d)$/," $100"),new Date(c)},datetime:function(b){var c=a(b).attr(f.isTime(b)?"datetime":"title");return f.parse(c)},isTime:function(b){return"time"===a(b).get(0).tagName.toLowerCase()}});var g={init:function(){var c=a.proxy(b,this);c();var d=f.settings;d.refreshMillis>0&&(this._timeagoInterval=setInterval(c,d.refreshMillis))},update:function(c){var d=f.parse(c);a(this).data("timeago",{datetime:d}),f.settings.localeTitle&&a(this).attr("title",d.toLocaleString()),b.apply(this)},updateFromDOM:function(){a(this).data("timeago",{datetime:f.parse(a(this).attr(f.isTime(this)?"datetime":"title"))}),b.apply(this)},dispose:function(){this._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}};a.fn.timeago=function(a,b){var c=a?g[a]:g.init;if(!c)throw new Error("Unknown function name '"+a+"' for timeago");return this.each(function(){c.call(this,b)}),this},document.createElement("abbr"),document.createElement("time")}),function(jQuery){var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]},b=function(b){var c;return b&&b.constructor===Array&&3===b.length?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:a[jQuery.trim(b).toLowerCase()]},c=function(a,c){var d;do{if(d=jQuery.curCSS(a,c),""!==d&&"transparent"!==d||jQuery.nodeName(a,"body"))break;c="backgroundColor"}while(a=a.parentNode);return b(d)};jQuery.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(a,d){jQuery.fx.step[d]=function(a){void 0===a.start&&(a.start=c(a.elem,d),a.end=b(a.end)),a.elem.style[d]="rgb("+[Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0),Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0),Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)].join(",")+")"}})}(jQuery),function(){var a=function(){var a=!1;this.settings_enabled=!1,jQuery("input:text, textarea").on("focusin",function(b){a=!0}).on("focusout",function(b){a=!1}),this.shouldScroll=function(){return this.settings_enabled&&!a}};Livepress.Scroll=new a}(),Livepress.DOMManipulator=function(a,b){this.custom_background_color=b,"string"==typeof a?this.containerJQueryElement=jQuery(a):this.containerJQueryElement=a,this.containerElement=this.containerJQueryElement[0],this.cleaned_ws=!1},Livepress.DOMManipulator.prototype={debug:!1,log:function(){this.debug&&console.log.apply(console,arguments)},update:function(a,b){b=b||{},this.log("Livepress.DOMManipulator.update begin."),this.clean_updates(),this.apply_changes(a,b);var c=this;setTimeout(function(){c.clean_updates()},1500),this.log("Livepress.DOMManipulator.update end.")},selector:function(a){return this.containerJQueryElement.find(a)},selectors:function(){if(0===arguments.length)throw"The method expects arguments.";var a=jQuery.map(arguments,function(a){return a});return this.containerJQueryElement.find(a.join(","))},clean_whitespaces:function(){},block_elements:function(){return{address:1,blockquote:1,center:1,dir:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,noscript:1,ol:1,p:1,pre:1,table:1,ul:1,div:1,math:1,caption:1,colgroup:1,col:1,dd:1,dt:1,frameset:1,li:1,tbody:1,td:1,thead:1,tfoot:1,th:1,tr:1}},is_block_element:function(a){return"string"==typeof a?this.block_elements().hasOwnProperty(a.toLowerCase()):!1},remove_whitespace:function(a){var b,c=!1,d=a.parentNode;return a===d.firstChild||a===d.lastChild?c=!0:(b=a.previousSibling,null!==b&&1===b.nodeType&&this.is_block_element(b.tagName)&&(c=!0)),c},clean_children_ws:function(a){var b,c;for(b=!1,c=a.firstChild;null!==c;null)if(3===c.nodeType?/^\s*$/.test(c.nodeValue)&&this.remove_whitespace(c)&&(b=!0):this.clean_children_ws(c),b){var d=c;c=c.nextSibling,a.removeChild(d),b=!1}else c=c.nextSibling},clean_updates:function(){this.log("DOMManipulator clean_updates."),jQuery.each(this.selector("span.oortle-diff-text-updated"),function(){var a;a=this.childNodes.length>1?this.childNodes[1]:this.childNodes[0],8!==a.nodeType&&(a=a.childNodes[0]),this.parentNode.replaceChild(a,this)}),this.selector(".oortle-diff-changed").removeClass("oortle-diff-changed"),this.selector(".oortle-diff-inserted").removeClass("oortle-diff-inserted"),this.selector(".oortle-diff-inserted-block").removeClass("oortle-diff-inserted-block"),this.selector(".oortle-diff-removed").remove(),this.selector(".oortle-diff-removed-block").remove()},process_twitter:function(a,b){if(b.match(/<blockquote[^>]*twitter-tweet/i))if("twttr"in window)try{window.twttr.events.bind("loaded",function(a){jQuery(document).trigger("live_post_update")}),window.twttr.widgets.load(a)}catch(c){}else try{if(!document.getElementById("twitter-wjs")){var d=document.createElement("script");d.src="https://platform.twitter.com/widgets.js",d.id="twitter-wjs",document.getElementsByTagName("head")[0].appendChild(d)}}catch(c){}},apply_changes:function(a,b){var c,d=jQuery,e=b.effects_display||!1,f=[];for(this.clean_whitespaces(),c=0;c<a.length;c++){this.log("apply changes i=",c," changes.length = ",a.length);var g=a[c];this.log("change[i] = ",g[c]);var h,i,j,k,l,m,n,o,p,q,r;switch(g[0]){case"add_class":try{h=this.get_path_parts(g[1]),i=this.node_at_path(h),this.add_class(i,g[2])}catch(s){this.log("Exception on add_class: ",s)}break;case"set_attr":try{h=this.get_path_parts(g[1]),i=this.node_at_path(h),this.set_attr(i,g[2],g[3])}catch(t){this.log("Exception on set_attr: ",t)}break;case"del_attr":try{h=this.get_path_parts(g[1]),i=this.node_at_path(h),this.del_attr(i,g[2])}catch(u){this.log("Exception on del_attr: ",u)}break;case"set_text":try{this.set_text(g[1],g[2])}catch(v){this.log("Exception on set_text: ",v)}break;case"del_node":try{if(h=this.get_path_parts(g[1]),i=this.node_at_path(h),3===i.nodeType){for(j=i.parentNode,q=0;q<j.childNodes.length;q++)if(j.childNodes[q]===i){k=j.ownerDocument.createElement("span"),k.appendChild(i),k.className="oortle-diff-removed";break}q<j.childNodes.length?j.insertBefore(k,j.childNodes[q]):j.appendChild(k)}else 8===i.nodeType?i.parentNode.removeChild(i):this.add_class(i,"oortle-diff-removed")}catch(w){this.log("Exception on del_node: ",w)}break;case"push_node":try{if(h=this.get_path_parts(g[1]),i=this.node_at_path(h),null!==i){var x=i.parentNode;this.log("push_node: parentNode = ",x,", node = ",i),f[g[2]]=x.removeChild(i),d(f[g[2]]).addClass("oortle-diff-inserted")}}catch(y){this.log("Exception on push_node: ",y)}break;case"pop_node":try{h=this.get_path_parts(g[1]),l=this.get_child_index(h),j=this.node_at_path(this.get_parent_path(h)),l>-1&&null!==j&&(m=f[g[2]],n=j.childNodes.length<=l?null:j.childNodes[l],this.log("pop_node",m,"from register",g[2],"before element",n,"on index ",l," on parent ",j),r=j.insertBefore(m,n),d(r).addClass("oortle-diff-inserted"))}catch(z){this.log("Exception on pop_node: ",z)}break;case"ins_node":try{if(h=this.get_path_parts(g[1]),l=this.get_child_index(h),o=this.get_parent_path(h),j=this.node_at_path(o),this.log("ins_node: childIndex = ",l,", parent = ",j),l>-1&&null!==j&&(m=document.createElement("span"),m.innerHTML=g[2],p=m.childNodes[0],""===p.id||null===document.getElementById(p.id))){this.process_twitter(p,g[2]),n=j.childNodes.length<=l?null:j.childNodes[l],r=j.insertBefore(p,n);var A=d(r);A.addClass("oortle-diff-inserted");var B=d(p).find("div.live-update-livetags");"undefined"!=typeof B&&0!==B.length&&this.addLiveTagsToUpdate(A,B),this.filterUpdate(A,B)}}catch(C){this.log("Exception on ins_node: ",C)}break;case"append_child":try{o=this.get_path_parts(g[1]),j=this.node_at_path(o),null!==j&&(m=document.createElement("span"),m.innerHTML=g[2],p=m.childNodes[0],""!==p.id&&null!==document.getElementById(p.id)&&(this.process_twitter(p,g[2]),r=j.appendChild(p),d(r).addClass("oortle-diff-inserted")))}catch(C){this.log("Exception on append_child: ",C)}break;case"replace_node":try{h=this.get_path_parts(g[1]),i=this.node_at_path(h),j=i.parentNode,m=document.createElement("span"),m.innerHTML=g[2],p=m.childNodes[0];var D=d(p).data("lpg");if(""!==D&&null!==D&&D<=d(i).data("lpg"));else if(this.process_twitter(p,g[2]),this.add_class(p,"oortle-diff-changed"),d(i).hasClass("pinned-first-live-update")&&(this.add_class(p,"pinned-first-live-update"),setTimeout(this.scrollToPinnedHeader,500)),j.insertBefore(p,i),3===i.nodeType){for(q=0;q<j.childNodes.length;q++)if(j.childNodes[q]===i){k=j.ownerDocument.createElement("span"),k.appendChild(i),k.className="oortle-diff-removed";break}q<j.childNodes.length?j.insertBefore(k,j.childNodes[q]):j.appendChild(k)}else 8===i.nodeType?i.parentNode.removeChild(i):this.add_class(i,"oortle-diff-removed")}catch(C){this.log("Exception on append_child: ",C)}break;default:throw this.log("Operation not implemented yet."),"Operation not implemented yet."}this.log("i=",c," container: ",this.containerElement.childNodes," -- registers: ",f)}try{this.display(e)}catch(E){this.log("Exception on display: ",E)}try{if(Livepress.Scroll.shouldScroll()){var F=void 0===b.custom_scroll_class?".oortle-diff-inserted-block, .oortle-diff-changed, .oortle-diff-inserted":b.custom_scroll_class;jQuery.scrollTo(F,900,{axis:"y",offset:-30})}}catch(G){this.log("Exception on scroll ",G)}this.log("end apply_changes.")},scrollToPinnedHeader:function(){Livepress.Scroll.shouldScroll()&&jQuery.scrollTo(".pinned-first-live-update",900,{axis:"y",offset:-30})},filterUpdate:function(a,b){var c,d,e=jQuery(".live-update-tag-control"),f=e.find(".live-update-tagcontrol.active");if(0!==f.length&&0===b.length)return void a.hide().removeClass("oortle-diff-inserted");if(0!==f.length){var g=!1,h=b.find(".live-update-livetag");jQuery.each(h,function(a,b){c=jQuery(b).attr("class"),c=c.replace(/live-update-livetag live-update-livetag-/gi,""),c="live-update-livetag-"+c.toLowerCase().replace(/ /g,"-"),c='.live-update-tagcontrol.active[data-tagclass="'+c+'"]',d=e.find(c),0!==d.length&&(g=!0)}),g||a.hide().removeClass("oortle-diff-inserted")}},addLiveTagsToUpdate:function(a,b){var c,d=this,e=jQuery("#livepress"),f=b.find(".live-update-livetag"),g=(b.parent().parent(),e.find(".live-update-tag-control"));0===g.length&&this.addLiveTagControlBar(),f.each(function(){var b=jQuery(this).attr("class");b=b.replace(/live-update-livetag live-update-livetag-/gi,""),c="live-update-livetag-"+b.toLowerCase().replace(/ /g,"-"),a.addClass(c),d.addLiveTagToControls(b)})},addLiveTagToControls:function(a){var b,c=jQuery("#livepress"),d=c.find(".live-update-tag-control"),e=d.find('[data-tagclass="live-update-livetag-'+a.toLowerCase().replace(/ /g,"-")+'"]');0===e.length&&(b='<span class="live-update-tagcontrol" data-tagclass="live-update-livetag-'+a.toLowerCase().replace(/ /g,"-")+'">'+a+"</span>",d.append(b))},addLiveTagControlBar:function(){var a=jQuery("#livepress"),b=a.find(".live-update-tag-control");a.append('<div class="live-update-tag-control"><span class="live-update-tag-title">'+lp_client_strings.filter_by_tag+"</span></div>"),b=a.find(".live-update-tag-control"),this.addLiveTagHandlers(b)},addLiveTagHandlers:function(a){var b=this,c=jQuery(".livepress_content");a.on("click",".live-update-tagcontrol",function(){var d=jQuery(this);d.toggleClass("active"),b.filterUpdateListbyLiveTag(a,c)})},filterUpdateListbyLiveTag:function(a,b){var c,d=a.find(".live-update-tagcontrol.active");return 0===d.length?void b.find(".livepress-update").show():(b.find(".livepress-update").hide(),void jQuery.each(d,function(a,d){c="."+jQuery(d).data("tagclass"),b.find(c).show()}))},colorForOperation:function(a){if(0===a.length)return!1;var b={"oortle-diff-inserted":LivepressConfig.oortle_diff_inserted,"oortle-diff-changed":LivepressConfig.oortle_diff_changed,"oortle-diff-inserted-block":LivepressConfig.oortle_diff_inserted_block,"oortle-diff-removed-block":LivepressConfig.oortle_diff_removed_block,"oortle-diff-removed":LivepressConfig.oortle_diff_removed},c="#fff";return jQuery.each(b,function(b,d){return a.hasClass(b)?(c=d,!1):void 0}),c},show:function(a){var b=jQuery(a);!LivepressConfig.page_active&&LivepressConfig.effects&&(b.getBg(),b.data("oldbg",b.css("background-color")),b.addClass("unfocused-lp-update"),b.css("background-color",this.colorForOperation(b))),b.show()},sliderFixed:function(a,b){var c=jQuery,d={slideType:"down",duration:250};b=c.extend({},d,b);var e="down"===b.slideType,f=c(a),g=f.data("originalHeight"),h=f.is(":visible"),i=f.data("originalStyle");return 1===arguments.length&&(e=!h),e===h?!1:(g&&i||(g=f.show().height(),i=f.attr("style"),f.data("originalStyle",i),f.data("originalHeight",g),h||f.hide()),void(e?f.show().animate({height:g},{duration:b.duration,complete:function(){f.css({height:f.data("originalHeight")}),f.attr("style",f.data("originalStyle")),f.show()}}):f.animate({height:0},{duration:b.duration,complete:function(){f.hide()}})))},show_with_effects:function(a,b){"string"===this.custom_background_color&&a.css("background-color",this.custom_background_color),a.getBg(),b(a,a.css("background-color"))},display:function(a){if(a){var b=this.selector(".oortle-diff-inserted-block");b.hide().css("height","");var c=this,d=function(a,b){c.sliderFixed(a,"down"),a.animate({backgroundColor:c.colorForOperation(a)},200).animate({backgroundColor:b},800),setTimeout(function(){a.css("background-color","")},1500)};b.each(function(a,b){c.show_with_effects(jQuery(b),d)}),this.show_with_effects(this.selectors(".oortle-diff-inserted",".oortle-diff-changed"),function(a,b){a.slideDown(200);try{a.animate({backgroundColor:c.colorForOperation(a)},200).animate({backgroundColor:b},800)}catch(d){console.log("Error when animating new comment div.")}setTimeout(function(){a.css("background-color","")},1500)}),this.show_with_effects(this.selectors(".oortle-diff-removed-block",".oortle-diff-removed"),function(a,b){try{a.animate({backgroundColor:c.colorForOperation(a)},200).animate({backgroundColor:b},800).slideUp(200)}catch(d){console.log("Error when removing comment div.")}setTimeout(function(){a.css("background-color","")},1500)})}else this.show(this.selectors(".oortle-diff-changed",".oortle-diff-inserted",".oortle-diff-removed")),this.show(this.selector(".oortle-diff-inserted-block"))},set_text:function(a,b){var c=this.get_path_parts(a),d=this.get_child_index(c),e=this.node_at_path(this.get_parent_path(c));if(d>-1&&null!==e){for(var f=e.childNodes[d],g=jQuery(b),h=0,i=g.length;i>h;h++)e.insertBefore(g[h],f);e.removeChild(f)}},get_path_parts:function(a){if("#"===a[0]){var b=jQuery(a,this.containerElement)[0];return b?[b.parentNode,b]:[null,null]}for(var c=a.split(":"),d=[],e=0,f=c.length;f>e;e++)d[e]=parseInt(c[e],10);return d},get_child_index:function(a){return a.length>0?parseInt(a[a.length-1],10):-1},get_parent_path:function(a){var b=a.slice();return b.splice(-1,1),b},node_at_path:function(a){return void 0===a[0].nodeType?this.get_node_by_path(this.containerElement,a):a[a.length-1]},get_node_by_path:function(a,b){var c=b.slice();if(c.splice(0,1),0===c.length)return a;for(var d=0,e=a,f=null,g=c.length;g>d&&(e=e.childNodes[c[d]],"undefined"!=typeof e);d++);return d===c.length&&(f=e),f},add_class:function(a,b){null!==a&&(a.className+=" "+b)},set_attr:function(a,b,c){null!==a&&a.setAttribute(b,c)},del_attr:function(a,b){null!==a&&a.removeAttribute(b)}},Livepress.DOMManipulator.clean_updates=function(a){var b=new Livepress.DOMManipulator(a);b.clean_updates()};var Dashboard=Dashboard||{};Dashboard.Controller=Dashboard.Controller||function(){var a=!1,b=jQuery("#lp-pane-holder"),c=(jQuery("#lp-pane-holder .pane-bookmark"),b.find(".taghint")),d=b.find(".lp-input"),e=(jQuery("#twitter-search-subtabs li"),function(){void 0!==Dashboard.Comments&&(LivepressConfig.disable_comments?(jQuery("#bar-controls .comment-count").hide(),b.find('div[data-pane-name="Comments"]').hide(),Dashboard.Comments.disable()):Dashboard.Comments.init()),jQuery(window).on("connected.livepress",function(){Dashboard.Twitter.init(),Dashboard.Twitter.conditionallyEnable()}),d.bind("click",function(){c=jQuery(this).parent("div").find(".taghint"),c.css("visibility","hidden")}),c.bind("click",function(){var a=jQuery(this).siblings("input.lp-input");a.focus(),a.click()}),d.bind("blur",function(){""===jQuery(this).val()&&c.css("visibility","visible")});var a='<a id="content-livepress-html" class="hide-if-no-js wp-switch-editor switch-livepress-html"><span class="icon-livepress-logo"></span> '+lp_strings.text_editor+'</a><a id="content-livepress" class="hide-if-no-js wp-switch-editor switch-livepress active"><span class="icon-livepress-logo"></span> '+lp_strings.visual_text_editor+"</a>";jQuery(a).insertAfter("#content-tmce")}),f=function(c){var d=jQuery(c.srcElement||c.target),e=jQuery("#publish"),f=jQuery("#lp-switch-panel .warning");a=a?!1:!0,Dashboard.Helpers.saveEEState(a.toString()),a?(f.hide(),e.data("publishText",e.val()),e.val("Update"===e.val()?lp_strings.save_and_refresh:lp_strings.publish_and_refresh),e.removeClass("button-primary").addClass("button-secondary"),jQuery(window).trigger("start.livepress"),jQuery("#wp-content-editor-tools").unbind()):(f.show(),e.val(e.data("publishText")).removeClass("button-secondary").addClass("button-primary"),jQuery(window).trigger("stop.livepress"),d.hasClass("switch-html")?switchEditors.go("content","html"):d.hasClass("switch-tmce")&&switchEditors.go("content","tmce")),b.toggleClass("scroll-pane")};jQuery("#wp-content-editor-tools").on("click","#content-livepress",f),jQuery("#poststuff").on("click",".secondary-editor-tools .switch-tmce, .secondary-editor-tools .switch-html",f),Dashboard.Helpers.setupLivePressTabs();var g=function(a){Dashboard.Twitter.conditionallyEnable(),Dashboard.Comments.conditionallyEnable(),a.find("span.count-update").hide()};jQuery(".blogging-tools-tabs ul li").on("click",function(){var a=jQuery(this);a.is(".active")===!1&&g(a)}),e(),jQuery("#livepress_status_meta_box").hasClass("live")&&f({srcElement:null})},Dashboard.Helpers=Dashboard.Helpers||new DHelpers;var Collaboration=Livepress.ensureExists(Collaboration);Collaboration.chat_topic_id=function(){var a=Collaboration.post_topic()+"_chat";return a},Collaboration.Chat={enabled:!1,nextShade:!1,html:["<div>",'<div id="chat-messages">','<div id="inner-chat-messages"></div>',"</div>",'<div id="chat-form-message"><hr />',"<form>",'<input id="chat_message" type="text" name="chat_message" style="width:240px;" />','<input id="chat-submit" type="submit" class="button" value="'+lp_strings.submit+'" />',"</form></div>","</div>"].join(""),
message_html:function(a){this.nextShade=!this.nextShade;var b=this.nextShade?" shaded":"";return'<div class="message'+b+'">'+a+"</div>"},add_message:function(a){var b=jQuery("#chat-messages"),c=jQuery("div#inner-chat-messages"),d="<strong>"+a[0]+"</strong>: "+a[1];c.append(Collaboration.Chat.message_html(d)),b.attr({scrollTop:b.attr("scrollHeight")})},send_message:function(a){if("string"!=typeof a){var b=jQuery("#chat_message");b.length&&""!==b.val()&&(a=b.val(),b.focus().val(""))}return a&&OORTLE.instance.publish(Collaboration.chat_topic_id(),[Collaboration.Author,a]),!1},initialize:function(){if(!this.enabled){var a=function(){var a=jQuery("#livepress-chat-window"),b=a.find("div:first"),c=jQuery("#chat-messages"),d=jQuery("#chat_message"),e=jQuery("#chat-submit").width();c.height(a.height()-jQuery("#chat-form-message").height()+5),d.width(b.width()-e-20)};jQuery('<div id="livepress-chat-window" title="'+lp_strings.live_press+" <span>"+lp_strings.live_chat+'</span>">'+this.html+"</div>").dialog({width:330,minWidth:130,minHeight:115,close:function(){Collaboration.Chat.destroy()},resize:a,dialogopen:a})}Collaboration.start(this),Collaboration.Connected||(jQuery("input#chat-submit").disabled=!0)},create:function(){var a=jQuery("input#chat-submit");a.disabled=!1,a.click(this.send_message),OORTLE.instance.subscribe(Collaboration.chat_topic_id(),this.add_message),Collaboration.Chat.send_message("Im in!")},destroy:function(){this.enabled=!1,jQuery("div#livepress-chat-window").remove(),OORTLE.instance.unsubscribe(Collaboration.chat_topic_id(),this.add_message)}},Collaboration.Edit=Livepress.ensureExists(Collaboration.Edit),jQuery.extend(Collaboration.Edit,{update_live_posts_number:function(){var a=jQuery("#livepress-canvas").find(".livepress-update").not(".pinned-first-livepress-update>.livepress-update").filter(function(a){return 0===jQuery(this).find(".livepress-update").length}).length;OORTLE.Livepress.LivepressHUD.updateLivePosts(a)},editing_post_callback:function(a){if(a=JSON.parse(a),null!==a){try{window.twttr.widgets.load(a)}catch(b){}OORTLE.Livepress.mergeLiveCanvasData(a)}}}),Collaboration.post_topic=function(){return"|livepress|"+LivepressConfig.site_url+"|post-"+LivepressConfig.post_id},Collaboration.edit_post_topic=function(){return Collaboration.post_topic()+"_edit"},jQuery.extend(Collaboration,{Connected:!1,Author:LivepressConfig.current_user,start:function(a){a.enabled||(a.enabled=!0,this.Connected?a.create():this.initialize())}}),jQuery.extend(Collaboration.Edit,{enabled:!1,editor_dom_manipulator:null,runOnce:!1,initialize:function(a){this.startArgs=a,Collaboration.start(this),this.refresh(this)},refresh:function(a){var b=null;a.runOnce||(a.runOnce=!0,void 0!==a.startArgs&&(b=a.startArgs)),a.get_live_edition_data(b)},create:function(){this.editor_dom_manipulator=new Livepress.DOMManipulator(jQuery("#content_ifr").contents().find("body")),void 0!==this.startArgs&&this.startArgs?this.get_live_edition_data(this.startArgs):this.get_live_edition_data(),this.update_live_posts_number();var a=LivepressConfig.post_edit_msg_id?{last_id:LivepressConfig.post_edit_msg_id}:{fetch_all:!0};OORTLE.instance.subscribe(Collaboration.edit_post_topic(),this.editing_post_callback,a),OORTLE.instance.subscribe("|subcount"+Collaboration.post_topic(),this.readers_callback)},destroy:function(){this.enabled=!1,OORTLE.instance.unsubscribe(Collaboration.edit_post_topic(),this.editing_post_callback),Dashboard.Comments.unsubscribe_comment_channels(),OORTLE.instance.unsubscribe(Collaboration.post_topic(),this.readers_callback),OORTLE.instance.unsubscribe("|subcount"+Collaboration.post_topic(),this.readers_callback),Dashboard.Twitter.unsubscribeTwitterChannels()},get_live_edition_data:function(a){var b,c,d,e,f;b=function(a){void 0!==a&&jQuery.each(a,function(a,b){Dashboard.Twitter.addGuestBlogger(b,!0)})},c=function(a){var b,c;for(jQuery.each(a,function(a,b){Dashboard.Twitter.addTerm(b,!0)}),b=function(){return jQuery("#lp-twitter-results")},c=0;c<Dashboard.Twitter.terms.length;c++)Dashboard.Twitter.renderStaticSearchResults(Dashboard.Twitter.terms[c],b,5)},d=function(a){a&&(Dashboard.Comments.clear_container_and_count(a.comments),b(a.guest_bloggers),c(a.terms))},e=function(){Dashboard.Comments.get_comments_number_from_wp(),Dashboard.Comments.subscribe_comment_channels()},a?d(a):(f={action:"lp_collaboration_get_live_edition_data",_ajax_nonce:LivepressConfig.ajax_get_live_edition_data,post_id:LivepressConfig.post_id},jQuery.ajax({type:"GET",dataType:"json",url:LivepressConfig.site_url+"/wp-admin/admin-ajax.php",data:f,success:d,error:e}))},readers_callback:function(a){OORTLE.Livepress.LivepressHUD.updateReaders(a.count)}}),Collaboration.Modes=[Collaboration.Chat,Collaboration.Edit],Collaboration.connected=function(){var a;if(!Collaboration.Connected){for(Collaboration.Connected=!0,a=0;a<Collaboration.Modes.length;a++)Collaboration.Modes[a].enabled&&Collaboration.Modes[a].create();Dashboard.Helpers.clearErrors("*"),Dashboard.Helpers.hideErrors(),Dashboard.Helpers.setSwitcherState("connected")}},Collaboration.disconnected=function(){var a;if(Collaboration.Connected){for(Collaboration.Connected=!1,a=0;a<Collaboration.Modes.length;a++)Collaboration.Modes[a].destroy();Dashboard.Helpers.handleErrors({disconnected:Collaboration.errorMessages.disconnected}),Dashboard.Helpers.setSwitcherState("disconnected")}},Collaboration.reconnect=function(){this.Connected||(Dashboard.Helpers.clearErrors(".connection"),OORTLE.instance.reconnect())},Collaboration.errorMessages={max_connection_attempts_reached:"<strong>"+lp_strings.warning+"</strong> "+lp_strings.connection_just_lost+lp_strings.connection_lost,server_list_empty:"<strong>"+lp_strings.warning+"</strong> "+lp_strings.connection_just_lost+lp_strings.connect_again,disconnected:"<strong>"+lp_strings.warning+"</strong> "+lp_strings.connection_just_lost,message_order_broken:"<strong>"+lp_strings.warning+"</strong> "+lp_strings.sync_lost,cache_empty:"<strong>"+lp_strings.warning+"</strong> "+lp_strings.collabst_sync_lost,cache_miss:"<strong>"+lp_strings.warning+"</strong> "+lp_strings.collab_sync_lost},Collaboration.onError=function(a,b){var c={};Collaboration.errorMessages.hasOwnProperty(a)?c[a]=Collaboration.errorMessages[a].replace("{1}",b):c[a]=b+"["+a+"]",Dashboard.Helpers.handleErrors(c),Dashboard.Helpers.setSwitcherState("disconnected"),console.log("Collaboration.onError",arguments)},Collaboration.initialize=function(){OORTLE.instance&&OORTLE.server_list_location?this.Connected||(OORTLE.instance.attachEvent("connected",Collaboration.connected),OORTLE.instance.attachEvent("state_changed",function(a,b){"connected"===b&&Collaboration.connected()}),OORTLE.instance.attachEvent("disconnected",Collaboration.disconnected),OORTLE.instance.attachEvent("error",Collaboration.onError),OORTLE.instance.connect()):window.setTimeout(Collaboration.initialize,100)},void 0===Dashboard.Comments&&(Dashboard.Comments=function(){var a=[],b=!1,c=!0,d=!1,e=function(){return Collaboration.post_topic()+"_new_comment"},f=function(){return Collaboration.post_topic()+"_comment"},g=Dashboard.Helpers.createLiveCounter("#tab-link-live-comments a"),h=function(d){if(b)a.push(d);else{var e=jQuery("#lp-comment-"+d.comment_id);if(e.length<=0&&void 0!==d.comment_id){e=Dashboard.Comments.Builder.createCommentDiv(d,c),c=!c;var f=e.find(".comment"),h=Dashboard.Comments.Builder.prepareCommentActions(d.comment_id,d);f.append(h),OORTLE.Livepress.LivepressHUD.sumToComments(1),jQuery("#tab-link-live-comments").hasClass("active")||(g.enabled||g.enable(),g.increment())}else e.removeClass("approved").removeClass("unapproved");e.addClass(d.status)}var i=document.getElementById("lp-new-comments-notice");null!==i&&jQuery(i).remove()},i=function(a){a.status="approved",h(a)},j=function(){jQuery("#live-comments-pane").hover(function(a){b=!0,g.reset(),g.enable()},function(c){b=!1;for(var d;d=a.shift();)h(d);g.disable()})};return{conditionallyEnable:function(){0>=jQuery("#lp-comments-results").has(".comment-item").length?this.liveCounter.disable():this.liveCounter.reset()},unsubscribe_comment_channels:function(){d||(OORTLE.instance.unsubscribe(e(),h),OORTLE.instance.unsubscribe(f(),i))},subscribe_comment_channels:function(a){if(!d){var b=a?{last_id:a}:{fetch_all:!0};OORTLE.instance.subscribe(e(),h,b),b=a?{last_id:a}:{fetch_all:!0},OORTLE.instance.subscribe(f(),i,b),g.reset(),g.disable()}},clear_container_and_count:function(a){d||(OORTLE.Livepress.LivepressHUD.updateComments(0),a.comments.length&&(jQuery("#lp-comments-results").html(""),jQuery.each(a.comments,function(a,b){h(b)})),this.subscribe_comment_channels(a.comment_msg_id))},get_comments_number_from_wp:function(){if(!d){var a={};a.action="lp_collaboration_comments_number",a._ajax_nonce=LivepressConfig.ajax_lp_collaboration_comments,a.post_id=LivepressConfig.post_id,jQuery.ajax({url:LivepressConfig.site_url+"/wp-admin/admin-ajax.php",type:"post",dataType:"json",data:a,success:function(a,b){OORTLE.Livepress.LivepressHUD.updateComments(a)}})}},liveCounter:g,disable:function(){d=!0},init:function(){d||j()}}}()),void 0===Dashboard.Comments.Builder&&(Dashboard.Comments.Builder=function(){var a=function(a,b){if(void 0===a.comment_id)return null;var c,d=jQuery("<div id='lp-comment-"+a.comment_id+"' class='comment-item "+(b?"even":"odd")+"'></div>"),e=a.comment_url,f=a.comment_gmt.parseGMT();"approved"===a.status?(c=jQuery("<a href='"+e+"' target='_blank'>"+f+"</a>"),c.addClass("lp-comment-link")):c=jQuery("<span>"+f+"</span>");var g=jQuery("<div class='lp-comment-author author'>");if(g.append(a.avatar_url),a.author_url){var h=jQuery("<a></a>").text(a.author).attr("href",a.author_url);g.append(jQuery("<strong></strong>").append(h))}else g.append(jQuery("<strong>"+a.author+"</strong>"));g.append("<br/>").append(c),d.append(g);var i=jQuery("#lp-comments-results"),j=jQuery("<div class='lp-comment comment'></div>");return j.append(jQuery("<p>"+a.content+"</p>")),d.append(j),i.prepend(d),d},b=function(a,b){var c=function(a,b,c){var d=jQuery("<span></span>").addClass(a);return c||d.text(" | "),d.append(b),d},d=location.href,e=jQuery("#blogging-tool-nonces"),f=d.substring(0,d.lastIndexOf("/"))+"/edit-comments.php",g={_ajax_nonce:LivepressConfig.ajax_comment_nonce,id:a},h=function(a,b,c){return jQuery("<a></a>").attr("href",b).text(c).attr("title",a)},i="&p="+LivepressConfig.post_id+"&c="+a+"&_wpnonce="+e.data("live-comments"),j=function(a){return"comment.php?action="+a+i},k=jQuery("<div class='row-actions'></div>"),l=h(lp_strings.post_link,"#",lp_strings.send_to_editor);k.append(c("post",l,!0));var m=h(lp_strings.approve_comment,j("approvecomment"),lp_strings.approve);k.append(c("approve",m));var n=h(lp_strings.unapprove_comment,j("unapprovecomment"),lp_strings.unapprove);k.append(c("unapprove",n));var o=h(lp_strings.mark_as_spam,j("spamcomment"),lp_strings.spam);k.append(c("spam",o));var p=h(lp_strings.move_comment_trash,j("trashcomment"),lp_strings.trash);k.append(c("trash",p));var q=function(){jQuery("#lp-comment-"+a).css({"background-color":"rgb(255, 170, 170)"}).fadeOut("slow",function(){jQuery(this).remove(),OORTLE.Livepress.LivepressHUD.sumToComments(-1)})},r=function(b){b.click(function(b){b.preventDefault(),b.stopPropagation(),jQuery.post("admin-ajax.php",jQuery.extend({},g,{"new":"approved",action:"lp_dim_comment",dimClass:"unapproved"}),function(b){jQuery.post("admin-ajax.php",jQuery.extend({},g,{"new":"approved",action:"dim-comment",dimClass:"unapproved",_ajax_nonce:b.data.approve_comment_nonce}),function(){jQuery("#lp-comment-"+a).removeClass("unapproved").addClass("approved")})})})},s=function(b){b.click(function(b){b.preventDefault(),b.stopPropagation(),jQuery.post("admin-ajax.php",jQuery.extend({},g,{"new":"unapproved",action:"lp_dim_comment",dimClass:"unapproved"}),function(b){jQuery.post("admin-ajax.php",jQuery.extend({},g,{"new":"unapproved",action:"dim-comment",dimClass:"unapproved",_ajax_nonce:b.data.approve_comment_nonce}),function(){jQuery("#lp-comment-"+a).removeClass("approved").addClass("unapproved")})})})};return r(m),s(n),o.click(function(a){a.preventDefault(),a.stopPropagation(),jQuery.post("admin-ajax.php",jQuery.extend({},g,{"new":"unapproved",action:"lp_dim_comment",dimClass:"unapproved"}),function(a){jQuery.post("admin-ajax.php",jQuery.extend({},g,{action:"delete-comment",spam:1,comment_status:"all",_url:f,_ajax_nonce:a.data.delete_comment_nonce}),q)})}),p.click(function(a){a.preventDefault(),a.stopPropagation(),jQuery.post("admin-ajax.php",jQuery.extend({},g,{"new":"unapproved",action:"lp_dim_comment",dimClass:"unapproved"}),function(a){jQuery.post("admin-ajax.php",jQuery.extend({},g,{action:"delete-comment",trash:1,comment_status:"all",_url:f,_ajax_nonce:a.data.delete_comment_nonce}),q)})}),l.bind("click",function(a){a.preventDefault(),a.stopPropagation();var c=tinyMCE.activeEditor,d="\n"+b.author+": <blockquote>"+b.content+"</blockquote>";return c.setContent(c.getContent()+d),!1}),k};return{createCommentDiv:a,prepareCommentActions:b}}()),("undefined"==typeof window||null===window)&&(window={twttr:{}}),null==window.twttr&&(window.twttr={}),("undefined"==typeof twttr||null===twttr)&&(twttr={}),function(){function a(a,b){return b=b||"","string"!=typeof a&&(a.global&&b.indexOf("g")<0&&(b+="g"),a.ignoreCase&&b.indexOf("i")<0&&(b+="i"),a.multiline&&b.indexOf("m")<0&&(b+="m"),a=a.source),new RegExp(a.replace(/#\{(\w+)\}/g,function(a,b){var c=twttr.txt.regexen[b]||"";return"string"!=typeof c&&(c=c.source),c}),b)}function b(a,b){return a.replace(/#\{(\w+)\}/g,function(a,c){return b[c]||""})}function c(a,b,c){var d=String.fromCharCode(b);return c!==b&&(d+="-"+String.fromCharCode(c)),a.push(d),a}function d(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function e(a,b,c){return c?!a||a.match(b)&&RegExp["$&"]===a:"string"==typeof a&&a.match(b)&&RegExp["$&"]===a}twttr.txt={},twttr.txt.regexen={};var f={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};twttr.txt.htmlEscape=function(a){return a&&a.replace(/[&"'><]/g,function(a){return f[a]})},twttr.txt.regexSupplant=a,twttr.txt.stringSupplant=b,twttr.txt.addCharsToCharClass=c;var g=String.fromCharCode,h=[g(32),g(133),g(160),g(5760),g(6158),g(8232),g(8233),g(8239),g(8287),g(12288)];c(h,9,13),c(h,8192,8202);var i=[g(65534),g(65279),g(65535)];c(i,8234,8238),twttr.txt.regexen.spaces_group=a(h.join("")),twttr.txt.regexen.spaces=a("["+h.join("")+"]"),twttr.txt.regexen.invalid_chars_group=a(i.join("")),twttr.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/,twttr.txt.regexen.rtl_chars=/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/gm;var j=[];c(j,1024,1279),c(j,1280,1319),c(j,11744,11775),c(j,42560,42655),c(j,1425,1471),c(j,1473,1474),c(j,1476,1477),c(j,1479,1479),c(j,1488,1514),c(j,1520,1524),c(j,64274,64296),c(j,64298,64310),c(j,64312,64316),c(j,64318,64318),c(j,64320,64321),c(j,64323,64324),c(j,64326,64335),c(j,1552,1562),c(j,1568,1631),c(j,1646,1747),c(j,1749,1756),c(j,1758,1768),c(j,1770,1775),c(j,1786,1788),c(j,1791,1791),c(j,1872,1919),c(j,2208,2208),c(j,2210,2220),c(j,2276,2302),c(j,64336,64433),c(j,64467,64829),c(j,64848,64911),c(j,64914,64967),c(j,65008,65019),c(j,65136,65140),c(j,65142,65276),c(j,8204,8204),c(j,3585,3642),c(j,3648,3662),c(j,4352,4607),c(j,12592,12677),c(j,43360,43391),c(j,44032,55215),c(j,55216,55295),c(j,65441,65500),c(j,12449,12538),c(j,12540,12542),c(j,65382,65439),c(j,65392,65392),c(j,65296,65305),c(j,65313,65338),c(j,65345,65370),c(j,12353,12438),c(j,12441,12446),c(j,13312,19903),c(j,19968,40959),c(j,173824,177983),c(j,177984,178207),c(j,194560,195103),c(j,12291,12291),c(j,12293,12293),c(j,12347,12347),twttr.txt.regexen.nonLatinHashtagChars=a(j.join(""));var k=[];c(k,192,214),c(k,216,246),c(k,248,255),c(k,256,591),c(k,595,596),c(k,598,599),c(k,601,601),c(k,603,603),c(k,611,611),c(k,616,616),c(k,623,623),c(k,626,626),c(k,649,649),c(k,651,651),c(k,699,699),c(k,768,879),c(k,7680,7935),twttr.txt.regexen.latinAccentChars=a(k.join("")),twttr.txt.regexen.hashSigns=/[#＃]/,twttr.txt.regexen.hashtagAlpha=a(/[a-z_#{latinAccentChars}#{nonLatinHashtagChars}]/i),twttr.txt.regexen.hashtagAlphaNumeric=a(/[a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}]/i),twttr.txt.regexen.endHashtagMatch=a(/^(?:#{hashSigns}|:\/\/)/),twttr.txt.regexen.hashtagBoundary=a(/(?:^|$|[^&a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}])/),twttr.txt.regexen.validHashtag=a(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi),twttr.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@＠]|RT:?)/,twttr.txt.regexen.atSigns=/[@＠]/,twttr.txt.regexen.validMentionOrList=a("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?","g"),twttr.txt.regexen.validReply=a(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/),twttr.txt.regexen.endMentionMatch=a(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/),twttr.txt.regexen.validUrlPrecedingChars=a(/(?:[^A-Za-z0-9@＠$#＃#{invalid_chars_group}]|^)/),twttr.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/,twttr.txt.regexen.invalidDomainChars=b("#{punct}#{spaces_group}#{invalid_chars_group}",twttr.txt.regexen),twttr.txt.regexen.validDomainChars=a(/[^#{invalidDomainChars}]/),twttr.txt.regexen.validSubdomain=a(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/),twttr.txt.regexen.validDomainName=a(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/),twttr.txt.regexen.validGTLD=a(/(?:(?:aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|xxx)(?=[^0-9a-zA-Z]|$))/),twttr.txt.regexen.validCCTLD=a(/(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)(?=[^0-9a-zA-Z]|$))/),twttr.txt.regexen.validPunycode=a(/(?:xn--[0-9a-z]+)/),twttr.txt.regexen.validDomain=a(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/),twttr.txt.regexen.validAsciiDomain=a(/(?:(?:[a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi),twttr.txt.regexen.invalidShortDomain=a(/^#{validDomainName}#{validCCTLD}$/),twttr.txt.regexen.validPortNumber=a(/[0-9]+/),twttr.txt.regexen.validGeneralUrlPathChars=a(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~|&#{latinAccentChars}]/i),twttr.txt.regexen.validUrlBalancedParens=a(/\(#{validGeneralUrlPathChars}+\)/i),twttr.txt.regexen.validUrlPathEndingChars=a(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i),twttr.txt.regexen.validUrlPath=a("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i"),twttr.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i,twttr.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i,twttr.txt.regexen.extractUrl=a("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi"),twttr.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i,twttr.txt.regexen.cashtag=/[a-z]{1,6}(?:[._][a-z]{1,2})?/i,twttr.txt.regexen.validCashtag=a("(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])","gi"),twttr.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i,twttr.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i,twttr.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i,twttr.txt.regexen.validateUrlPchar=a("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i"),twttr.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i,twttr.txt.regexen.validateUrlUserinfo=a("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*","i"),twttr.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i,twttr.txt.regexen.validateUrlIpv4=a(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i),twttr.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i,twttr.txt.regexen.validateUrlIp=a("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i"),twttr.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i,twttr.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i,twttr.txt.regexen.validateUrlDomainTld=/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i,twttr.txt.regexen.validateUrlDomain=a(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i),twttr.txt.regexen.validateUrlHost=a("(?:#{validateUrlIp}|#{validateUrlDomain})","i"),twttr.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,twttr.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,twttr.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,twttr.txt.regexen.validateUrlUnicodeDomain=a(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i),twttr.txt.regexen.validateUrlUnicodeHost=a("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i"),twttr.txt.regexen.validateUrlPort=/[0-9]{1,5}/,twttr.txt.regexen.validateUrlUnicodeAuthority=a("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?","i"),twttr.txt.regexen.validateUrlAuthority=a("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i"),twttr.txt.regexen.validateUrlPath=a(/(\/#{validateUrlPchar}*)*/i),twttr.txt.regexen.validateUrlQuery=a(/(#{validateUrlPchar}|\/|\?)*/i),twttr.txt.regexen.validateUrlFragment=a(/(#{validateUrlPchar}|\/|\?)*/i),twttr.txt.regexen.validateUrlUnencoded=a("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i");var l="tweet-url list-slug",m="tweet-url username",n="tweet-url hashtag",o="tweet-url cashtag",p={urlClass:!0,listClass:!0,usernameClass:!0,hashtagClass:!0,cashtagClass:!0,usernameUrlBase:!0,listUrlBase:!0,hashtagUrlBase:!0,cashtagUrlBase:!0,usernameUrlBlock:!0,listUrlBlock:!0,hashtagUrlBlock:!0,linkUrlBlock:!0,usernameIncludeSymbol:!0,suppressLists:!0,suppressNoFollow:!0,suppressDataScreenName:!0,urlEntities:!0,symbolTag:!0,textWithSymbolTag:!0,urlTarget:!0,invisibleTagAttrs:!0,linkAttributeBlock:!0,linkTextBlock:!0},q={disabled:!0,readonly:!0,multiple:!0,checked:!0};twttr.txt.tagAttrs=function(a){var b="";for(var c in a){var d=a[c];q[c]&&(d=d?c:null),null!=d&&(b+=" "+twttr.txt.htmlEscape(c)+'="'+twttr.txt.htmlEscape(d.toString())+'"')}return b},twttr.txt.linkToText=function(a,c,d,e){e.suppressNoFollow||(d.rel="nofollow"),e.linkAttributeBlock&&e.linkAttributeBlock(a,d),e.linkTextBlock&&(c=e.linkTextBlock(a,c));var f={text:c,attr:twttr.txt.tagAttrs(d)};return b("<a#{attr}>#{text}</a>",f)},twttr.txt.linkToTextWithSymbol=function(a,b,c,d,e){var f=e.symbolTag?"<"+e.symbolTag+">"+b+"</"+e.symbolTag+">":b;c=twttr.txt.htmlEscape(c);var g=e.textWithSymbolTag?"<"+e.textWithSymbolTag+">"+c+"</"+e.textWithSymbolTag+">":c;return e.usernameIncludeSymbol||!b.match(twttr.txt.regexen.atSigns)?twttr.txt.linkToText(a,f+g,d,e):f+twttr.txt.linkToText(a,g,d,e)},twttr.txt.linkToHashtag=function(a,b,c){var e=b.substring(a.indices[0],a.indices[0]+1),f=twttr.txt.htmlEscape(a.hashtag),g=d(c.htmlAttrs||{});return g.href=c.hashtagUrlBase+f,g.title="#"+f,g["class"]=c.hashtagClass,f[0].match(twttr.txt.regexen.rtl_chars)&&(g["class"]+=" rtl"),twttr.txt.linkToTextWithSymbol(a,e,f,g,c)},twttr.txt.linkToCashtag=function(a,b,c){var e=twttr.txt.htmlEscape(a.cashtag),f=d(c.htmlAttrs||{});return f.href=c.cashtagUrlBase+e,f.title="$"+e,f["class"]=c.cashtagClass,twttr.txt.linkToTextWithSymbol(a,"$",e,f,c)},twttr.txt.linkToMentionAndList=function(a,b,c){var e=b.substring(a.indices[0],a.indices[0]+1),f=twttr.txt.htmlEscape(a.screenName),g=twttr.txt.htmlEscape(a.listSlug),h=a.listSlug&&!c.suppressLists,i=d(c.htmlAttrs||{});return i["class"]=h?c.listClass:c.usernameClass,i.href=h?c.listUrlBase+f+g:c.usernameUrlBase+f,h||c.suppressDataScreenName||(i["data-screen-name"]=f),twttr.txt.linkToTextWithSymbol(a,e,h?f+g:f,i,c)},twttr.txt.linkToUrl=function(a,b,c){var e=a.url,f=e,g=twttr.txt.htmlEscape(f),h=c.urlEntities&&c.urlEntities[e]||a;h.display_url&&(g=twttr.txt.linkTextWithEntity(h,c));var i=d(c.htmlAttrs||{});return i.href=e,c.urlClass&&(i["class"]=c.urlClass),c.urlTarget&&(i.target=c.urlTarget),!c.title&&h.display_url&&(i.title=h.expanded_url),twttr.txt.linkToText(a,g,i,c)},twttr.txt.linkTextWithEntity=function(a,c){var d=a.display_url,e=a.expanded_url,f=d.replace(/…/g,"");if(-1!=e.indexOf(f)){var g=e.indexOf(f),h={displayUrlSansEllipses:f,beforeDisplayUrl:e.substr(0,g),afterDisplayUrl:e.substr(g+f.length),precedingEllipsis:d.match(/^…/)?"…":"",followingEllipsis:d.match(/…$/)?"…":""};for(var i in h)h.hasOwnProperty(i)&&(h[i]=twttr.txt.htmlEscape(h[i]));return h.invisible=c.invisibleTagAttrs,b("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",h)}return d},twttr.txt.autoLinkEntities=function(a,b,c){c=d(c||{}),c.hashtagClass=c.hashtagClass||n,c.hashtagUrlBase=c.hashtagUrlBase||"https://twitter.com/#!/search?q=%23",c.cashtagClass=c.cashtagClass||o,c.cashtagUrlBase=c.cashtagUrlBase||"https://twitter.com/#!/search?q=%24",c.listClass=c.listClass||l,c.usernameClass=c.usernameClass||m,c.usernameUrlBase=c.usernameUrlBase||"https://twitter.com/",c.listUrlBase=c.listUrlBase||"https://twitter.com/",c.htmlAttrs=twttr.txt.extractHtmlAttrsFromOptions(c),c.invisibleTagAttrs=c.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";var e,f,g;if(c.urlEntities){for(e={},f=0,g=c.urlEntities.length;g>f;f++)e[c.urlEntities[f].url]=c.urlEntities[f];c.urlEntities=e}var h="",i=0;b.sort(function(a,b){return a.indices[0]-b.indices[0]});for(var f=0;f<b.length;f++){var j=b[f];h+=a.substring(i,j.indices[0]),j.url?h+=twttr.txt.linkToUrl(j,a,c):j.hashtag?h+=twttr.txt.linkToHashtag(j,a,c):j.screenName?h+=twttr.txt.linkToMentionAndList(j,a,c):j.cashtag&&(h+=twttr.txt.linkToCashtag(j,a,c)),i=j.indices[1]}return h+=a.substring(i,a.length)},twttr.txt.autoLinkWithJSON=function(a,b,c){var d=[];for(var e in b)d=d.concat(b[e]);for(var f=0;f<d.length;f++)entity=d[f],entity.screen_name?entity.screenName=entity.screen_name:entity.text&&(entity.hashtag=entity.text);return twttr.txt.modifyIndicesFromUnicodeToUTF16(a,d),twttr.txt.autoLinkEntities(a,d,c)},twttr.txt.extractHtmlAttrsFromOptions=function(a){var b={};for(var c in a){var d=a[c];p[c]||(q[c]&&(d=d?c:null),null!=d&&(b[c]=d))}return b},twttr.txt.autoLink=function(a,b){var c=twttr.txt.extractEntitiesWithIndices(a,{extractUrlWithoutProtocol:!1});return twttr.txt.autoLinkEntities(a,c,b)},twttr.txt.autoLinkUsernamesOrLists=function(a,b){var c=twttr.txt.extractMentionsOrListsWithIndices(a);return twttr.txt.autoLinkEntities(a,c,b)},twttr.txt.autoLinkHashtags=function(a,b){var c=twttr.txt.extractHashtagsWithIndices(a);return twttr.txt.autoLinkEntities(a,c,b)},twttr.txt.autoLinkCashtags=function(a,b){var c=twttr.txt.extractCashtagsWithIndices(a);return twttr.txt.autoLinkEntities(a,c,b)},twttr.txt.autoLinkUrlsCustom=function(a,b){var c=twttr.txt.extractUrlsWithIndices(a,{extractUrlWithoutProtocol:!1});return twttr.txt.autoLinkEntities(a,c,b)},twttr.txt.removeOverlappingEntities=function(a){a.sort(function(a,b){return a.indices[0]-b.indices[0]});for(var b=a[0],c=1;c<a.length;c++)b.indices[1]>a[c].indices[0]?(a.splice(c,1),c--):b=a[c]},twttr.txt.extractEntitiesWithIndices=function(a,b){var c=twttr.txt.extractUrlsWithIndices(a,b).concat(twttr.txt.extractMentionsOrListsWithIndices(a)).concat(twttr.txt.extractHashtagsWithIndices(a,{checkUrlOverlap:!1})).concat(twttr.txt.extractCashtagsWithIndices(a));return 0==c.length?[]:(twttr.txt.removeOverlappingEntities(c),c)},twttr.txt.extractMentions=function(a){for(var b=[],c=twttr.txt.extractMentionsWithIndices(a),d=0;d<c.length;d++){var e=c[d].screenName;b.push(e)}return b},twttr.txt.extractMentionsWithIndices=function(a){for(var b=[],c=twttr.txt.extractMentionsOrListsWithIndices(a),d=0;d<c.length;d++)mentionOrList=c[d],""==mentionOrList.listSlug&&b.push({screenName:mentionOrList.screenName,indices:mentionOrList.indices});return b},twttr.txt.extractMentionsOrListsWithIndices=function(a){if(!a||!a.match(twttr.txt.regexen.atSigns))return[];var b=[];return a.replace(twttr.txt.regexen.validMentionOrList,function(a,c,d,e,f,g,h){var i=h.slice(g+a.length);if(!i.match(twttr.txt.regexen.endMentionMatch)){f=f||"";var j=g+c.length,k=j+e.length+f.length+1;b.push({screenName:e,listSlug:f,indices:[j,k]})}}),b},twttr.txt.extractReplies=function(a){if(!a)return null;var b=a.match(twttr.txt.regexen.validReply);return!b||RegExp.rightContext.match(twttr.txt.regexen.endMentionMatch)?null:b[1]},twttr.txt.extractUrls=function(a,b){for(var c=[],d=twttr.txt.extractUrlsWithIndices(a,b),e=0;e<d.length;e++)c.push(d[e].url);return c},twttr.txt.extractUrlsWithIndices=function(a,b){if(b||(b={extractUrlsWithoutProtocol:!0}),!a||(b.extractUrlsWithoutProtocol?!a.match(/\./):!a.match(/:/)))return[];for(var c=[];twttr.txt.regexen.extractUrl.exec(a);){var d=RegExp.$2,e=RegExp.$3,f=RegExp.$4,g=RegExp.$5,h=RegExp.$7,i=twttr.txt.regexen.extractUrl.lastIndex,j=i-e.length;if(f)e.match(twttr.txt.regexen.validTcoUrl)&&(e=RegExp.lastMatch,i=j+e.length),c.push({url:e,indices:[j,i]});else{if(!b.extractUrlsWithoutProtocol||d.match(twttr.txt.regexen.invalidUrlWithoutProtocolPrecedingChars))continue;var k=null,l=!1,m=0;if(g.replace(twttr.txt.regexen.validAsciiDomain,function(a){var b=g.indexOf(a,m);m=b+a.length,k={url:a,indices:[j+b,j+m]},l=a.match(twttr.txt.regexen.invalidShortDomain),l||c.push(k)}),null==k)continue;h&&(l&&c.push(k),k.url=e.replace(g,k.url),k.indices[1]=i)}}return c},twttr.txt.extractHashtags=function(a){for(var b=[],c=twttr.txt.extractHashtagsWithIndices(a),d=0;d<c.length;d++)b.push(c[d].hashtag);return b},twttr.txt.extractHashtagsWithIndices=function(a,b){if(b||(b={checkUrlOverlap:!0}),!a||!a.match(twttr.txt.regexen.hashSigns))return[];var c=[];if(a.replace(twttr.txt.regexen.validHashtag,function(a,b,d,e,f,g){var h=g.slice(f+a.length);if(!h.match(twttr.txt.regexen.endHashtagMatch)){var i=f+b.length,j=i+e.length+1;c.push({hashtag:e,indices:[i,j]})}}),b.checkUrlOverlap){var d=twttr.txt.extractUrlsWithIndices(a);if(d.length>0){var e=c.concat(d);twttr.txt.removeOverlappingEntities(e),c=[];for(var f=0;f<e.length;f++)e[f].hashtag&&c.push(e[f])}}return c},twttr.txt.extractCashtags=function(a){for(var b=[],c=twttr.txt.extractCashtagsWithIndices(a),d=0;d<c.length;d++)b.push(c[d].cashtag);return b},twttr.txt.extractCashtagsWithIndices=function(a){if(!a||-1==a.indexOf("$"))return[];var b=[];return a.replace(twttr.txt.regexen.validCashtag,function(a,c,d,e,f,g){var h=f+c.length,i=h+e.length+1;b.push({cashtag:e,indices:[h,i]})}),b},twttr.txt.modifyIndicesFromUnicodeToUTF16=function(a,b){twttr.txt.convertUnicodeIndices(a,b,!1)},twttr.txt.modifyIndicesFromUTF16ToUnicode=function(a,b){
twttr.txt.convertUnicodeIndices(a,b,!0)},twttr.txt.convertUnicodeIndices=function(a,b,c){if(0!=b.length){var d=0,e=0;b.sort(function(a,b){return a.indices[0]-b.indices[0]});for(var f=0,g=b[0];d<a.length;){if(g.indices[0]==(c?d:e)){var h=g.indices[1]-g.indices[0];if(g.indices[0]=c?e:d,g.indices[1]=g.indices[0]+h,f++,f==b.length)break;g=b[f]}var i=a.charCodeAt(d);i>=55296&&56319>=i&&d<a.length-1&&(i=a.charCodeAt(d+1),i>=56320&&57343>=i&&d++),e++,d++}}},twttr.txt.splitTags=function(a){for(var b,c,d=a.split("<"),e=[],f=0;f<d.length;f+=1)if(c=d[f]){b=c.split(">");for(var g=0;g<b.length;g+=1)e.push(b[g])}else e.push("");return e},twttr.txt.hitHighlight=function(a,b,c){var d="em";if(b=b||[],c=c||{},0===b.length)return a;var e,f,g,h,i,j,k,l=c.tag||d,m=["<"+l+">","</"+l+">"],n=twttr.txt.splitTags(a),o="",p=0,q=n[0],r=0,s=0,t=!1,u=q,v=[];for(e=0;e<b.length;e+=1)for(f=0;f<b[e].length;f+=1)v.push(b[e][f]);for(g=0;g<v.length;g+=1){for(h=v[g],i=m[g%2],j=!1;null!=q&&h>=r+q.length;)o+=u.slice(s),t&&h===r+u.length&&(o+=i,j=!0),n[p+1]&&(o+="<"+n[p+1]+">"),r+=u.length,s=0,p+=2,q=n[p],u=q,t=!1;j||null==q?j||(j=!0,o+=i):(k=h-r,o+=u.slice(s,k)+i,s=k,t=g%2===0?!0:!1)}if(null!=q)for(s<u.length&&(o+=u.slice(s)),g=p+1;g<n.length;g+=1)o+=g%2===0?n[g]:"<"+n[g]+">";return o};var r=140,s=[g(65534),g(65279),g(65535),g(8234),g(8235),g(8236),g(8237),g(8238)];twttr.txt.getTweetLength=function(a,b){b||(b={short_url_length:20,short_url_length_https:21});for(var c=a.length,d=twttr.txt.extractUrlsWithIndices(a),e=0;e<d.length;e++)c+=d[e].indices[0]-d[e].indices[1],c+=d[e].url.toLowerCase().match(/^https:\/\//)?b.short_url_length_https:b.short_url_length;return c},twttr.txt.isInvalidTweet=function(a){if(!a)return"empty";if(twttr.txt.getTweetLength(a)>r)return"too_long";for(var b=0;b<s.length;b++)if(a.indexOf(s[b])>=0)return"invalid_characters";return!1},twttr.txt.isValidTweetText=function(a){return!twttr.txt.isInvalidTweet(a)},twttr.txt.isValidUsername=function(a){if(!a)return!1;var b=twttr.txt.extractMentions(a);return 1===b.length&&b[0]===a.slice(1)};var t=a(/^#{validMentionOrList}$/);twttr.txt.isValidList=function(a){var b=a.match(t);return!(!b||""!=b[1]||!b[4])},twttr.txt.isValidHashtag=function(a){if(!a)return!1;var b=twttr.txt.extractHashtags(a);return 1===b.length&&b[0]===a.slice(1)},twttr.txt.isValidUrl=function(a,b,c){if(null==b&&(b=!0),null==c&&(c=!0),!a)return!1;var d=a.match(twttr.txt.regexen.validateUrlUnencoded);if(!d||d[0]!==a)return!1;var f=d[1],g=d[2],h=d[3],i=d[4],j=d[5];return(!c||e(f,twttr.txt.regexen.validateUrlScheme)&&f.match(/^https?$/i))&&e(h,twttr.txt.regexen.validateUrlPath)&&e(i,twttr.txt.regexen.validateUrlQuery,!0)&&e(j,twttr.txt.regexen.validateUrlFragment,!0)?b&&e(g,twttr.txt.regexen.validateUrlUnicodeAuthority)||!b&&e(g,twttr.txt.regexen.validateUrlAuthority):!1},"undefined"!=typeof module&&module.exports&&(module.exports=twttr.txt)}(),Dashboard.Twitter=Livepress.ensureExists(Dashboard.Twitter),Dashboard.Twitter.terms=[],Dashboard.Twitter.tweets=[],void 0===Dashboard.Twitter.twitter&&(Dashboard.Twitter=jQuery.extend(Dashboard.Twitter,function(){var a=0,b=jQuery("#lp-pane-holder"),c=Dashboard.Twitter,d=Dashboard.Helpers.createLiveCounter("#tab-link-live-twitter-search a"),e="#lp-twitter-results",f="#lp-hidden-tweets",g=function(){return jQuery(a>0?f:e)},h=function(){var g=function(a,b){a.off("click").on("click",function(){var a=jQuery(this).parent(".lp-"+b),d=a.find(".lp-"+b+"-text").text(),e=a.attr("id");"term"===b?c.removeTerm(e,d):"tweet"===b&&(d=d.substr(1,d.length),c.removeTweet(e,d))})},h="#lp-tweet-player",i=function(){a--,0>=a&&(a=0,d.disable(),c.appendGatheredTweets(),jQuery(h).attr("title",lp_strings.click_pause_tweets).removeClass("paused"),jQuery(e).removeClass("paused"),jQuery("#pausedmsg").hide())},j=function(){a++,1===a&&(d.enable(),jQuery(h).attr("title",lp_strings.click_copy_tweets).addClass("paused"),jQuery(e).addClass("paused"),jQuery("#pausedmsg").show())};return{bindCleaners:function(){b.on("click","a.lp-tweet-cleaner",function(a){return a.preventDefault(),a.stopPropagation(),c.removeAllTweets(),!1}),b.on("click",".lp-term-cleaner a",function(a){a.preventDefault(),a.stopPropagation(),c.removeAllTerms(),"clear"===jQuery(this).attr("data-action")&&(jQuery(e).html(""),jQuery(f).html(""))})},bindAddTermInput:function(){var a=function(a){a.preventDefault(),a.stopPropagation();var b=jQuery("#live-search-query").val();b.length>0&&c.addTerm(b)},b=jQuery("#screen-meta");b.on("click","#live-search-column input.button-secondary",a),b.on("keydown","#live-search-column #live-search-query",function(b){13===b.keyCode&&a(b)})},bindStaticSearchButton:function(){var a=jQuery("#lp-new-static-search"),b=jQuery("#lp-on-top input.new_static_search"),d=function(b){b.preventDefault(),b.stopPropagation();var d=jQuery("#lp-new-static-search").val();d.length>0&&(c.renderStaticSearchResults(d),a.val(""))};b.bind("click",d),a.keydown(function(a){13===a.keyCode&&d(a)})},bindAddGuestBloggerInput:function(){var a=function(a){a.preventDefault(),a.stopPropagation();var b=jQuery("#new-twitter-account").val();b.length>0&&c.addGuestBlogger(b)},b=jQuery("#screen-meta");b.on("click","#remote-authors input.termadd",a),b.on("keydown","#remote-authors #new-twitter-account",function(b){13===b.keyCode&&a(b)}),b.on("click","#remote-authors .cleaner",function(a){return a.preventDefault(),a.stopPropagation(),c.removeAllTweets(),!1}),b.find(".lp-tweet-cleaner").hide()},bindRemoveTermButtons:function(){g(jQuery(".lp-term-clean-button"),"term")},bindRemoveTweetButtons:function(){g(jQuery(".lp-tweet-clean-button"),"tweet")},bindTweetPlayer:function(){jQuery(h).click(function(a){return a.preventDefault(),a.stopPropagation(),jQuery(this).hasClass("paused")?i():j()})},bindTweetMouse:function(){jQuery(e).hover(j,i)},init:function(){this.bindAddTermInput(),this.bindStaticSearchButton(),this.bindAddGuestBloggerInput(),this.bindRemoveTweetButtons(),this.bindRemoveTermButtons(),this.bindTweetPlayer(),this.bindTweetMouse()}}}(),i=!1,j=function(a){var b=jQuery("<div id=tweet-"+a.id+" class='comment-item "+(i?"odd":"even")+"'></div>"),c=a.created_at.parseGMT(),d=jQuery("<img class='avatar avatar-32 photo' width='32' height='32' />").attr("src",a.avatar_url).attr("alt",a.author),e=jQuery("<div class='lp-comment-author author'>").append(d).append(jQuery('<span class="lp-tweet-author"></span>').text(a.author)).append(jQuery('<span class="lp-tweet-date">'+c+"</span>"));b.append(e),b.data("term",a.term),i=!i;var f=jQuery("<div class='lp-comment comment'></div>").append(jQuery("<p>"+a.text+"</p>").autolink());f.find("a").attr("target","_blank");var g=jQuery("<div class='row-actions'></div>"),h=jQuery("<span class='post'><a href='#' title='"+lp_strings.copy_tweets+"'>"+lp_strings.send_to_editor+"</a><span>");return g.append(h),h.bind("click",function(b){b.preventDefault(),b.stopPropagation();var c,d,e,f=tinyMCE.editors;for(d=0;d<=tinyMCE.editors.length;d++)if(e=f[d],-1!==e.id.indexOf("livepress")){c=e;break}var g=(new Date(a.created_at),"[embed]http://twitter.com/"+a.author+"/status/"+a.id+"[/embed]\n");c.setContent(c.getContent()+g);var h=jQuery(".livepress-newform").find("input.button-primary");h.removeAttr("disabled")}),f.append(g),b.append(f),b},k=function(a,b){if(!(a.find("#tweet-"+b.id).length>0)){var c=a.find(".lp-spinner");c.length>0&&c.remove();var d=j(b);d.hide(),a.prepend(d),a.find("div.comment-item:gt(200)").remove(),d.slideDown()}};return{twitter:this,liveCounter:d,new_tweet_for_search_callback:function(a){var b=g();a.id=a.id_str,k(b,a),d.enabled&&d.increment()},follow_twitter_search:function(a){var b="|livepress|tweet-search|"+a;OORTLE.instance.subscribe(b,this.new_tweet_for_search_callback)},unfollow_twitter_search:function(a){var b="|livepress|tweet-search|"+a;OORTLE.instance.unsubscribe(b,this.new_tweet_for_search_callback)},refresh_terms:function(){for(var a=Dashboard.Twitter.terms,b="",c=0;c<a.length;c+=1)b+='<div class="lp-term" id="term-'+c+'"><a class="dashicons dashicons-dismiss lp-term-clean-button" title="'+lp_strings.remove_term+'"></a><span class="lp-term-text">'+a[c]+"</span></div>";b+='<div class="clear"></div>',jQuery("#lp-twitter-search-terms").html(b),jQuery("#twitter-search-pane").is(".lp-pane-active")&&jQuery("#lp-on-top").show(),h.bindRemoveTermButtons(),d.reset(),jQuery(e).html(0===a.length?"":"<div class='lp-spinner'></div>")},refresh_tweets:function(){for(var a=Dashboard.Twitter.tweets,b="",c=0;c<a.length;c+=1)b+='<li id="tweet-'+c+'" class="'+(c%2===1?"odd":"even")+' lp-tweet">',b+='<span class="lp-tweet-text">@'+a[c]+"</span>",b+='<a class="lp-tweet-clean-button" title="'+lp_strings.remove_account+'">'+lp_strings.remove_lower+"</a>",b+="</li>";jQuery("#lp-account-list").html(b),a.length?jQuery(".lp-tweet-cleaner").show():jQuery(".lp-tweet-cleaner").hide();var d=jQuery(document.getElementById("livepress-authors_num")),e=d.siblings(".label"),f=1===a.length?lp_strings.remove_author:lp_strings.remove_authors;d.html(a.length),e.text(f),h.bindRemoveTweetButtons()},addTermOrTweet:function(a,b,c){var d={dontPostToLivepress:!1,afterPushFunction:function(){},ajaxRequest:function(){},inputToClean:null};if(c=jQuery.extend({},d,c),c.inputToClean&&c.inputToClean.val(""),a=a.toLowerCase(),-1===jQuery.inArray(a,b)){var e=function(d){"string"==typeof d&&(d=JSON.parse(d)),d&&(d.success?(b.push(a),c.afterPushFunction()):d.errors&&("undefined"!=typeof c.afterPushFailedFunction&&c.afterPushFailedFunction(d.errors),Dashboard.Helpers.handleErrors(d.errors),c.inputToClean&&Dashboard.Helpers.enableAndHideSpinner(c.inputToClean)))};c.dontPostToLivepress?e({success:!0}):c.ajaxRequest(a,"add",e)}},handleRemovingFromCollection:function(a,b,c){var d=a.replace(c+"-","");b.splice(d,1),"tweet"===c?this.refresh_tweets(b):this.refresh_terms()},addTerm:function(a,b){var d=jQuery("#live-search-query"),e={dontPostToLivepress:b,afterPushFunction:function(){c.follow_twitter_search(a),c.refresh_terms(),Dashboard.Helpers.enableAndHideSpinner(d)},ajaxRequest:c.postTweetSearch,inputToClean:d};this.addTermOrTweet(a,Dashboard.Twitter.terms,e)},removeTerm:function(a,b){c.postTweetSearch(b,"remove",function(d){d=JSON.parse(d),d&&d.success&&(c.unfollow_twitter_search(b),c.handleRemovingFromCollection(a,Dashboard.Twitter.terms,"term"),jQuery(e+" .comment-item").filter(function(){return jQuery.data(this,"term")===b}).remove())})},unsubscribeTwitterChannels:function(){this.removeAllTerms(!0)},removeAllTerms:function(a){var b=function(){jQuery.each(Dashboard.Twitter.terms,function(a,b){c.unfollow_twitter_search(b)}),Dashboard.Twitter.terms=[],c.refresh_terms()};if(a)b();else{var d=function(a){a=JSON.parse(a),a&&a.success&&b()};this.postTweetSearch("","clear",d)}},renderStaticSearchResults:function(a,b,c){b||(b=function(){var a=jQuery("#lp-static-search-results");return a.html(""),a});var d=b(),e=jQuery("<div class='lp-spinner'></div>");0===d.find(".lp-spinner").length&&e.appendTo(d)},postTweetSearch:function(a,b,d){return jQuery.post("admin-ajax.php",{_ajax_nonce:LivepressConfig.ajax_twitter_search_nonce,action:"lp_twitter_search_term",term:a,action_type:b,post_id:LivepressConfig.post_id},d),"add"===b&&(Dashboard.Twitter.renderStaticSearchResults(a,g,5),c.refresh_terms()),!0},checkIfAutoTweetPossible:function(){LivepressConfig.remote_post?(b.find(".autotweet-container").show(),jQuery("#autotweet-blocked .warning").hide()):(b.find(".autotweet-container").hide(),jQuery("#autotweet-blocked .warning").show())},addGuestBlogger:function(a,b){var d=jQuery("#new-twitter-account"),e=jQuery("#termadderror");a=a.replace("@","");var f={dontPostToLivepress:b,afterPushFunction:function(){c.refresh_tweets(),Dashboard.Helpers.enableAndHideSpinner(d)},afterPushFailedFunction:function(a){e.show(),e.find("#errmsg").html(a.username.replace("[","").replace("]","")),setTimeout(function(){e.fadeOut(750)},2e3)},ajaxRequest:this.postTwitterFollow,inputToClean:d};this.addTermOrTweet(a,Dashboard.Twitter.tweets,f)},removeTweet:function(a,b){var c=this;this.postTwitterFollow(b,"remove",function(b){b=JSON.parse(b),b&&b.success&&c.handleRemovingFromCollection(a,Dashboard.Twitter.tweets,"tweet")})},removeAllTweets:function(){this.postTwitterFollow("","clear",function(a){a=JSON.parse(a),a&&a.success&&(Dashboard.Twitter.tweets=[],c.refresh_tweets())})},appendGatheredTweets:function(){var a=jQuery(f+" .comment-item"),b=jQuery(e);a.hide(),b.prepend(a),a.slideDown()},postTwitterFollow:function(a,b,c){return jQuery.post("admin-ajax.php",{_ajax_nonce:LivepressConfig.ajax_twitter_follow_nonce,action:"lp_twitter_follow",username:a,action_type:b,post_id:LivepressConfig.post_id},c),!0},conditionallyEnable:function(){0>=this.terms.length?this.liveCounter.disable():this.liveCounter.enable()},init:function(){d.enable(),this.checkIfAutoTweetPossible(),h.init()}}}()));var Livepress=Livepress||{};!function(){var a=function(){var a,b,c,d=[],e=[],f=navigator.userAgent.toLowerCase();if(a=f.match(new RegExp("rv:(\\d+)\\.\\d+")),b=-1!==f.indexOf("khtml")||"Microsoft Internet Explorer"===navigator.appName||-1!==f.indexOf("gecko")&&parseInt(a[1],10)>=2,void 0!==Livepress.JSQueue&&(d=d.concat(Livepress.JSQueue)),void 0!==Livepress.CSSQueue&&(e=e.concat(Livepress.CSSQueue)),void 0!==LivepressConfig.debug&&LivepressConfig.debug){var g=encodeURIComponent("jQuery(function(){Livepress.Ready()})");d=d.concat(["static://oortle.full.js?rnd="+Math.random(),"static://oortle_dynamic.js?run="+g+"&rnd="+Math.random()])}else d=d.concat(["static://oortle/"+LivepressConfig.oover[0]+"/oortle.min.js","static://"+LivepressConfig.oover[1]+"/cluster_settings.js?v="+LivepressConfig.oover[2]]);var h=function(a){var b=a.match(/^([a-z]+):\/\/(.*)$/);if(b.length&&void 0!==LivepressConfig[b[1]+"_url"]){var c=LivepressConfig[b[1]+"_url"];"/"!==c.substr(-1)&&(c+="/"),a=c+b[2]}return a},i=function(a){if(!(a>=e.length)){var b=document.createElement("link");return b.setAttribute("id","OORTLEstyle"+a),b.setAttribute("type","text/css"),b.setAttribute("rel","stylesheet"),b.setAttribute("href",h(e[a])),document.getElementsByTagName("head").item(0).appendChild(b),!0}},j=function(a,c){if(a>=d.length)return!1;if(!d[a])return c?!1:j(a+1);var e=document.createElement("script");return e.setAttribute("id","OORTLEscript"+a),e.setAttribute("type","text/javascript"),e.setAttribute("src",h(d[a])),b&&("undefined"!=typeof e.onreadystatechange?e.onreadystatechange=function(){("loaded"===this.readyState||"complete"===this.readyState)&&(this.onreadystatechange=function(){},j(a+1))}:e.onload=e.onerror=function(){j(a+1)}),document.getElementsByTagName("head").item(0).appendChild(e),!0};for(c=0;c<e.length;c++)i(c);for(c=0;c<d.length&&(!j(c,!0)||!b);c++);};"undefined"==typeof jQuery?a():jQuery(a)}(),function(){if(!window.google||!google.gears){var a=null;if("undefined"!=typeof GearsFactory)a=new GearsFactory;else try{"undefined"!=typeof window.ActiveXObject&&(a=new ActiveXObject("Gears.Factory"),-1!=a.getBuildInfo().indexOf("ie_mobile")&&a.privateSetGlobalObject(this))}catch(b){"undefined"!=typeof navigator.mimeTypes&&navigator.mimeTypes["application/x-googlegears"]&&(a=document.createElement("object"),a.style.display="none",a.width=0,a.height=0,a.type="application/x-googlegears",document.documentElement.appendChild(a))}a&&(window.google||(google={}),google.gears||(google.gears={factory:a}))}}();var internalStorage=function(){var a={expires:30,get:function(a){return jQuery.cookie(a)},set:function(a,b){return jQuery.cookie(a,b,{path:"/",expires:this.expires})},remove:function(a){return jQuery.cookie(a,null)}},b=a;try{"localStorage"in window&&null!==window.localStorage&&(b=window.localStorage)}catch(c){}return function(a){return a||(a=""),{get:function(c,d){return b.getItem(a+"-"+c)},set:function(c,d){return b.setItem(a+"-"+c,d)},remove:function(c){return b.remoteItem(a+"-"+c)}}}}();Livepress.storage=function(){var a=new internalStorage("Livepress");return{get:function(b,c){var d=a.get(b);return null===d||"undefined"==typeof d?c:d},set:function(b,c){return a.set(b,c)}}}();
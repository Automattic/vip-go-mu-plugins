!function(t){var e={};function a(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e){jQuery(document).ready((function(t){var e={default:function(e){var a='<div class="jitm-card jitm-banner '+(e.CTA.message?"has-call-to-action":"")+" is-upgrade-premium "+e.content.classes+'" data-stats_url="'+e.jitm_stats_url+'">';if(a+='<div class="jitm-banner__content">',a+='<div class="jitm-banner__icon-plan">'+e.content.icon+"</div>",a+='<div class="jitm-banner__info">',a+='<div class="jitm-banner__title">'+e.content.message+"</div>",e.content.description&&""!==e.content.description){if(a+='<div class="jitm-banner__description">'+e.content.description,e.content.list.length>0){a+='<ul class="banner__list">';for(var n=0;n<e.content.list.length;n++){var i=e.content.list[n].item;e.content.list[n].url&&(i='<a href="'+e.content.list[n].url+'" target="_blank" rel="noopener noreferrer" data-module="'+e.feature_class+'" data-jptracks-name="nudge_item_click" data-jptracks-prop="jitm-'+e.id+'">'+i+"</a>"),a+='<li><svg class="gridicon gridicons-checkmark" height="16" width="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M9 19.414l-6.707-6.707 1.414-1.414L9 16.586 20.293 5.293l1.414 1.414" /></g></svg>'+i+"</li>"}}a+="</div>"}if(a+="</div>",a+="</div>",a+='<div class="jitm-banner__buttons_container">',e.activate_module&&(a+='<div class="jitm-banner__action" id="jitm-banner__activate">',a+='<a href="#" data-module="'+e.activate_module+'" type="button" class="jitm-button is-compact is-primary jptracks" data-jptracks-name="nudge_click" data-jptracks-prop="jitm-'+e.id+'-activate_module">'+window.jitm_config.activate_module_text+"</a>",a+="</div>"),e.CTA.message){var r="jitm-button is-compact jptracks";e.CTA.primary&&null===e.activate_module&&(r+=" is-primary");var o=e.CTA.ajax_action;a+='<div class="jitm-banner__action">',a+='<a href="'+e.url+'" target="'+(!1===e.CTA.newWindow||o?"_self":"_blank")+'" rel="noopener noreferrer" title="'+e.CTA.message+'" data-module="'+e.feature_class+'" type="button" class="'+r+'" data-jptracks-name="nudge_click" data-jptracks-prop="jitm-'+e.id+'" '+(o?'data-ajax-action="'+o+'"':"")+">"+e.CTA.message+"</a>",a+="</div>"}return a+="</div>",e.is_dismissible&&(a+='<a href="#" data-module="'+e.feature_class+'" class="jitm-banner__dismiss"></a>'),t(a+="</div>")}},a=function(){t(".jetpack-jitm-message").each((function(){var a=t(this),n=a.data("message-path"),i=a.data("query"),r=a.data("redirect"),o=location.hash;"_dashboard"!==(o=o.replace(/#\//,"_"))&&(n=n.replace("toplevel_page_jetpack","toplevel_page_jetpack"+o));var c=!!t(".jetpack-logo__masthead").length;t.get(window.jitm_config.api_root+"jetpack/v4/jitm",{message_path:n,query:i,full_jp_logo_exists:c,_wpnonce:a.data("nonce")}).then((function(n){"object"==typeof n&&n[1]&&(n=[n[1]]),0!==n.length&&n[0].content&&function(a,n,i){var r;(r=n.template)&&e[r]||(r="default"),n.url=n.url+"&redirect="+i;var o,c=e[r](n);c.find(".jitm-banner__dismiss").click((o=c,function(e){e.preventDefault(),o.hide(),t.ajax({url:window.jitm_config.api_root+"jetpack/v4/jitm",method:"POST",beforeSend:function(t){t.setRequestHeader("X-WP-Nonce",window.jitm_config.nonce)},data:{id:n.id,feature_class:n.feature_class}})})),t("#jp-admin-notices").length>0?(a.innerHTML=c,t("#jp-admin-notices").find(".jitm-card")&&t(".jitm-card").replaceWith(c),c.prependTo(t("#jp-admin-notices"))):a.replaceWith(c),c.find("#jitm-banner__activate a").click((function(){var e=t(this);if(e.attr("disabled"))return!1;t.ajax({url:window.jitm_config.api_root+"jetpack/v4/module/"+e.data("module")+"/active",method:"POST",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",a.data("nonce")),t("#jitm-banner__activate a").text(window.jitm_config.activating_module_text),t("#jitm-banner__activate a").attr("disabled",!0)}}).done((function(){t("#jitm-banner__activate a").text(window.jitm_config.activated_module_text),t("#jitm-banner__activate a").attr("disabled",!0),setTimeout((function(){c.fadeOut("slow")}),2e3)}))})),c.find(".jitm-button[data-ajax-action]").click((function(e){e.preventDefault();var n=t(this);return n.attr("disabled",!0),t.post(window.ajaxurl,{action:n.data("ajax-action"),_nonce:a.data("ajax-nonce")}).done((function(){c.fadeOut("slow")})).fail((function(){n.attr("disabled",!1)})),!1}))}(a,n[0],r)}))}))};a(),t(window).bind("hashchange",(function(t){if(t.originalEvent.newURL.indexOf("jetpack#/")>=0){var e=document.querySelector(".jitm-card");e&&e.remove(),a()}}))}))}]);